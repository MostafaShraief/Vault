/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var Kp=Object.create;var es=Object.defineProperty;var qp=Object.getOwnPropertyDescriptor;var jp=Object.getOwnPropertyNames;var Up=Object.getPrototypeOf,Wp=Object.prototype.hasOwnProperty;var he=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),zp=(t,e)=>{for(var n in e)es(t,n,{get:e[n],enumerable:!0})},El=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of jp(e))!Wp.call(t,i)&&i!==n&&es(t,i,{get:()=>e[i],enumerable:!(r=qp(e,i))||r.enumerable});return t};var uo=(t,e,n)=>(n=t!=null?Kp(Up(t)):{},El(e||!t||!t.__esModule?es(n,"default",{value:t,enumerable:!0}):n,t)),Yp=t=>El(es({},"__esModule",{value:!0}),t);var st=he(ht=>{"use strict";ht.__esModule=!0;ht.extend=Fl;ht.indexOf=Xp;ht.escapeExpression=em;ht.isEmpty=tm;ht.createFrame=nm;ht.blockParams=rm;ht.appendContextPath=im;var Zp={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},Jp=/[&<>"'`=]/g,Qp=/[&<>"'`=]/;function $p(t){return Zp[t]}function Fl(t){for(var e=1;e<arguments.length;e++)for(var n in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],n)&&(t[n]=arguments[e][n]);return t}var co=Object.prototype.toString;ht.toString=co;var lo=function(e){return typeof e=="function"};lo(/x/)&&(ht.isFunction=lo=function(t){return typeof t=="function"&&co.call(t)==="[object Function]"});ht.isFunction=lo;var _l=Array.isArray||function(t){return t&&typeof t=="object"?co.call(t)==="[object Array]":!1};ht.isArray=_l;function Xp(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}function em(t){if(typeof t!="string"){if(t&&t.toHTML)return t.toHTML();if(t==null)return"";if(!t)return t+"";t=""+t}return Qp.test(t)?t.replace(Jp,$p):t}function tm(t){return!t&&t!==0?!0:!!(_l(t)&&t.length===0)}function nm(t){var e=Fl({},t);return e._parent=t,e}function rm(t,e){return t.path=e,t}function im(t,e){return(t?t+".":"")+e}});var wt=he((is,Sl)=>{"use strict";is.__esModule=!0;var fo=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];function ho(t,e){var n=e&&e.loc,r=void 0,i=void 0,o=void 0,u=void 0;n&&(r=n.start.line,i=n.end.line,o=n.start.column,u=n.end.column,t+=" - "+r+":"+o);for(var f=Error.prototype.constructor.call(this,t),d=0;d<fo.length;d++)this[fo[d]]=f[fo[d]];Error.captureStackTrace&&Error.captureStackTrace(this,ho);try{n&&(this.lineNumber=r,this.endLineNumber=i,Object.defineProperty?(Object.defineProperty(this,"column",{value:o,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:u,enumerable:!0})):(this.column=o,this.endColumn=u))}catch(p){}}ho.prototype=new Error;is.default=ho;Sl.exports=is.default});var xl=he((ss,kl)=>{"use strict";ss.__esModule=!0;var po=st();ss.default=function(t){t.registerHelper("blockHelperMissing",function(e,n){var r=n.inverse,i=n.fn;if(e===!0)return i(this);if(e===!1||e==null)return r(this);if(po.isArray(e))return e.length>0?(n.ids&&(n.ids=[n.name]),t.helpers.each(e,n)):r(this);if(n.data&&n.ids){var o=po.createFrame(n.data);o.contextPath=po.appendContextPath(n.data.contextPath,n.name),n={data:o}}return i(e,n)})};kl.exports=ss.default});var Tl=he((as,Ol)=>{"use strict";as.__esModule=!0;function sm(t){return t&&t.__esModule?t:{default:t}}var Qr=st(),am=wt(),om=sm(am);as.default=function(t){t.registerHelper("each",function(e,n){if(!n)throw new om.default("Must pass iterator to #each");var r=n.fn,i=n.inverse,o=0,u="",f=void 0,d=void 0;n.data&&n.ids&&(d=Qr.appendContextPath(n.data.contextPath,n.ids[0])+"."),Qr.isFunction(e)&&(e=e.call(this)),n.data&&(f=Qr.createFrame(n.data));function p(K,ue,ye){f&&(f.key=K,f.index=ue,f.first=ue===0,f.last=!!ye,d&&(f.contextPath=d+K)),u=u+r(e[K],{data:f,blockParams:Qr.blockParams([e[K],K],[d+K,null])})}if(e&&typeof e=="object")if(Qr.isArray(e))for(var E=e.length;o<E;o++)o in e&&p(o,o,o===e.length-1);else if(typeof Symbol=="function"&&e[Symbol.iterator]){for(var y=[],_=e[Symbol.iterator](),M=_.next();!M.done;M=_.next())y.push(M.value);e=y;for(var E=e.length;o<E;o++)p(o,o,o===e.length-1)}else(function(){var K=void 0;Object.keys(e).forEach(function(ue){K!==void 0&&p(K,o-1),K=ue,o++}),K!==void 0&&p(K,o-1,!0)})();return o===0&&(u=i(this)),u})};Ol.exports=as.default});var Al=he((os,Ml)=>{"use strict";os.__esModule=!0;function um(t){return t&&t.__esModule?t:{default:t}}var lm=wt(),cm=um(lm);os.default=function(t){t.registerHelper("helperMissing",function(){if(arguments.length!==1)throw new cm.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})};Ml.exports=os.default});var Bl=he((us,Nl)=>{"use strict";us.__esModule=!0;function fm(t){return t&&t.__esModule?t:{default:t}}var Il=st(),hm=wt(),Pl=fm(hm);us.default=function(t){t.registerHelper("if",function(e,n){if(arguments.length!=2)throw new Pl.default("#if requires exactly one argument");return Il.isFunction(e)&&(e=e.call(this)),!n.hash.includeZero&&!e||Il.isEmpty(e)?n.inverse(this):n.fn(this)}),t.registerHelper("unless",function(e,n){if(arguments.length!=2)throw new Pl.default("#unless requires exactly one argument");return t.helpers.if.call(this,e,{fn:n.inverse,inverse:n.fn,hash:n.hash})})};Nl.exports=us.default});var Rl=he((ls,Ll)=>{"use strict";ls.__esModule=!0;ls.default=function(t){t.registerHelper("log",function(){for(var e=[void 0],n=arguments[arguments.length-1],r=0;r<arguments.length-1;r++)e.push(arguments[r]);var i=1;n.hash.level!=null?i=n.hash.level:n.data&&n.data.level!=null&&(i=n.data.level),e[0]=i,t.log.apply(t,e)})};Ll.exports=ls.default});var Vl=he((cs,Hl)=>{"use strict";cs.__esModule=!0;cs.default=function(t){t.registerHelper("lookup",function(e,n,r){return e&&r.lookupProperty(e,n)})};Hl.exports=cs.default});var Kl=he((fs,Gl)=>{"use strict";fs.__esModule=!0;function dm(t){return t&&t.__esModule?t:{default:t}}var $r=st(),pm=wt(),mm=dm(pm);fs.default=function(t){t.registerHelper("with",function(e,n){if(arguments.length!=2)throw new mm.default("#with requires exactly one argument");$r.isFunction(e)&&(e=e.call(this));var r=n.fn;if($r.isEmpty(e))return n.inverse(this);var i=n.data;return n.data&&n.ids&&(i=$r.createFrame(n.data),i.contextPath=$r.appendContextPath(n.data.contextPath,n.ids[0])),r(e,{data:i,blockParams:$r.blockParams([e],[i&&i.contextPath])})})};Gl.exports=fs.default});var mo=he(hs=>{"use strict";hs.__esModule=!0;hs.registerDefaultHelpers=Tm;hs.moveHelperToHooks=Mm;function Vn(t){return t&&t.__esModule?t:{default:t}}var gm=xl(),ym=Vn(gm),vm=Tl(),Dm=Vn(vm),bm=Al(),wm=Vn(bm),Em=Bl(),Cm=Vn(Em),Fm=Rl(),_m=Vn(Fm),Sm=Vl(),km=Vn(Sm),xm=Kl(),Om=Vn(xm);function Tm(t){ym.default(t),Dm.default(t),wm.default(t),Cm.default(t),_m.default(t),km.default(t),Om.default(t)}function Mm(t,e,n){t.helpers[e]&&(t.hooks[e]=t.helpers[e],n||delete t.helpers[e])}});var jl=he((ds,ql)=>{"use strict";ds.__esModule=!0;var Am=st();ds.default=function(t){t.registerDecorator("inline",function(e,n,r,i){var o=e;return n.partials||(n.partials={},o=function(u,f){var d=r.partials;r.partials=Am.extend({},d,n.partials);var p=e(u,f);return r.partials=d,p}),n.partials[i.args[0]]=i.fn,o})};ql.exports=ds.default});var Ul=he(go=>{"use strict";go.__esModule=!0;go.registerDefaultDecorators=Bm;function Im(t){return t&&t.__esModule?t:{default:t}}var Pm=jl(),Nm=Im(Pm);function Bm(t){Nm.default(t)}});var yo=he((ps,Wl)=>{"use strict";ps.__esModule=!0;var Lm=st(),hr={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){if(typeof e=="string"){var n=Lm.indexOf(hr.methodMap,e.toLowerCase());n>=0?e=n:e=parseInt(e,10)}return e},log:function(e){if(e=hr.lookupLevel(e),typeof console!="undefined"&&hr.lookupLevel(hr.level)<=e){var n=hr.methodMap[e];console[n]||(n="log");for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];console[n].apply(console,i)}}};ps.default=hr;Wl.exports=ps.default});var zl=he(vo=>{"use strict";vo.__esModule=!0;vo.createNewLookupObject=Hm;var Rm=st();function Hm(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return Rm.extend.apply(void 0,[Object.create(null)].concat(e))}});var Do=he(Xr=>{"use strict";Xr.__esModule=!0;Xr.createProtoAccessControl=qm;Xr.resultIsAllowed=jm;Xr.resetLoggedProperties=Wm;function Vm(t){return t&&t.__esModule?t:{default:t}}var Yl=zl(),Gm=yo(),Km=Vm(Gm),ms=Object.create(null);function qm(t){var e=Object.create(null);e.constructor=!1,e.__defineGetter__=!1,e.__defineSetter__=!1,e.__lookupGetter__=!1;var n=Object.create(null);return n.__proto__=!1,{properties:{whitelist:Yl.createNewLookupObject(n,t.allowedProtoProperties),defaultValue:t.allowProtoPropertiesByDefault},methods:{whitelist:Yl.createNewLookupObject(e,t.allowedProtoMethods),defaultValue:t.allowProtoMethodsByDefault}}}function jm(t,e,n){return Zl(typeof t=="function"?e.methods:e.properties,n)}function Zl(t,e){return t.whitelist[e]!==void 0?t.whitelist[e]===!0:t.defaultValue!==void 0?t.defaultValue:(Um(e),!1)}function Um(t){ms[t]!==!0&&(ms[t]=!0,Km.default.log("error",'Handlebars: Access has been denied to resolve the property "'+t+`" because it is not an "own property" of its parent.
You can add a runtime option to disable the check or this warning:
See https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details`))}function Wm(){Object.keys(ms).forEach(function(t){delete ms[t]})}});var ys=he(Wt=>{"use strict";Wt.__esModule=!0;Wt.HandlebarsEnvironment=Eo;function Jl(t){return t&&t.__esModule?t:{default:t}}var Gn=st(),zm=wt(),bo=Jl(zm),Ym=mo(),Zm=Ul(),Jm=yo(),gs=Jl(Jm),Qm=Do(),$m="4.7.8";Wt.VERSION=$m;var Xm=8;Wt.COMPILER_REVISION=Xm;var eg=7;Wt.LAST_COMPATIBLE_COMPILER_REVISION=eg;var tg={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"};Wt.REVISION_CHANGES=tg;var wo="[object Object]";function Eo(t,e,n){this.helpers=t||{},this.partials=e||{},this.decorators=n||{},Ym.registerDefaultHelpers(this),Zm.registerDefaultDecorators(this)}Eo.prototype={constructor:Eo,logger:gs.default,log:gs.default.log,registerHelper:function(e,n){if(Gn.toString.call(e)===wo){if(n)throw new bo.default("Arg not supported with multiple helpers");Gn.extend(this.helpers,e)}else this.helpers[e]=n},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,n){if(Gn.toString.call(e)===wo)Gn.extend(this.partials,e);else{if(typeof n=="undefined")throw new bo.default('Attempting to register a partial called "'+e+'" as undefined');this.partials[e]=n}},unregisterPartial:function(e){delete this.partials[e]},registerDecorator:function(e,n){if(Gn.toString.call(e)===wo){if(n)throw new bo.default("Arg not supported with multiple decorators");Gn.extend(this.decorators,e)}else this.decorators[e]=n},unregisterDecorator:function(e){delete this.decorators[e]},resetLoggedPropertyAccesses:function(){Qm.resetLoggedProperties()}};var ng=gs.default.log;Wt.log=ng;Wt.createFrame=Gn.createFrame;Wt.logger=gs.default});var $l=he((vs,Ql)=>{"use strict";vs.__esModule=!0;function Co(t){this.string=t}Co.prototype.toString=Co.prototype.toHTML=function(){return""+this.string};vs.default=Co;Ql.exports=vs.default});var Xl=he(Fo=>{"use strict";Fo.__esModule=!0;Fo.wrapHelper=rg;function rg(t,e){if(typeof t!="function")return t;var n=function(){var i=arguments[arguments.length-1];return arguments[arguments.length-1]=e(i),t.apply(this,arguments)};return n}});var ic=he(_n=>{"use strict";_n.__esModule=!0;_n.checkRevision=lg;_n.template=cg;_n.wrapProgram=Ds;_n.resolvePartial=fg;_n.invokePartial=hg;_n.noop=nc;function ig(t){return t&&t.__esModule?t:{default:t}}function sg(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}var ag=st(),on=sg(ag),og=wt(),un=ig(og),ln=ys(),ec=mo(),ug=Xl(),tc=Do();function lg(t){var e=t&&t[0]||1,n=ln.COMPILER_REVISION;if(!(e>=ln.LAST_COMPATIBLE_COMPILER_REVISION&&e<=ln.COMPILER_REVISION))if(e<ln.LAST_COMPATIBLE_COMPILER_REVISION){var r=ln.REVISION_CHANGES[n],i=ln.REVISION_CHANGES[e];throw new un.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+r+") or downgrade your runtime to an older version ("+i+").")}else throw new un.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}function cg(t,e){if(!e)throw new un.default("No environment passed to template");if(!t||!t.main)throw new un.default("Unknown template object: "+typeof t);t.main.decorator=t.main_d,e.VM.checkRevision(t.compiler);var n=t.compiler&&t.compiler[0]===7;function r(u,f,d){d.hash&&(f=on.extend({},f,d.hash),d.ids&&(d.ids[0]=!0)),u=e.VM.resolvePartial.call(this,u,f,d);var p=on.extend({},d,{hooks:this.hooks,protoAccessControl:this.protoAccessControl}),E=e.VM.invokePartial.call(this,u,f,p);if(E==null&&e.compile&&(d.partials[d.name]=e.compile(u,t.compilerOptions,e),E=d.partials[d.name](f,p)),E!=null){if(d.indent){for(var y=E.split(`
`),_=0,M=y.length;_<M&&!(!y[_]&&_+1===M);_++)y[_]=d.indent+y[_];E=y.join(`
`)}return E}else throw new un.default("The partial "+d.name+" could not be compiled when running in runtime-only mode")}var i={strict:function(f,d,p){if(!f||!(d in f))throw new un.default('"'+d+'" not defined in '+f,{loc:p});return i.lookupProperty(f,d)},lookupProperty:function(f,d){var p=f[d];if(p==null||Object.prototype.hasOwnProperty.call(f,d)||tc.resultIsAllowed(p,i.protoAccessControl,d))return p},lookup:function(f,d){for(var p=f.length,E=0;E<p;E++){var y=f[E]&&i.lookupProperty(f[E],d);if(y!=null)return f[E][d]}},lambda:function(f,d){return typeof f=="function"?f.call(d):f},escapeExpression:on.escapeExpression,invokePartial:r,fn:function(f){var d=t[f];return d.decorator=t[f+"_d"],d},programs:[],program:function(f,d,p,E,y){var _=this.programs[f],M=this.fn(f);return d||y||E||p?_=Ds(this,f,M,d,p,E,y):_||(_=this.programs[f]=Ds(this,f,M)),_},data:function(f,d){for(;f&&d--;)f=f._parent;return f},mergeIfNeeded:function(f,d){var p=f||d;return f&&d&&f!==d&&(p=on.extend({},d,f)),p},nullContext:Object.seal({}),noop:e.VM.noop,compilerInfo:t.compiler};function o(u){var f=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],d=f.data;o._setup(f),!f.partial&&t.useData&&(d=dg(u,d));var p=void 0,E=t.useBlockParams?[]:void 0;t.useDepths&&(f.depths?p=u!=f.depths[0]?[u].concat(f.depths):f.depths:p=[u]);function y(_){return""+t.main(i,_,i.helpers,i.partials,d,E,p)}return y=rc(t.main,y,i,f.depths||[],d,E),y(u,f)}return o.isTop=!0,o._setup=function(u){if(u.partial)i.protoAccessControl=u.protoAccessControl,i.helpers=u.helpers,i.partials=u.partials,i.decorators=u.decorators,i.hooks=u.hooks;else{var f=on.extend({},e.helpers,u.helpers);pg(f,i),i.helpers=f,t.usePartial&&(i.partials=i.mergeIfNeeded(u.partials,e.partials)),(t.usePartial||t.useDecorators)&&(i.decorators=on.extend({},e.decorators,u.decorators)),i.hooks={},i.protoAccessControl=tc.createProtoAccessControl(u);var d=u.allowCallsToHelperMissing||n;ec.moveHelperToHooks(i,"helperMissing",d),ec.moveHelperToHooks(i,"blockHelperMissing",d)}},o._child=function(u,f,d,p){if(t.useBlockParams&&!d)throw new un.default("must pass block params");if(t.useDepths&&!p)throw new un.default("must pass parent depths");return Ds(i,u,t[u],f,0,d,p)},o}function Ds(t,e,n,r,i,o,u){function f(d){var p=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],E=u;return u&&d!=u[0]&&!(d===t.nullContext&&u[0]===null)&&(E=[d].concat(u)),n(t,d,t.helpers,t.partials,p.data||r,o&&[p.blockParams].concat(o),E)}return f=rc(n,f,t,u,r,o),f.program=e,f.depth=u?u.length:0,f.blockParams=i||0,f}function fg(t,e,n){return t?!t.call&&!n.name&&(n.name=t,t=n.partials[t]):n.name==="@partial-block"?t=n.data["partial-block"]:t=n.partials[n.name],t}function hg(t,e,n){var r=n.data&&n.data["partial-block"];n.partial=!0,n.ids&&(n.data.contextPath=n.ids[0]||n.data.contextPath);var i=void 0;if(n.fn&&n.fn!==nc&&function(){n.data=ln.createFrame(n.data);var o=n.fn;i=n.data["partial-block"]=function(f){var d=arguments.length<=1||arguments[1]===void 0?{}:arguments[1];return d.data=ln.createFrame(d.data),d.data["partial-block"]=r,o(f,d)},o.partials&&(n.partials=on.extend({},n.partials,o.partials))}(),t===void 0&&i&&(t=i),t===void 0)throw new un.default("The partial "+n.name+" could not be found");if(t instanceof Function)return t(e,n)}function nc(){return""}function dg(t,e){return(!e||!("root"in e))&&(e=e?ln.createFrame(e):{},e.root=t),e}function rc(t,e,n,r,i,o){if(t.decorator){var u={};e=t.decorator(e,u,n,r&&r[0],i,o,r),on.extend(e,u)}return e}function pg(t,e){Object.keys(t).forEach(function(n){var r=t[n];t[n]=mg(r,e)})}function mg(t,e){var n=e.lookupProperty;return ug.wrapHelper(t,function(r){return on.extend({lookupProperty:n},r)})}});var _o=he((bs,sc)=>{"use strict";bs.__esModule=!0;bs.default=function(t){(function(){typeof globalThis!="object"&&(Object.prototype.__defineGetter__("__magic__",function(){return this}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__)})();var e=globalThis.Handlebars;t.noConflict=function(){return globalThis.Handlebars===t&&(globalThis.Handlebars=e),t}};sc.exports=bs.default});var cc=he((ws,lc)=>{"use strict";ws.__esModule=!0;function ko(t){return t&&t.__esModule?t:{default:t}}function xo(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}var gg=ys(),ac=xo(gg),yg=$l(),vg=ko(yg),Dg=wt(),bg=ko(Dg),wg=st(),So=xo(wg),Eg=ic(),oc=xo(Eg),Cg=_o(),Fg=ko(Cg);function uc(){var t=new ac.HandlebarsEnvironment;return So.extend(t,ac),t.SafeString=vg.default,t.Exception=bg.default,t.Utils=So,t.escapeExpression=So.escapeExpression,t.VM=oc,t.template=function(e){return oc.template(e,t)},t}var ei=uc();ei.create=uc;Fg.default(ei);ei.default=ei;ws.default=ei;lc.exports=ws.default});var Oo=he((Es,hc)=>{"use strict";Es.__esModule=!0;var fc={helpers:{helperExpression:function(e){return e.type==="SubExpression"||(e.type==="MustacheStatement"||e.type==="BlockStatement")&&!!(e.params&&e.params.length||e.hash)},scopedId:function(e){return/^\.|this\b/.test(e.original)},simpleId:function(e){return e.parts.length===1&&!fc.helpers.scopedId(e)&&!e.depth}}};Es.default=fc;hc.exports=Es.default});var pc=he((Cs,dc)=>{"use strict";Cs.__esModule=!0;var _g=function(){var t={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,0],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(i,o,u,f,d,p,E){var y=p.length-1;switch(d){case 1:return p[y-1];case 2:this.$=f.prepareProgram(p[y]);break;case 3:this.$=p[y];break;case 4:this.$=p[y];break;case 5:this.$=p[y];break;case 6:this.$=p[y];break;case 7:this.$=p[y];break;case 8:this.$=p[y];break;case 9:this.$={type:"CommentStatement",value:f.stripComment(p[y]),strip:f.stripFlags(p[y],p[y]),loc:f.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:p[y],value:p[y],loc:f.locInfo(this._$)};break;case 11:this.$=f.prepareRawBlock(p[y-2],p[y-1],p[y],this._$);break;case 12:this.$={path:p[y-3],params:p[y-2],hash:p[y-1]};break;case 13:this.$=f.prepareBlock(p[y-3],p[y-2],p[y-1],p[y],!1,this._$);break;case 14:this.$=f.prepareBlock(p[y-3],p[y-2],p[y-1],p[y],!0,this._$);break;case 15:this.$={open:p[y-5],path:p[y-4],params:p[y-3],hash:p[y-2],blockParams:p[y-1],strip:f.stripFlags(p[y-5],p[y])};break;case 16:this.$={path:p[y-4],params:p[y-3],hash:p[y-2],blockParams:p[y-1],strip:f.stripFlags(p[y-5],p[y])};break;case 17:this.$={path:p[y-4],params:p[y-3],hash:p[y-2],blockParams:p[y-1],strip:f.stripFlags(p[y-5],p[y])};break;case 18:this.$={strip:f.stripFlags(p[y-1],p[y-1]),program:p[y]};break;case 19:var _=f.prepareBlock(p[y-2],p[y-1],p[y],p[y],!1,this._$),M=f.prepareProgram([_],p[y-1].loc);M.chained=!0,this.$={strip:p[y-2].strip,program:M,chain:!0};break;case 20:this.$=p[y];break;case 21:this.$={path:p[y-1],strip:f.stripFlags(p[y-2],p[y])};break;case 22:this.$=f.prepareMustache(p[y-3],p[y-2],p[y-1],p[y-4],f.stripFlags(p[y-4],p[y]),this._$);break;case 23:this.$=f.prepareMustache(p[y-3],p[y-2],p[y-1],p[y-4],f.stripFlags(p[y-4],p[y]),this._$);break;case 24:this.$={type:"PartialStatement",name:p[y-3],params:p[y-2],hash:p[y-1],indent:"",strip:f.stripFlags(p[y-4],p[y]),loc:f.locInfo(this._$)};break;case 25:this.$=f.preparePartialBlock(p[y-2],p[y-1],p[y],this._$);break;case 26:this.$={path:p[y-3],params:p[y-2],hash:p[y-1],strip:f.stripFlags(p[y-4],p[y])};break;case 27:this.$=p[y];break;case 28:this.$=p[y];break;case 29:this.$={type:"SubExpression",path:p[y-3],params:p[y-2],hash:p[y-1],loc:f.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:p[y],loc:f.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:f.id(p[y-2]),value:p[y],loc:f.locInfo(this._$)};break;case 32:this.$=f.id(p[y-1]);break;case 33:this.$=p[y];break;case 34:this.$=p[y];break;case 35:this.$={type:"StringLiteral",value:p[y],original:p[y],loc:f.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(p[y]),original:Number(p[y]),loc:f.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:p[y]==="true",original:p[y]==="true",loc:f.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:f.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:f.locInfo(this._$)};break;case 40:this.$=p[y];break;case 41:this.$=p[y];break;case 42:this.$=f.preparePath(!0,p[y],this._$);break;case 43:this.$=f.preparePath(!1,p[y],this._$);break;case 44:p[y-2].push({part:f.id(p[y]),original:p[y],separator:p[y-1]}),this.$=p[y-2];break;case 45:this.$=[{part:f.id(p[y]),original:p[y]}];break;case 46:this.$=[];break;case 47:p[y-1].push(p[y]);break;case 48:this.$=[];break;case 49:p[y-1].push(p[y]);break;case 50:this.$=[];break;case 51:p[y-1].push(p[y]);break;case 58:this.$=[];break;case 59:p[y-1].push(p[y]);break;case 64:this.$=[];break;case 65:p[y-1].push(p[y]);break;case 70:this.$=[];break;case 71:p[y-1].push(p[y]);break;case 78:this.$=[];break;case 79:p[y-1].push(p[y]);break;case 82:this.$=[];break;case 83:p[y-1].push(p[y]);break;case 86:this.$=[];break;case 87:p[y-1].push(p[y]);break;case 90:this.$=[];break;case 91:p[y-1].push(p[y]);break;case 94:this.$=[];break;case 95:p[y-1].push(p[y]);break;case 98:this.$=[p[y]];break;case 99:p[y-1].push(p[y]);break;case 100:this.$=[p[y]];break;case 101:p[y-1].push(p[y]);break}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{15:[2,48],17:39,18:[2,48]},{20:41,56:40,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:44,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:45,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:41,56:48,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:49,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,50]},{72:[1,35],86:51},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:52,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:53,38:55,39:[1,57],43:56,44:[1,58],45:54,47:[2,54]},{28:59,43:60,44:[1,58],47:[2,56]},{13:62,15:[1,20],18:[1,61]},{33:[2,86],57:63,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:64,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:65,47:[1,66]},{30:67,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:68,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:69,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:70,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:74,33:[2,80],50:71,63:72,64:75,65:[1,43],69:73,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,79]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,50]},{20:74,53:80,54:[2,84],63:81,64:75,65:[1,43],69:82,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:83,47:[1,66]},{47:[2,55]},{4:84,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:85,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:86,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:87,47:[1,66]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:74,33:[2,88],58:88,63:89,64:75,65:[1,43],69:90,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:91,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:92,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,31:93,33:[2,60],63:94,64:75,65:[1,43],69:95,70:76,71:77,72:[1,78],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,66],36:96,63:97,64:75,65:[1,43],69:98,70:76,71:77,72:[1,78],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,22:99,23:[2,52],63:100,64:75,65:[1,43],69:101,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,92],62:102,63:103,64:75,65:[1,43],69:104,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,105]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:106,72:[1,107],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,108],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,109]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:55,39:[1,57],43:56,44:[1,58],45:111,46:110,47:[2,76]},{33:[2,70],40:112,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,113]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:74,63:115,64:75,65:[1,43],67:114,68:[2,96],69:116,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,117]},{32:118,33:[2,62],74:119,75:[1,120]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:121,74:122,75:[1,120]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,123]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,124]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,108]},{20:74,63:125,64:75,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:74,33:[2,72],41:126,63:127,64:75,65:[1,43],69:128,70:76,71:77,72:[1,78],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,129]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,130]},{33:[2,63]},{72:[1,132],76:131},{33:[1,133]},{33:[2,69]},{15:[2,12],18:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:134,74:135,75:[1,120]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,137],77:[1,136]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,138]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],54:[2,55],56:[2,20],60:[2,57],73:[2,81],82:[2,85],86:[2,18],90:[2,89],101:[2,53],104:[2,93],110:[2,19],111:[2,77],116:[2,97],119:[2,63],122:[2,69],135:[2,75],136:[2,32]},parseError:function(i,o){throw new Error(i)},parse:function(i){var o=this,u=[0],f=[null],d=[],p=this.table,E="",y=0,_=0,M=0,K=2,ue=1;this.lexer.setInput(i),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,typeof this.lexer.yylloc=="undefined"&&(this.lexer.yylloc={});var ye=this.lexer.yylloc;d.push(ye);var ve=this.lexer.options&&this.lexer.options.ranges;typeof this.yy.parseError=="function"&&(this.parseError=this.yy.parseError);function Te(Me){u.length=u.length-2*Me,f.length=f.length-Me,d.length=d.length-Me}function Ve(){var Me;return Me=o.lexer.lex()||1,typeof Me!="number"&&(Me=o.symbols_[Me]||Me),Me}for(var R,ae,we,J,ce,fe,Ce={},Je,Se,gt,We;;){if(we=u[u.length-1],this.defaultActions[we]?J=this.defaultActions[we]:((R===null||typeof R=="undefined")&&(R=Ve()),J=p[we]&&p[we][R]),typeof J=="undefined"||!J.length||!J[0]){var ze="";if(!M){We=[];for(Je in p[we])this.terminals_[Je]&&Je>2&&We.push("'"+this.terminals_[Je]+"'");this.lexer.showPosition?ze="Parse error on line "+(y+1)+`:
`+this.lexer.showPosition()+`
Expecting `+We.join(", ")+", got '"+(this.terminals_[R]||R)+"'":ze="Parse error on line "+(y+1)+": Unexpected "+(R==1?"end of input":"'"+(this.terminals_[R]||R)+"'"),this.parseError(ze,{text:this.lexer.match,token:this.terminals_[R]||R,line:this.lexer.yylineno,loc:ye,expected:We})}}if(J[0]instanceof Array&&J.length>1)throw new Error("Parse Error: multiple actions possible at state: "+we+", token: "+R);switch(J[0]){case 1:u.push(R),f.push(this.lexer.yytext),d.push(this.lexer.yylloc),u.push(J[1]),R=null,ae?(R=ae,ae=null):(_=this.lexer.yyleng,E=this.lexer.yytext,y=this.lexer.yylineno,ye=this.lexer.yylloc,M>0&&M--);break;case 2:if(Se=this.productions_[J[1]][1],Ce.$=f[f.length-Se],Ce._$={first_line:d[d.length-(Se||1)].first_line,last_line:d[d.length-1].last_line,first_column:d[d.length-(Se||1)].first_column,last_column:d[d.length-1].last_column},ve&&(Ce._$.range=[d[d.length-(Se||1)].range[0],d[d.length-1].range[1]]),fe=this.performAction.call(Ce,E,_,y,this.yy,J[1],f,d),typeof fe!="undefined")return fe;Se&&(u=u.slice(0,-1*Se*2),f=f.slice(0,-1*Se),d=d.slice(0,-1*Se)),u.push(this.productions_[J[1]][0]),f.push(Ce.$),d.push(Ce._$),gt=p[u[u.length-2]][u[u.length-1]],u.push(gt);break;case 3:return!0}}return!0}},e=function(){var r={EOF:1,parseError:function(o,u){if(this.yy.parser)this.yy.parser.parseError(o,u);else throw new Error(o)},setInput:function(o){return this._input=o,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var o=this._input[0];this.yytext+=o,this.yyleng++,this.offset++,this.match+=o,this.matched+=o;var u=o.match(/(?:\r\n?|\n).*/g);return u?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),o},unput:function(o){var u=o.length,f=o.split(/(?:\r\n?|\n)/g);this._input=o+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-u-1),this.offset-=u;var d=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),f.length-1&&(this.yylineno-=f.length-1);var p=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:f?(f.length===d.length?this.yylloc.first_column:0)+d[d.length-f.length].length-f[0].length:this.yylloc.first_column-u},this.options.ranges&&(this.yylloc.range=[p[0],p[0]+this.yyleng-u]),this},more:function(){return this._more=!0,this},less:function(o){this.unput(this.match.slice(o))},pastInput:function(){var o=this.matched.substr(0,this.matched.length-this.match.length);return(o.length>20?"...":"")+o.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var o=this.match;return o.length<20&&(o+=this._input.substr(0,20-o.length)),(o.substr(0,20)+(o.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var o=this.pastInput(),u=new Array(o.length+1).join("-");return o+this.upcomingInput()+`
`+u+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var o,u,f,d,p,E;this._more||(this.yytext="",this.match="");for(var y=this._currentRules(),_=0;_<y.length&&(f=this._input.match(this.rules[y[_]]),!(f&&(!u||f[0].length>u[0].length)&&(u=f,d=_,!this.options.flex)));_++);return u?(E=u[0].match(/(?:\r\n?|\n).*/g),E&&(this.yylineno+=E.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:E?E[E.length-1].length-E[E.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+u[0].length},this.yytext+=u[0],this.match+=u[0],this.matches=u,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(u[0].length),this.matched+=u[0],o=this.performAction.call(this,this.yy,this,y[d],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),o||void 0):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var o=this.next();return typeof o!="undefined"?o:this.lex()},begin:function(o){this.conditionStack.push(o)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(o){this.begin(o)}};return r.options={},r.performAction=function(o,u,f,d){function p(y,_){return u.yytext=u.yytext.substring(y,u.yyleng-_+y)}var E=d;switch(f){case 0:if(u.yytext.slice(-2)==="\\\\"?(p(0,1),this.begin("mu")):u.yytext.slice(-1)==="\\"?(p(0,1),this.begin("emu")):this.begin("mu"),u.yytext)return 15;break;case 1:return 15;case 2:return this.popState(),15;break;case 3:return this.begin("raw"),15;break;case 4:return this.popState(),this.conditionStack[this.conditionStack.length-1]==="raw"?15:(p(5,9),"END_RAW_BLOCK");case 5:return 15;case 6:return this.popState(),14;break;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;break;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:return this.popState(),44;break;case 16:return this.popState(),44;break;case 17:return 34;case 18:return 39;case 19:return 51;case 20:return 48;case 21:this.unput(u.yytext),this.popState(),this.begin("com");break;case 22:return this.popState(),14;break;case 23:return 48;case 24:return 73;case 25:return 72;case 26:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;break;case 30:return this.popState(),33;break;case 31:return u.yytext=p(1,2).replace(/\\"/g,'"'),80;break;case 32:return u.yytext=p(1,2).replace(/\\'/g,"'"),80;break;case 33:return 85;case 34:return 82;case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 41:return 72;case 42:return u.yytext=u.yytext.replace(/\\([\\\]])/g,"$1"),72;break;case 43:return"INVALID";case 44:return 5}},r.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]+?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],r.conditions={mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}},r}();t.lexer=e;function n(){this.yy={}}return n.prototype=t,t.Parser=n,new n}();Cs.default=_g;dc.exports=Cs.default});var Mo=he((Ss,yc)=>{"use strict";Ss.__esModule=!0;function Sg(t){return t&&t.__esModule?t:{default:t}}var kg=wt(),To=Sg(kg);function Fs(){this.parents=[]}Fs.prototype={constructor:Fs,mutating:!1,acceptKey:function(e,n){var r=this.accept(e[n]);if(this.mutating){if(r&&!Fs.prototype[r.type])throw new To.default('Unexpected node type "'+r.type+'" found when accepting '+n+" on "+e.type);e[n]=r}},acceptRequired:function(e,n){if(this.acceptKey(e,n),!e[n])throw new To.default(e.type+" requires "+n)},acceptArray:function(e){for(var n=0,r=e.length;n<r;n++)this.acceptKey(e,n),e[n]||(e.splice(n,1),n--,r--)},accept:function(e){if(e){if(!this[e.type])throw new To.default("Unknown type: "+e.type,e);this.current&&this.parents.unshift(this.current),this.current=e;var n=this[e.type](e);if(this.current=this.parents.shift(),!this.mutating||n)return n;if(n!==!1)return e}},Program:function(e){this.acceptArray(e.body)},MustacheStatement:_s,Decorator:_s,BlockStatement:mc,DecoratorBlock:mc,PartialStatement:gc,PartialBlockStatement:function(e){gc.call(this,e),this.acceptKey(e,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:_s,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(e){this.acceptArray(e.pairs)},HashPair:function(e){this.acceptRequired(e,"value")}};function _s(t){this.acceptRequired(t,"path"),this.acceptArray(t.params),this.acceptKey(t,"hash")}function mc(t){_s.call(this,t),this.acceptKey(t,"program"),this.acceptKey(t,"inverse")}function gc(t){this.acceptRequired(t,"name"),this.acceptArray(t.params),this.acceptKey(t,"hash")}Ss.default=Fs;yc.exports=Ss.default});var Dc=he((ks,vc)=>{"use strict";ks.__esModule=!0;function xg(t){return t&&t.__esModule?t:{default:t}}var Og=Mo(),Tg=xg(Og);function zt(){var t=arguments.length<=0||arguments[0]===void 0?{}:arguments[0];this.options=t}zt.prototype=new Tg.default;zt.prototype.Program=function(t){var e=!this.options.ignoreStandalone,n=!this.isRootSeen;this.isRootSeen=!0;for(var r=t.body,i=0,o=r.length;i<o;i++){var u=r[i],f=this.accept(u);if(f){var d=Ao(r,i,n),p=Io(r,i,n),E=f.openStandalone&&d,y=f.closeStandalone&&p,_=f.inlineStandalone&&d&&p;f.close&&Kn(r,i,!0),f.open&&Sn(r,i,!0),e&&_&&(Kn(r,i),Sn(r,i)&&u.type==="PartialStatement"&&(u.indent=/([ \t]+$)/.exec(r[i-1].original)[1])),e&&E&&(Kn((u.program||u.inverse).body),Sn(r,i)),e&&y&&(Kn(r,i),Sn((u.inverse||u.program).body))}}return t};zt.prototype.BlockStatement=zt.prototype.DecoratorBlock=zt.prototype.PartialBlockStatement=function(t){this.accept(t.program),this.accept(t.inverse);var e=t.program||t.inverse,n=t.program&&t.inverse,r=n,i=n;if(n&&n.chained)for(r=n.body[0].program;i.chained;)i=i.body[i.body.length-1].program;var o={open:t.openStrip.open,close:t.closeStrip.close,openStandalone:Io(e.body),closeStandalone:Ao((r||e).body)};if(t.openStrip.close&&Kn(e.body,null,!0),n){var u=t.inverseStrip;u.open&&Sn(e.body,null,!0),u.close&&Kn(r.body,null,!0),t.closeStrip.open&&Sn(i.body,null,!0),!this.options.ignoreStandalone&&Ao(e.body)&&Io(r.body)&&(Sn(e.body),Kn(r.body))}else t.closeStrip.open&&Sn(e.body,null,!0);return o};zt.prototype.Decorator=zt.prototype.MustacheStatement=function(t){return t.strip};zt.prototype.PartialStatement=zt.prototype.CommentStatement=function(t){var e=t.strip||{};return{inlineStandalone:!0,open:e.open,close:e.close}};function Ao(t,e,n){e===void 0&&(e=t.length);var r=t[e-1],i=t[e-2];if(!r)return n;if(r.type==="ContentStatement")return(i||!n?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(r.original)}function Io(t,e,n){e===void 0&&(e=-1);var r=t[e+1],i=t[e+2];if(!r)return n;if(r.type==="ContentStatement")return(i||!n?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(r.original)}function Kn(t,e,n){var r=t[e==null?0:e+1];if(!(!r||r.type!=="ContentStatement"||!n&&r.rightStripped)){var i=r.value;r.value=r.value.replace(n?/^\s+/:/^[ \t]*\r?\n?/,""),r.rightStripped=r.value!==i}}function Sn(t,e,n){var r=t[e==null?t.length-1:e-1];if(!(!r||r.type!=="ContentStatement"||!n&&r.leftStripped)){var i=r.value;return r.value=r.value.replace(n?/\s+$/:/[ \t]+$/,""),r.leftStripped=r.value!==i,r.leftStripped}}ks.default=zt;vc.exports=ks.default});var bc=he(Et=>{"use strict";Et.__esModule=!0;Et.SourceLocation=Ig;Et.id=Pg;Et.stripFlags=Ng;Et.stripComment=Bg;Et.preparePath=Lg;Et.prepareMustache=Rg;Et.prepareRawBlock=Hg;Et.prepareBlock=Vg;Et.prepareProgram=Gg;Et.preparePartialBlock=Kg;function Mg(t){return t&&t.__esModule?t:{default:t}}var Ag=wt(),Po=Mg(Ag);function No(t,e){if(e=e.path?e.path.original:e,t.path.original!==e){var n={loc:t.path.loc};throw new Po.default(t.path.original+" doesn't match "+e,n)}}function Ig(t,e){this.source=t,this.start={line:e.first_line,column:e.first_column},this.end={line:e.last_line,column:e.last_column}}function Pg(t){return/^\[.*\]$/.test(t)?t.substring(1,t.length-1):t}function Ng(t,e){return{open:t.charAt(2)==="~",close:e.charAt(e.length-3)==="~"}}function Bg(t){return t.replace(/^\{\{~?!-?-?/,"").replace(/-?-?~?\}\}$/,"")}function Lg(t,e,n){n=this.locInfo(n);for(var r=t?"@":"",i=[],o=0,u=0,f=e.length;u<f;u++){var d=e[u].part,p=e[u].original!==d;if(r+=(e[u].separator||"")+d,!p&&(d===".."||d==="."||d==="this")){if(i.length>0)throw new Po.default("Invalid path: "+r,{loc:n});d===".."&&o++}else i.push(d)}return{type:"PathExpression",data:t,depth:o,parts:i,original:r,loc:n}}function Rg(t,e,n,r,i,o){var u=r.charAt(3)||r.charAt(2),f=u!=="{"&&u!=="&",d=/\*/.test(r);return{type:d?"Decorator":"MustacheStatement",path:t,params:e,hash:n,escaped:f,strip:i,loc:this.locInfo(o)}}function Hg(t,e,n,r){No(t,n),r=this.locInfo(r);var i={type:"Program",body:e,strip:{},loc:r};return{type:"BlockStatement",path:t.path,params:t.params,hash:t.hash,program:i,openStrip:{},inverseStrip:{},closeStrip:{},loc:r}}function Vg(t,e,n,r,i,o){r&&r.path&&No(t,r);var u=/\*/.test(t.open);e.blockParams=t.blockParams;var f=void 0,d=void 0;if(n){if(u)throw new Po.default("Unexpected inverse block on decorator",n);n.chain&&(n.program.body[0].closeStrip=r.strip),d=n.strip,f=n.program}return i&&(i=f,f=e,e=i),{type:u?"DecoratorBlock":"BlockStatement",path:t.path,params:t.params,hash:t.hash,program:e,inverse:f,openStrip:t.strip,inverseStrip:d,closeStrip:r&&r.strip,loc:this.locInfo(o)}}function Gg(t,e){if(!e&&t.length){var n=t[0].loc,r=t[t.length-1].loc;n&&r&&(e={source:n.source,start:{line:n.start.line,column:n.start.column},end:{line:r.end.line,column:r.end.column}})}return{type:"Program",body:t,strip:{},loc:e}}function Kg(t,e,n,r){return No(t,n),{type:"PartialBlockStatement",name:t.path,params:t.params,hash:t.hash,program:e,openStrip:t.strip,closeStrip:n&&n.strip,loc:this.locInfo(r)}}});var Cc=he(ti=>{"use strict";ti.__esModule=!0;ti.parseWithoutProcessing=Ec;ti.parse=Jg;function qg(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function wc(t){return t&&t.__esModule?t:{default:t}}var jg=pc(),Bo=wc(jg),Ug=Dc(),Wg=wc(Ug),zg=bc(),Yg=qg(zg),Zg=st();ti.parser=Bo.default;var xs={};Zg.extend(xs,Yg);function Ec(t,e){if(t.type==="Program")return t;Bo.default.yy=xs,xs.locInfo=function(r){return new xs.SourceLocation(e&&e.srcName,r)};var n=Bo.default.parse(t);return n}function Jg(t,e){var n=Ec(t,e),r=new Wg.default(e);return r.accept(n)}});var kc=he(si=>{"use strict";si.__esModule=!0;si.Compiler=Lo;si.precompile=ey;si.compile=ty;function _c(t){return t&&t.__esModule?t:{default:t}}var Qg=wt(),ri=_c(Qg),ii=st(),$g=Oo(),ni=_c($g),Xg=[].slice;function Lo(){}Lo.prototype={compiler:Lo,equals:function(e){var n=this.opcodes.length;if(e.opcodes.length!==n)return!1;for(var r=0;r<n;r++){var i=this.opcodes[r],o=e.opcodes[r];if(i.opcode!==o.opcode||!Sc(i.args,o.args))return!1}n=this.children.length;for(var r=0;r<n;r++)if(!this.children[r].equals(e.children[r]))return!1;return!0},guid:0,compile:function(e,n){return this.sourceNode=[],this.opcodes=[],this.children=[],this.options=n,this.stringParams=n.stringParams,this.trackIds=n.trackIds,n.blockParams=n.blockParams||[],n.knownHelpers=ii.extend(Object.create(null),{helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0,lookup:!0},n.knownHelpers),this.accept(e)},compileProgram:function(e){var n=new this.compiler,r=n.compile(e,this.options),i=this.guid++;return this.usePartial=this.usePartial||r.usePartial,this.children[i]=r,this.useDepths=this.useDepths||r.useDepths,i},accept:function(e){if(!this[e.type])throw new ri.default("Unknown type: "+e.type,e);this.sourceNode.unshift(e);var n=this[e.type](e);return this.sourceNode.shift(),n},Program:function(e){this.options.blockParams.unshift(e.blockParams);for(var n=e.body,r=n.length,i=0;i<r;i++)this.accept(n[i]);return this.options.blockParams.shift(),this.isSimple=r===1,this.blockParams=e.blockParams?e.blockParams.length:0,this},BlockStatement:function(e){Fc(e);var n=e.program,r=e.inverse;n=n&&this.compileProgram(n),r=r&&this.compileProgram(r);var i=this.classifySexpr(e);i==="helper"?this.helperSexpr(e,n,r):i==="simple"?(this.simpleSexpr(e),this.opcode("pushProgram",n),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("blockValue",e.path.original)):(this.ambiguousSexpr(e,n,r),this.opcode("pushProgram",n),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(e){var n=e.program&&this.compileProgram(e.program),r=this.setupFullMustacheParams(e,n,void 0),i=e.path;this.useDecorators=!0,this.opcode("registerDecorator",r.length,i.original)},PartialStatement:function(e){this.usePartial=!0;var n=e.program;n&&(n=this.compileProgram(e.program));var r=e.params;if(r.length>1)throw new ri.default("Unsupported number of partial arguments: "+r.length,e);r.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):r.push({type:"PathExpression",parts:[],depth:0}));var i=e.name.original,o=e.name.type==="SubExpression";o&&this.accept(e.name),this.setupFullMustacheParams(e,n,void 0,!0);var u=e.indent||"";this.options.preventIndent&&u&&(this.opcode("appendContent",u),u=""),this.opcode("invokePartial",o,i,u),this.opcode("append")},PartialBlockStatement:function(e){this.PartialStatement(e)},MustacheStatement:function(e){this.SubExpression(e),e.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(e){this.DecoratorBlock(e)},ContentStatement:function(e){e.value&&this.opcode("appendContent",e.value)},CommentStatement:function(){},SubExpression:function(e){Fc(e);var n=this.classifySexpr(e);n==="simple"?this.simpleSexpr(e):n==="helper"?this.helperSexpr(e):this.ambiguousSexpr(e)},ambiguousSexpr:function(e,n,r){var i=e.path,o=i.parts[0],u=n!=null||r!=null;this.opcode("getContext",i.depth),this.opcode("pushProgram",n),this.opcode("pushProgram",r),i.strict=!0,this.accept(i),this.opcode("invokeAmbiguous",o,u)},simpleSexpr:function(e){var n=e.path;n.strict=!0,this.accept(n),this.opcode("resolvePossibleLambda")},helperSexpr:function(e,n,r){var i=this.setupFullMustacheParams(e,n,r),o=e.path,u=o.parts[0];if(this.options.knownHelpers[u])this.opcode("invokeKnownHelper",i.length,u);else{if(this.options.knownHelpersOnly)throw new ri.default("You specified knownHelpersOnly, but used the unknown helper "+u,e);o.strict=!0,o.falsy=!0,this.accept(o),this.opcode("invokeHelper",i.length,o.original,ni.default.helpers.simpleId(o))}},PathExpression:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var n=e.parts[0],r=ni.default.helpers.scopedId(e),i=!e.depth&&!r&&this.blockParamIndex(n);i?this.opcode("lookupBlockParam",i,e.parts):n?e.data?(this.options.data=!0,this.opcode("lookupData",e.depth,e.parts,e.strict)):this.opcode("lookupOnContext",e.parts,e.falsy,e.strict,r):this.opcode("pushContext")},StringLiteral:function(e){this.opcode("pushString",e.value)},NumberLiteral:function(e){this.opcode("pushLiteral",e.value)},BooleanLiteral:function(e){this.opcode("pushLiteral",e.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(e){var n=e.pairs,r=0,i=n.length;for(this.opcode("pushHash");r<i;r++)this.pushParam(n[r].value);for(;r--;)this.opcode("assignToHash",n[r].key);this.opcode("popHash")},opcode:function(e){this.opcodes.push({opcode:e,args:Xg.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(e){e&&(this.useDepths=!0)},classifySexpr:function(e){var n=ni.default.helpers.simpleId(e.path),r=n&&!!this.blockParamIndex(e.path.parts[0]),i=!r&&ni.default.helpers.helperExpression(e),o=!r&&(i||n);if(o&&!i){var u=e.path.parts[0],f=this.options;f.knownHelpers[u]?i=!0:f.knownHelpersOnly&&(o=!1)}return i?"helper":o?"ambiguous":"simple"},pushParams:function(e){for(var n=0,r=e.length;n<r;n++)this.pushParam(e[n])},pushParam:function(e){var n=e.value!=null?e.value:e.original||"";if(this.stringParams)n.replace&&(n=n.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",n,e.type),e.type==="SubExpression"&&this.accept(e);else{if(this.trackIds){var r=void 0;if(e.parts&&!ni.default.helpers.scopedId(e)&&!e.depth&&(r=this.blockParamIndex(e.parts[0])),r){var i=e.parts.slice(1).join(".");this.opcode("pushId","BlockParam",r,i)}else n=e.original||n,n.replace&&(n=n.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",e.type,n)}this.accept(e)}},setupFullMustacheParams:function(e,n,r,i){var o=e.params;return this.pushParams(o),this.opcode("pushProgram",n),this.opcode("pushProgram",r),e.hash?this.accept(e.hash):this.opcode("emptyHash",i),o},blockParamIndex:function(e){for(var n=0,r=this.options.blockParams.length;n<r;n++){var i=this.options.blockParams[n],o=i&&ii.indexOf(i,e);if(i&&o>=0)return[n,o]}}};function ey(t,e,n){if(t==null||typeof t!="string"&&t.type!=="Program")throw new ri.default("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+t);e=e||{},"data"in e||(e.data=!0),e.compat&&(e.useDepths=!0);var r=n.parse(t,e),i=new n.Compiler().compile(r,e);return new n.JavaScriptCompiler().compile(i,e)}function ty(t,e,n){if(e===void 0&&(e={}),t==null||typeof t!="string"&&t.type!=="Program")throw new ri.default("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+t);e=ii.extend({},e),"data"in e||(e.data=!0),e.compat&&(e.useDepths=!0);var r=void 0;function i(){var u=n.parse(t,e),f=new n.Compiler().compile(u,e),d=new n.JavaScriptCompiler().compile(f,e,void 0,!0);return n.template(d)}function o(u,f){return r||(r=i()),r.call(this,u,f)}return o._setup=function(u){return r||(r=i()),r._setup(u)},o._child=function(u,f,d,p){return r||(r=i()),r._child(u,f,d,p)},o}function Sc(t,e){if(t===e)return!0;if(ii.isArray(t)&&ii.isArray(e)&&t.length===e.length){for(var n=0;n<t.length;n++)if(!Sc(t[n],e[n]))return!1;return!0}}function Fc(t){if(!t.path.parts){var e=t.path;t.path={type:"PathExpression",data:!1,depth:0,parts:[e.original+""],original:e.original+"",loc:e.loc}}}});var Oc=he(Ro=>{var xc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");Ro.encode=function(t){if(0<=t&&t<xc.length)return xc[t];throw new TypeError("Must be between 0 and 63: "+t)};Ro.decode=function(t){var e=65,n=90,r=97,i=122,o=48,u=57,f=43,d=47,p=26,E=52;return e<=t&&t<=n?t-e:r<=t&&t<=i?t-r+p:o<=t&&t<=u?t-o+E:t==f?62:t==d?63:-1}});var Go=he(Vo=>{var Tc=Oc(),Ho=5,Mc=1<<Ho,Ac=Mc-1,Ic=Mc;function ny(t){return t<0?(-t<<1)+1:(t<<1)+0}function ry(t){var e=(t&1)===1,n=t>>1;return e?-n:n}Vo.encode=function(e){var n="",r,i=ny(e);do r=i&Ac,i>>>=Ho,i>0&&(r|=Ic),n+=Tc.encode(r);while(i>0);return n};Vo.decode=function(e,n,r){var i=e.length,o=0,u=0,f,d;do{if(n>=i)throw new Error("Expected more digits in base 64 VLQ value.");if(d=Tc.decode(e.charCodeAt(n++)),d===-1)throw new Error("Invalid base64 digit: "+e.charAt(n-1));f=!!(d&Ic),d&=Ac,o=o+(d<<u),u+=Ho}while(f);r.value=ry(o),r.rest=n}});var mr=he(tt=>{function iy(t,e,n){if(e in t)return t[e];if(arguments.length===3)return n;throw new Error('"'+e+'" is a required argument.')}tt.getArg=iy;var Pc=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,sy=/^data:.+\,.+$/;function ai(t){var e=t.match(Pc);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}tt.urlParse=ai;function dr(t){var e="";return t.scheme&&(e+=t.scheme+":"),e+="//",t.auth&&(e+=t.auth+"@"),t.host&&(e+=t.host),t.port&&(e+=":"+t.port),t.path&&(e+=t.path),e}tt.urlGenerate=dr;function Ko(t){var e=t,n=ai(t);if(n){if(!n.path)return t;e=n.path}for(var r=tt.isAbsolute(e),i=e.split(/\/+/),o,u=0,f=i.length-1;f>=0;f--)o=i[f],o==="."?i.splice(f,1):o===".."?u++:u>0&&(o===""?(i.splice(f+1,u),u=0):(i.splice(f,2),u--));return e=i.join("/"),e===""&&(e=r?"/":"."),n?(n.path=e,dr(n)):e}tt.normalize=Ko;function Nc(t,e){t===""&&(t="."),e===""&&(e=".");var n=ai(e),r=ai(t);if(r&&(t=r.path||"/"),n&&!n.scheme)return r&&(n.scheme=r.scheme),dr(n);if(n||e.match(sy))return e;if(r&&!r.host&&!r.path)return r.host=e,dr(r);var i=e.charAt(0)==="/"?e:Ko(t.replace(/\/+$/,"")+"/"+e);return r?(r.path=i,dr(r)):i}tt.join=Nc;tt.isAbsolute=function(t){return t.charAt(0)==="/"||Pc.test(t)};function ay(t,e){t===""&&(t="."),t=t.replace(/\/$/,"");for(var n=0;e.indexOf(t+"/")!==0;){var r=t.lastIndexOf("/");if(r<0||(t=t.slice(0,r),t.match(/^([^\/]+:\/)?\/*$/)))return e;++n}return Array(n+1).join("../")+e.substr(t.length+1)}tt.relative=ay;var Bc=function(){var t=Object.create(null);return!("__proto__"in t)}();function Lc(t){return t}function oy(t){return Rc(t)?"$"+t:t}tt.toSetString=Bc?Lc:oy;function uy(t){return Rc(t)?t.slice(1):t}tt.fromSetString=Bc?Lc:uy;function Rc(t){if(!t)return!1;var e=t.length;if(e<9||t.charCodeAt(e-1)!==95||t.charCodeAt(e-2)!==95||t.charCodeAt(e-3)!==111||t.charCodeAt(e-4)!==116||t.charCodeAt(e-5)!==111||t.charCodeAt(e-6)!==114||t.charCodeAt(e-7)!==112||t.charCodeAt(e-8)!==95||t.charCodeAt(e-9)!==95)return!1;for(var n=e-10;n>=0;n--)if(t.charCodeAt(n)!==36)return!1;return!0}function ly(t,e,n){var r=pr(t.source,e.source);return r!==0||(r=t.originalLine-e.originalLine,r!==0)||(r=t.originalColumn-e.originalColumn,r!==0||n)||(r=t.generatedColumn-e.generatedColumn,r!==0)||(r=t.generatedLine-e.generatedLine,r!==0)?r:pr(t.name,e.name)}tt.compareByOriginalPositions=ly;function cy(t,e,n){var r=t.generatedLine-e.generatedLine;return r!==0||(r=t.generatedColumn-e.generatedColumn,r!==0||n)||(r=pr(t.source,e.source),r!==0)||(r=t.originalLine-e.originalLine,r!==0)||(r=t.originalColumn-e.originalColumn,r!==0)?r:pr(t.name,e.name)}tt.compareByGeneratedPositionsDeflated=cy;function pr(t,e){return t===e?0:t===null?1:e===null?-1:t>e?1:-1}function fy(t,e){var n=t.generatedLine-e.generatedLine;return n!==0||(n=t.generatedColumn-e.generatedColumn,n!==0)||(n=pr(t.source,e.source),n!==0)||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0)?n:pr(t.name,e.name)}tt.compareByGeneratedPositionsInflated=fy;function hy(t){return JSON.parse(t.replace(/^\)]}'[^\n]*\n/,""))}tt.parseSourceMapInput=hy;function dy(t,e,n){if(e=e||"",t&&(t[t.length-1]!=="/"&&e[0]!=="/"&&(t+="/"),e=t+e),n){var r=ai(n);if(!r)throw new Error("sourceMapURL could not be parsed");if(r.path){var i=r.path.lastIndexOf("/");i>=0&&(r.path=r.path.substring(0,i+1))}e=Nc(dr(r),e)}return Ko(e)}tt.computeSourceURL=dy});var Uo=he(Hc=>{var qo=mr(),jo=Object.prototype.hasOwnProperty,qn=typeof Map!="undefined";function cn(){this._array=[],this._set=qn?new Map:Object.create(null)}cn.fromArray=function(e,n){for(var r=new cn,i=0,o=e.length;i<o;i++)r.add(e[i],n);return r};cn.prototype.size=function(){return qn?this._set.size:Object.getOwnPropertyNames(this._set).length};cn.prototype.add=function(e,n){var r=qn?e:qo.toSetString(e),i=qn?this.has(e):jo.call(this._set,r),o=this._array.length;(!i||n)&&this._array.push(e),i||(qn?this._set.set(e,o):this._set[r]=o)};cn.prototype.has=function(e){if(qn)return this._set.has(e);var n=qo.toSetString(e);return jo.call(this._set,n)};cn.prototype.indexOf=function(e){if(qn){var n=this._set.get(e);if(n>=0)return n}else{var r=qo.toSetString(e);if(jo.call(this._set,r))return this._set[r]}throw new Error('"'+e+'" is not in the set.')};cn.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)};cn.prototype.toArray=function(){return this._array.slice()};Hc.ArraySet=cn});var Kc=he(Gc=>{var Vc=mr();function py(t,e){var n=t.generatedLine,r=e.generatedLine,i=t.generatedColumn,o=e.generatedColumn;return r>n||r==n&&o>=i||Vc.compareByGeneratedPositionsInflated(t,e)<=0}function Os(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}Os.prototype.unsortedForEach=function(e,n){this._array.forEach(e,n)};Os.prototype.add=function(e){py(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))};Os.prototype.toArray=function(){return this._sorted||(this._array.sort(Vc.compareByGeneratedPositionsInflated),this._sorted=!0),this._array};Gc.MappingList=Os});var Wo=he(qc=>{var oi=Go(),Re=mr(),Ts=Uo().ArraySet,my=Kc().MappingList;function Ct(t){t||(t={}),this._file=Re.getArg(t,"file",null),this._sourceRoot=Re.getArg(t,"sourceRoot",null),this._skipValidation=Re.getArg(t,"skipValidation",!1),this._sources=new Ts,this._names=new Ts,this._mappings=new my,this._sourcesContents=null}Ct.prototype._version=3;Ct.fromSourceMap=function(e){var n=e.sourceRoot,r=new Ct({file:e.file,sourceRoot:n});return e.eachMapping(function(i){var o={generated:{line:i.generatedLine,column:i.generatedColumn}};i.source!=null&&(o.source=i.source,n!=null&&(o.source=Re.relative(n,o.source)),o.original={line:i.originalLine,column:i.originalColumn},i.name!=null&&(o.name=i.name)),r.addMapping(o)}),e.sources.forEach(function(i){var o=i;n!==null&&(o=Re.relative(n,i)),r._sources.has(o)||r._sources.add(o);var u=e.sourceContentFor(i);u!=null&&r.setSourceContent(i,u)}),r};Ct.prototype.addMapping=function(e){var n=Re.getArg(e,"generated"),r=Re.getArg(e,"original",null),i=Re.getArg(e,"source",null),o=Re.getArg(e,"name",null);this._skipValidation||this._validateMapping(n,r,i,o),i!=null&&(i=String(i),this._sources.has(i)||this._sources.add(i)),o!=null&&(o=String(o),this._names.has(o)||this._names.add(o)),this._mappings.add({generatedLine:n.line,generatedColumn:n.column,originalLine:r!=null&&r.line,originalColumn:r!=null&&r.column,source:i,name:o})};Ct.prototype.setSourceContent=function(e,n){var r=e;this._sourceRoot!=null&&(r=Re.relative(this._sourceRoot,r)),n!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[Re.toSetString(r)]=n):this._sourcesContents&&(delete this._sourcesContents[Re.toSetString(r)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))};Ct.prototype.applySourceMap=function(e,n,r){var i=n;if(n==null){if(e.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);i=e.file}var o=this._sourceRoot;o!=null&&(i=Re.relative(o,i));var u=new Ts,f=new Ts;this._mappings.unsortedForEach(function(d){if(d.source===i&&d.originalLine!=null){var p=e.originalPositionFor({line:d.originalLine,column:d.originalColumn});p.source!=null&&(d.source=p.source,r!=null&&(d.source=Re.join(r,d.source)),o!=null&&(d.source=Re.relative(o,d.source)),d.originalLine=p.line,d.originalColumn=p.column,p.name!=null&&(d.name=p.name))}var E=d.source;E!=null&&!u.has(E)&&u.add(E);var y=d.name;y!=null&&!f.has(y)&&f.add(y)},this),this._sources=u,this._names=f,e.sources.forEach(function(d){var p=e.sourceContentFor(d);p!=null&&(r!=null&&(d=Re.join(r,d)),o!=null&&(d=Re.relative(o,d)),this.setSourceContent(d,p))},this)};Ct.prototype._validateMapping=function(e,n,r,i){if(n&&typeof n.line!="number"&&typeof n.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!n&&!r&&!i)){if(e&&"line"in e&&"column"in e&&n&&"line"in n&&"column"in n&&e.line>0&&e.column>=0&&n.line>0&&n.column>=0&&r)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:r,original:n,name:i}))}};Ct.prototype._serializeMappings=function(){for(var e=0,n=1,r=0,i=0,o=0,u=0,f="",d,p,E,y,_=this._mappings.toArray(),M=0,K=_.length;M<K;M++){if(p=_[M],d="",p.generatedLine!==n)for(e=0;p.generatedLine!==n;)d+=";",n++;else if(M>0){if(!Re.compareByGeneratedPositionsInflated(p,_[M-1]))continue;d+=","}d+=oi.encode(p.generatedColumn-e),e=p.generatedColumn,p.source!=null&&(y=this._sources.indexOf(p.source),d+=oi.encode(y-u),u=y,d+=oi.encode(p.originalLine-1-i),i=p.originalLine-1,d+=oi.encode(p.originalColumn-r),r=p.originalColumn,p.name!=null&&(E=this._names.indexOf(p.name),d+=oi.encode(E-o),o=E)),f+=d}return f};Ct.prototype._generateSourcesContent=function(e,n){return e.map(function(r){if(!this._sourcesContents)return null;n!=null&&(r=Re.relative(n,r));var i=Re.toSetString(r);return Object.prototype.hasOwnProperty.call(this._sourcesContents,i)?this._sourcesContents[i]:null},this)};Ct.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(e.file=this._file),this._sourceRoot!=null&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e};Ct.prototype.toString=function(){return JSON.stringify(this.toJSON())};qc.SourceMapGenerator=Ct});var jc=he(jn=>{jn.GREATEST_LOWER_BOUND=1;jn.LEAST_UPPER_BOUND=2;function zo(t,e,n,r,i,o){var u=Math.floor((e-t)/2)+t,f=i(n,r[u],!0);return f===0?u:f>0?e-u>1?zo(u,e,n,r,i,o):o==jn.LEAST_UPPER_BOUND?e<r.length?e:-1:u:u-t>1?zo(t,u,n,r,i,o):o==jn.LEAST_UPPER_BOUND?u:t<0?-1:t}jn.search=function(e,n,r,i){if(n.length===0)return-1;var o=zo(-1,n.length,e,n,r,i||jn.GREATEST_LOWER_BOUND);if(o<0)return-1;for(;o-1>=0&&r(n[o],n[o-1],!0)===0;)--o;return o}});var Wc=he(Uc=>{function Yo(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function gy(t,e){return Math.round(t+Math.random()*(e-t))}function Zo(t,e,n,r){if(n<r){var i=gy(n,r),o=n-1;Yo(t,i,r);for(var u=t[r],f=n;f<r;f++)e(t[f],u)<=0&&(o+=1,Yo(t,o,f));Yo(t,o+1,f);var d=o+1;Zo(t,e,n,d-1),Zo(t,e,d+1,r)}}Uc.quickSort=function(t,e){Zo(t,e,0,t.length-1)}});var Yc=he(Ms=>{var te=mr(),Jo=jc(),gr=Uo().ArraySet,yy=Go(),ui=Wc().quickSort;function ke(t,e){var n=t;return typeof t=="string"&&(n=te.parseSourceMapInput(t)),n.sections!=null?new It(n,e):new Ye(n,e)}ke.fromSourceMap=function(t,e){return Ye.fromSourceMap(t,e)};ke.prototype._version=3;ke.prototype.__generatedMappings=null;Object.defineProperty(ke.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}});ke.prototype.__originalMappings=null;Object.defineProperty(ke.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}});ke.prototype._charIsMappingSeparator=function(e,n){var r=e.charAt(n);return r===";"||r===","};ke.prototype._parseMappings=function(e,n){throw new Error("Subclasses must implement _parseMappings")};ke.GENERATED_ORDER=1;ke.ORIGINAL_ORDER=2;ke.GREATEST_LOWER_BOUND=1;ke.LEAST_UPPER_BOUND=2;ke.prototype.eachMapping=function(e,n,r){var i=n||null,o=r||ke.GENERATED_ORDER,u;switch(o){case ke.GENERATED_ORDER:u=this._generatedMappings;break;case ke.ORIGINAL_ORDER:u=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var f=this.sourceRoot;u.map(function(d){var p=d.source===null?null:this._sources.at(d.source);return p=te.computeSourceURL(f,p,this._sourceMapURL),{source:p,generatedLine:d.generatedLine,generatedColumn:d.generatedColumn,originalLine:d.originalLine,originalColumn:d.originalColumn,name:d.name===null?null:this._names.at(d.name)}},this).forEach(e,i)};ke.prototype.allGeneratedPositionsFor=function(e){var n=te.getArg(e,"line"),r={source:te.getArg(e,"source"),originalLine:n,originalColumn:te.getArg(e,"column",0)};if(r.source=this._findSourceIndex(r.source),r.source<0)return[];var i=[],o=this._findMapping(r,this._originalMappings,"originalLine","originalColumn",te.compareByOriginalPositions,Jo.LEAST_UPPER_BOUND);if(o>=0){var u=this._originalMappings[o];if(e.column===void 0)for(var f=u.originalLine;u&&u.originalLine===f;)i.push({line:te.getArg(u,"generatedLine",null),column:te.getArg(u,"generatedColumn",null),lastColumn:te.getArg(u,"lastGeneratedColumn",null)}),u=this._originalMappings[++o];else for(var d=u.originalColumn;u&&u.originalLine===n&&u.originalColumn==d;)i.push({line:te.getArg(u,"generatedLine",null),column:te.getArg(u,"generatedColumn",null),lastColumn:te.getArg(u,"lastGeneratedColumn",null)}),u=this._originalMappings[++o]}return i};Ms.SourceMapConsumer=ke;function Ye(t,e){var n=t;typeof t=="string"&&(n=te.parseSourceMapInput(t));var r=te.getArg(n,"version"),i=te.getArg(n,"sources"),o=te.getArg(n,"names",[]),u=te.getArg(n,"sourceRoot",null),f=te.getArg(n,"sourcesContent",null),d=te.getArg(n,"mappings"),p=te.getArg(n,"file",null);if(r!=this._version)throw new Error("Unsupported version: "+r);u&&(u=te.normalize(u)),i=i.map(String).map(te.normalize).map(function(E){return u&&te.isAbsolute(u)&&te.isAbsolute(E)?te.relative(u,E):E}),this._names=gr.fromArray(o.map(String),!0),this._sources=gr.fromArray(i,!0),this._absoluteSources=this._sources.toArray().map(function(E){return te.computeSourceURL(u,E,e)}),this.sourceRoot=u,this.sourcesContent=f,this._mappings=d,this._sourceMapURL=e,this.file=p}Ye.prototype=Object.create(ke.prototype);Ye.prototype.consumer=ke;Ye.prototype._findSourceIndex=function(t){var e=t;if(this.sourceRoot!=null&&(e=te.relative(this.sourceRoot,e)),this._sources.has(e))return this._sources.indexOf(e);var n;for(n=0;n<this._absoluteSources.length;++n)if(this._absoluteSources[n]==t)return n;return-1};Ye.fromSourceMap=function(e,n){var r=Object.create(Ye.prototype),i=r._names=gr.fromArray(e._names.toArray(),!0),o=r._sources=gr.fromArray(e._sources.toArray(),!0);r.sourceRoot=e._sourceRoot,r.sourcesContent=e._generateSourcesContent(r._sources.toArray(),r.sourceRoot),r.file=e._file,r._sourceMapURL=n,r._absoluteSources=r._sources.toArray().map(function(M){return te.computeSourceURL(r.sourceRoot,M,n)});for(var u=e._mappings.toArray().slice(),f=r.__generatedMappings=[],d=r.__originalMappings=[],p=0,E=u.length;p<E;p++){var y=u[p],_=new zc;_.generatedLine=y.generatedLine,_.generatedColumn=y.generatedColumn,y.source&&(_.source=o.indexOf(y.source),_.originalLine=y.originalLine,_.originalColumn=y.originalColumn,y.name&&(_.name=i.indexOf(y.name)),d.push(_)),f.push(_)}return ui(r.__originalMappings,te.compareByOriginalPositions),r};Ye.prototype._version=3;Object.defineProperty(Ye.prototype,"sources",{get:function(){return this._absoluteSources.slice()}});function zc(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}Ye.prototype._parseMappings=function(e,n){for(var r=1,i=0,o=0,u=0,f=0,d=0,p=e.length,E=0,y={},_={},M=[],K=[],ue,ye,ve,Te,Ve;E<p;)if(e.charAt(E)===";")r++,E++,i=0;else if(e.charAt(E)===",")E++;else{for(ue=new zc,ue.generatedLine=r,Te=E;Te<p&&!this._charIsMappingSeparator(e,Te);Te++);if(ye=e.slice(E,Te),ve=y[ye],ve)E+=ye.length;else{for(ve=[];E<Te;)yy.decode(e,E,_),Ve=_.value,E=_.rest,ve.push(Ve);if(ve.length===2)throw new Error("Found a source, but no line and column");if(ve.length===3)throw new Error("Found a source and line, but no column");y[ye]=ve}ue.generatedColumn=i+ve[0],i=ue.generatedColumn,ve.length>1&&(ue.source=f+ve[1],f+=ve[1],ue.originalLine=o+ve[2],o=ue.originalLine,ue.originalLine+=1,ue.originalColumn=u+ve[3],u=ue.originalColumn,ve.length>4&&(ue.name=d+ve[4],d+=ve[4])),K.push(ue),typeof ue.originalLine=="number"&&M.push(ue)}ui(K,te.compareByGeneratedPositionsDeflated),this.__generatedMappings=K,ui(M,te.compareByOriginalPositions),this.__originalMappings=M};Ye.prototype._findMapping=function(e,n,r,i,o,u){if(e[r]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[r]);if(e[i]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[i]);return Jo.search(e,n,o,u)};Ye.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var n=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var r=this._generatedMappings[e+1];if(n.generatedLine===r.generatedLine){n.lastGeneratedColumn=r.generatedColumn-1;continue}}n.lastGeneratedColumn=1/0}};Ye.prototype.originalPositionFor=function(e){var n={generatedLine:te.getArg(e,"line"),generatedColumn:te.getArg(e,"column")},r=this._findMapping(n,this._generatedMappings,"generatedLine","generatedColumn",te.compareByGeneratedPositionsDeflated,te.getArg(e,"bias",ke.GREATEST_LOWER_BOUND));if(r>=0){var i=this._generatedMappings[r];if(i.generatedLine===n.generatedLine){var o=te.getArg(i,"source",null);o!==null&&(o=this._sources.at(o),o=te.computeSourceURL(this.sourceRoot,o,this._sourceMapURL));var u=te.getArg(i,"name",null);return u!==null&&(u=this._names.at(u)),{source:o,line:te.getArg(i,"originalLine",null),column:te.getArg(i,"originalColumn",null),name:u}}}return{source:null,line:null,column:null,name:null}};Ye.prototype.hasContentsOfAllSources=function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return e==null}):!1};Ye.prototype.sourceContentFor=function(e,n){if(!this.sourcesContent)return null;var r=this._findSourceIndex(e);if(r>=0)return this.sourcesContent[r];var i=e;this.sourceRoot!=null&&(i=te.relative(this.sourceRoot,i));var o;if(this.sourceRoot!=null&&(o=te.urlParse(this.sourceRoot))){var u=i.replace(/^file:\/\//,"");if(o.scheme=="file"&&this._sources.has(u))return this.sourcesContent[this._sources.indexOf(u)];if((!o.path||o.path=="/")&&this._sources.has("/"+i))return this.sourcesContent[this._sources.indexOf("/"+i)]}if(n)return null;throw new Error('"'+i+'" is not in the SourceMap.')};Ye.prototype.generatedPositionFor=function(e){var n=te.getArg(e,"source");if(n=this._findSourceIndex(n),n<0)return{line:null,column:null,lastColumn:null};var r={source:n,originalLine:te.getArg(e,"line"),originalColumn:te.getArg(e,"column")},i=this._findMapping(r,this._originalMappings,"originalLine","originalColumn",te.compareByOriginalPositions,te.getArg(e,"bias",ke.GREATEST_LOWER_BOUND));if(i>=0){var o=this._originalMappings[i];if(o.source===r.source)return{line:te.getArg(o,"generatedLine",null),column:te.getArg(o,"generatedColumn",null),lastColumn:te.getArg(o,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}};Ms.BasicSourceMapConsumer=Ye;function It(t,e){var n=t;typeof t=="string"&&(n=te.parseSourceMapInput(t));var r=te.getArg(n,"version"),i=te.getArg(n,"sections");if(r!=this._version)throw new Error("Unsupported version: "+r);this._sources=new gr,this._names=new gr;var o={line:-1,column:0};this._sections=i.map(function(u){if(u.url)throw new Error("Support for url field in sections not implemented.");var f=te.getArg(u,"offset"),d=te.getArg(f,"line"),p=te.getArg(f,"column");if(d<o.line||d===o.line&&p<o.column)throw new Error("Section offsets must be ordered and non-overlapping.");return o=f,{generatedOffset:{generatedLine:d+1,generatedColumn:p+1},consumer:new ke(te.getArg(u,"map"),e)}})}It.prototype=Object.create(ke.prototype);It.prototype.constructor=ke;It.prototype._version=3;Object.defineProperty(It.prototype,"sources",{get:function(){for(var t=[],e=0;e<this._sections.length;e++)for(var n=0;n<this._sections[e].consumer.sources.length;n++)t.push(this._sections[e].consumer.sources[n]);return t}});It.prototype.originalPositionFor=function(e){var n={generatedLine:te.getArg(e,"line"),generatedColumn:te.getArg(e,"column")},r=Jo.search(n,this._sections,function(o,u){var f=o.generatedLine-u.generatedOffset.generatedLine;return f||o.generatedColumn-u.generatedOffset.generatedColumn}),i=this._sections[r];return i?i.consumer.originalPositionFor({line:n.generatedLine-(i.generatedOffset.generatedLine-1),column:n.generatedColumn-(i.generatedOffset.generatedLine===n.generatedLine?i.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}};It.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})};It.prototype.sourceContentFor=function(e,n){for(var r=0;r<this._sections.length;r++){var i=this._sections[r],o=i.consumer.sourceContentFor(e,!0);if(o)return o}if(n)return null;throw new Error('"'+e+'" is not in the SourceMap.')};It.prototype.generatedPositionFor=function(e){for(var n=0;n<this._sections.length;n++){var r=this._sections[n];if(r.consumer._findSourceIndex(te.getArg(e,"source"))!==-1){var i=r.consumer.generatedPositionFor(e);if(i){var o={line:i.line+(r.generatedOffset.generatedLine-1),column:i.column+(r.generatedOffset.generatedLine===i.line?r.generatedOffset.generatedColumn-1:0)};return o}}}return{line:null,column:null}};It.prototype._parseMappings=function(e,n){this.__generatedMappings=[],this.__originalMappings=[];for(var r=0;r<this._sections.length;r++)for(var i=this._sections[r],o=i.consumer._generatedMappings,u=0;u<o.length;u++){var f=o[u],d=i.consumer._sources.at(f.source);d=te.computeSourceURL(i.consumer.sourceRoot,d,this._sourceMapURL),this._sources.add(d),d=this._sources.indexOf(d);var p=null;f.name&&(p=i.consumer._names.at(f.name),this._names.add(p),p=this._names.indexOf(p));var E={source:d,generatedLine:f.generatedLine+(i.generatedOffset.generatedLine-1),generatedColumn:f.generatedColumn+(i.generatedOffset.generatedLine===f.generatedLine?i.generatedOffset.generatedColumn-1:0),originalLine:f.originalLine,originalColumn:f.originalColumn,name:p};this.__generatedMappings.push(E),typeof E.originalLine=="number"&&this.__originalMappings.push(E)}ui(this.__generatedMappings,te.compareByGeneratedPositionsDeflated),ui(this.__originalMappings,te.compareByOriginalPositions)};Ms.IndexedSourceMapConsumer=It});var Jc=he(Zc=>{var vy=Wo().SourceMapGenerator,As=mr(),Dy=/(\r?\n)/,by=10,yr="$$$isSourceNode$$$";function dt(t,e,n,r,i){this.children=[],this.sourceContents={},this.line=t==null?null:t,this.column=e==null?null:e,this.source=n==null?null:n,this.name=i==null?null:i,this[yr]=!0,r!=null&&this.add(r)}dt.fromStringWithSourceMap=function(e,n,r){var i=new dt,o=e.split(Dy),u=0,f=function(){var _=K(),M=K()||"";return _+M;function K(){return u<o.length?o[u++]:void 0}},d=1,p=0,E=null;return n.eachMapping(function(_){if(E!==null)if(d<_.generatedLine)y(E,f()),d++,p=0;else{var M=o[u]||"",K=M.substr(0,_.generatedColumn-p);o[u]=M.substr(_.generatedColumn-p),p=_.generatedColumn,y(E,K),E=_;return}for(;d<_.generatedLine;)i.add(f()),d++;if(p<_.generatedColumn){var M=o[u]||"";i.add(M.substr(0,_.generatedColumn)),o[u]=M.substr(_.generatedColumn),p=_.generatedColumn}E=_},this),u<o.length&&(E&&y(E,f()),i.add(o.splice(u).join(""))),n.sources.forEach(function(_){var M=n.sourceContentFor(_);M!=null&&(r!=null&&(_=As.join(r,_)),i.setSourceContent(_,M))}),i;function y(_,M){if(_===null||_.source===void 0)i.add(M);else{var K=r?As.join(r,_.source):_.source;i.add(new dt(_.originalLine,_.originalColumn,K,M,_.name))}}};dt.prototype.add=function(e){if(Array.isArray(e))e.forEach(function(n){this.add(n)},this);else if(e[yr]||typeof e=="string")e&&this.children.push(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this};dt.prototype.prepend=function(e){if(Array.isArray(e))for(var n=e.length-1;n>=0;n--)this.prepend(e[n]);else if(e[yr]||typeof e=="string")this.children.unshift(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this};dt.prototype.walk=function(e){for(var n,r=0,i=this.children.length;r<i;r++)n=this.children[r],n[yr]?n.walk(e):n!==""&&e(n,{source:this.source,line:this.line,column:this.column,name:this.name})};dt.prototype.join=function(e){var n,r,i=this.children.length;if(i>0){for(n=[],r=0;r<i-1;r++)n.push(this.children[r]),n.push(e);n.push(this.children[r]),this.children=n}return this};dt.prototype.replaceRight=function(e,n){var r=this.children[this.children.length-1];return r[yr]?r.replaceRight(e,n):typeof r=="string"?this.children[this.children.length-1]=r.replace(e,n):this.children.push("".replace(e,n)),this};dt.prototype.setSourceContent=function(e,n){this.sourceContents[As.toSetString(e)]=n};dt.prototype.walkSourceContents=function(e){for(var n=0,r=this.children.length;n<r;n++)this.children[n][yr]&&this.children[n].walkSourceContents(e);for(var i=Object.keys(this.sourceContents),n=0,r=i.length;n<r;n++)e(As.fromSetString(i[n]),this.sourceContents[i[n]])};dt.prototype.toString=function(){var e="";return this.walk(function(n){e+=n}),e};dt.prototype.toStringWithSourceMap=function(e){var n={code:"",line:1,column:0},r=new vy(e),i=!1,o=null,u=null,f=null,d=null;return this.walk(function(p,E){n.code+=p,E.source!==null&&E.line!==null&&E.column!==null?((o!==E.source||u!==E.line||f!==E.column||d!==E.name)&&r.addMapping({source:E.source,original:{line:E.line,column:E.column},generated:{line:n.line,column:n.column},name:E.name}),o=E.source,u=E.line,f=E.column,d=E.name,i=!0):i&&(r.addMapping({generated:{line:n.line,column:n.column}}),o=null,i=!1);for(var y=0,_=p.length;y<_;y++)p.charCodeAt(y)===by?(n.line++,n.column=0,y+1===_?(o=null,i=!1):i&&r.addMapping({source:E.source,original:{line:E.line,column:E.column},generated:{line:n.line,column:n.column},name:E.name})):n.column++}),this.walkSourceContents(function(p,E){r.setSourceContent(p,E)}),{code:n.code,map:r}};Zc.SourceNode=dt});var Qc=he(Is=>{Is.SourceMapGenerator=Wo().SourceMapGenerator;Is.SourceMapConsumer=Yc().SourceMapConsumer;Is.SourceNode=Jc().SourceNode});var tf=he((Ps,ef)=>{"use strict";Ps.__esModule=!0;var $o=st(),Un=void 0;try{(typeof define!="function"||!define.amd)&&($c=Qc(),Un=$c.SourceNode)}catch(t){}var $c;Un||(Un=function(t,e,n,r){this.src="",r&&this.add(r)},Un.prototype={add:function(e){$o.isArray(e)&&(e=e.join("")),this.src+=e},prepend:function(e){$o.isArray(e)&&(e=e.join("")),this.src=e+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}});function Qo(t,e,n){if($o.isArray(t)){for(var r=[],i=0,o=t.length;i<o;i++)r.push(e.wrap(t[i],n));return r}else if(typeof t=="boolean"||typeof t=="number")return t+"";return t}function Xc(t){this.srcFile=t,this.source=[]}Xc.prototype={isEmpty:function(){return!this.source.length},prepend:function(e,n){this.source.unshift(this.wrap(e,n))},push:function(e,n){this.source.push(this.wrap(e,n))},merge:function(){var e=this.empty();return this.each(function(n){e.add(["  ",n,`
`])}),e},each:function(e){for(var n=0,r=this.source.length;n<r;n++)e(this.source[n])},empty:function(){var e=this.currentLocation||{start:{}};return new Un(e.start.line,e.start.column,this.srcFile)},wrap:function(e){var n=arguments.length<=1||arguments[1]===void 0?this.currentLocation||{start:{}}:arguments[1];return e instanceof Un?e:(e=Qo(e,this,n),new Un(n.start.line,n.start.column,this.srcFile,e))},functionCall:function(e,n,r){return r=this.generateList(r),this.wrap([e,n?"."+n+"(":"(",r,")"])},quotedString:function(e){return'"'+(e+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(e){var n=this,r=[];Object.keys(e).forEach(function(o){var u=Qo(e[o],n);u!=="undefined"&&r.push([n.quotedString(o),":",u])});var i=this.generateList(r);return i.prepend("{"),i.add("}"),i},generateList:function(e){for(var n=this.empty(),r=0,i=e.length;r<i;r++)r&&n.add(","),n.add(Qo(e[r],this));return n},generateArray:function(e){var n=this.generateList(e);return n.prepend("["),n.add("]"),n}};Ps.default=Xc;ef.exports=Ps.default});var of=he((Ns,af)=>{"use strict";Ns.__esModule=!0;function sf(t){return t&&t.__esModule?t:{default:t}}var nf=ys(),wy=wt(),Xo=sf(wy),Ey=st(),Cy=tf(),rf=sf(Cy);function vr(t){this.value=t}function Dr(){}Dr.prototype={nameLookup:function(e,n){return this.internalNameLookup(e,n)},depthedLookup:function(e){return[this.aliasable("container.lookup"),"(depths, ",JSON.stringify(e),")"]},compilerInfo:function(){var e=nf.COMPILER_REVISION,n=nf.REVISION_CHANGES[e];return[e,n]},appendToBuffer:function(e,n,r){return Ey.isArray(e)||(e=[e]),e=this.source.wrap(e,n),this.environment.isSimple?["return ",e,";"]:r?["buffer += ",e,";"]:(e.appendToBuffer=!0,e)},initializeBuffer:function(){return this.quotedString("")},internalNameLookup:function(e,n){return this.lookupPropertyFunctionIsUsed=!0,["lookupProperty(",e,",",JSON.stringify(n),")"]},lookupPropertyFunctionIsUsed:!1,compile:function(e,n,r,i){this.environment=e,this.options=n,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!i,this.name=this.environment.name,this.isChild=!!r,this.context=r||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(e,n),this.useDepths=this.useDepths||e.useDepths||e.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||e.useBlockParams;var o=e.opcodes,u=void 0,f=void 0,d=void 0,p=void 0;for(d=0,p=o.length;d<p;d++)u=o[d],this.source.currentLocation=u.loc,f=f||u.loc,this[u.opcode].apply(this,u.args);if(this.source.currentLocation=f,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new Xo.default("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend(["var decorators = container.decorators, ",this.lookupPropertyFunctionVarDeclaration(),`;
`]),this.decorators.push("return fn;"),i?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend(`function(fn, props, container, depth0, data, blockParams, depths) {
`),this.decorators.push(`}
`),this.decorators=this.decorators.merge()));var E=this.createFunctionContext(i);if(this.isChild)return E;var y={compiler:this.compilerInfo(),main:E};this.decorators&&(y.main_d=this.decorators,y.useDecorators=!0);var _=this.context,M=_.programs,K=_.decorators;for(d=0,p=M.length;d<p;d++)M[d]&&(y[d]=M[d],K[d]&&(y[d+"_d"]=K[d],y.useDecorators=!0));return this.environment.usePartial&&(y.usePartial=!0),this.options.data&&(y.useData=!0),this.useDepths&&(y.useDepths=!0),this.useBlockParams&&(y.useBlockParams=!0),this.options.compat&&(y.compat=!0),i?y.compilerOptions=this.options:(y.compiler=JSON.stringify(y.compiler),this.source.currentLocation={start:{line:1,column:0}},y=this.objectLiteral(y),n.srcName?(y=y.toStringWithSourceMap({file:n.destName}),y.map=y.map&&y.map.toString()):y=y.toString()),y},preamble:function(){this.lastContext=0,this.source=new rf.default(this.options.srcName),this.decorators=new rf.default(this.options.srcName)},createFunctionContext:function(e){var n=this,r="",i=this.stackVars.concat(this.registers.list);i.length>0&&(r+=", "+i.join(", "));var o=0;Object.keys(this.aliases).forEach(function(d){var p=n.aliases[d];p.children&&p.referenceCount>1&&(r+=", alias"+ ++o+"="+d,p.children[0]="alias"+o)}),this.lookupPropertyFunctionIsUsed&&(r+=", "+this.lookupPropertyFunctionVarDeclaration());var u=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&u.push("blockParams"),this.useDepths&&u.push("depths");var f=this.mergeSource(r);return e?(u.push(f),Function.apply(this,u)):this.source.wrap(["function(",u.join(","),`) {
  `,f,"}"])},mergeSource:function(e){var n=this.environment.isSimple,r=!this.forceBuffer,i=void 0,o=void 0,u=void 0,f=void 0;return this.source.each(function(d){d.appendToBuffer?(u?d.prepend("  + "):u=d,f=d):(u&&(o?u.prepend("buffer += "):i=!0,f.add(";"),u=f=void 0),o=!0,n||(r=!1))}),r?u?(u.prepend("return "),f.add(";")):o||this.source.push('return "";'):(e+=", buffer = "+(i?"":this.initializeBuffer()),u?(u.prepend("return buffer + "),f.add(";")):this.source.push("return buffer;")),e&&this.source.prepend("var "+e.substring(2)+(i?"":`;
`)),this.source.merge()},lookupPropertyFunctionVarDeclaration:function(){return`
      lookupProperty = container.lookupProperty || function(parent, propertyName) {
        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {
          return parent[propertyName];
        }
        return undefined
    }
    `.trim()},blockValue:function(e){var n=this.aliasable("container.hooks.blockHelperMissing"),r=[this.contextName(0)];this.setupHelperArgs(e,0,r);var i=this.popStack();r.splice(1,0,i),this.push(this.source.functionCall(n,"call",r))},ambiguousBlockValue:function(){var e=this.aliasable("container.hooks.blockHelperMissing"),n=[this.contextName(0)];this.setupHelperArgs("",0,n,!0),this.flushInline();var r=this.topStack();n.splice(1,0,r),this.pushSource(["if (!",this.lastHelper,") { ",r," = ",this.source.functionCall(e,"call",n),"}"])},appendContent:function(e){this.pendingContent?e=this.pendingContent+e:this.pendingLocation=this.source.currentLocation,this.pendingContent=e},append:function(){if(this.isInline())this.replaceStack(function(n){return[" != null ? ",n,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var e=this.popStack();this.pushSource(["if (",e," != null) { ",this.appendToBuffer(e,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(e){this.lastContext=e},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(e,n,r,i){var o=0;!i&&this.options.compat&&!this.lastContext?this.push(this.depthedLookup(e[o++])):this.pushContext(),this.resolvePath("context",e,o,n,r)},lookupBlockParam:function(e,n){this.useBlockParams=!0,this.push(["blockParams[",e[0],"][",e[1],"]"]),this.resolvePath("context",n,1)},lookupData:function(e,n,r){e?this.pushStackLiteral("container.data(data, "+e+")"):this.pushStackLiteral("data"),this.resolvePath("data",n,0,!0,r)},resolvePath:function(e,n,r,i,o){var u=this;if(this.options.strict||this.options.assumeObjects){this.push(Fy(this.options.strict&&o,this,n,r,e));return}for(var f=n.length;r<f;r++)this.replaceStack(function(d){var p=u.nameLookup(d,n[r],e);return i?[" && ",p]:[" != null ? ",p," : ",d]})},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(e,n){this.pushContext(),this.pushString(n),n!=="SubExpression"&&(typeof e=="string"?this.pushString(e):this.pushStackLiteral(e))},emptyHash:function(e){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(e?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:{},types:[],contexts:[],ids:[]}},popHash:function(){var e=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(e.ids)),this.stringParams&&(this.push(this.objectLiteral(e.contexts)),this.push(this.objectLiteral(e.types))),this.push(this.objectLiteral(e.values))},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){e!=null?this.pushStackLiteral(this.programExpression(e)):this.pushStackLiteral(null)},registerDecorator:function(e,n){var r=this.nameLookup("decorators",n,"decorator"),i=this.setupHelperArgs(n,e);this.decorators.push(["fn = ",this.decorators.functionCall(r,"",["fn","props","container",i])," || fn;"])},invokeHelper:function(e,n,r){var i=this.popStack(),o=this.setupHelper(e,n),u=[];r&&u.push(o.name),u.push(i),this.options.strict||u.push(this.aliasable("container.hooks.helperMissing"));var f=["(",this.itemsSeparatedBy(u,"||"),")"],d=this.source.functionCall(f,"call",o.callParams);this.push(d)},itemsSeparatedBy:function(e,n){var r=[];r.push(e[0]);for(var i=1;i<e.length;i++)r.push(n,e[i]);return r},invokeKnownHelper:function(e,n){var r=this.setupHelper(e,n);this.push(this.source.functionCall(r.name,"call",r.callParams))},invokeAmbiguous:function(e,n){this.useRegister("helper");var r=this.popStack();this.emptyHash();var i=this.setupHelper(0,e,n),o=this.lastHelper=this.nameLookup("helpers",e,"helper"),u=["(","(helper = ",o," || ",r,")"];this.options.strict||(u[0]="(helper = ",u.push(" != null ? helper : ",this.aliasable("container.hooks.helperMissing"))),this.push(["(",u,i.paramsInit?["),(",i.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",i.callParams)," : helper))"])},invokePartial:function(e,n,r){var i=[],o=this.setupParams(n,1,i);e&&(n=this.popStack(),delete o.name),r&&(o.indent=JSON.stringify(r)),o.helpers="helpers",o.partials="partials",o.decorators="container.decorators",e?i.unshift(n):i.unshift(this.nameLookup("partials",n,"partial")),this.options.compat&&(o.depths="depths"),o=this.objectLiteral(o),i.push(o),this.push(this.source.functionCall("container.invokePartial","",i))},assignToHash:function(e){var n=this.popStack(),r=void 0,i=void 0,o=void 0;this.trackIds&&(o=this.popStack()),this.stringParams&&(i=this.popStack(),r=this.popStack());var u=this.hash;r&&(u.contexts[e]=r),i&&(u.types[e]=i),o&&(u.ids[e]=o),u.values[e]=n},pushId:function(e,n,r){e==="BlockParam"?this.pushStackLiteral("blockParams["+n[0]+"].path["+n[1]+"]"+(r?" + "+JSON.stringify("."+r):"")):e==="PathExpression"?this.pushString(n):e==="SubExpression"?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:Dr,compileChildren:function(e,n){for(var r=e.children,i=void 0,o=void 0,u=0,f=r.length;u<f;u++){i=r[u],o=new this.compiler;var d=this.matchExistingProgram(i);if(d==null){this.context.programs.push("");var p=this.context.programs.length;i.index=p,i.name="program"+p,this.context.programs[p]=o.compile(i,n,this.context,!this.precompile),this.context.decorators[p]=o.decorators,this.context.environments[p]=i,this.useDepths=this.useDepths||o.useDepths,this.useBlockParams=this.useBlockParams||o.useBlockParams,i.useDepths=this.useDepths,i.useBlockParams=this.useBlockParams}else i.index=d.index,i.name="program"+d.index,this.useDepths=this.useDepths||d.useDepths,this.useBlockParams=this.useBlockParams||d.useBlockParams}},matchExistingProgram:function(e){for(var n=0,r=this.context.environments.length;n<r;n++){var i=this.context.environments[n];if(i&&i.equals(e))return i}},programExpression:function(e){var n=this.environment.children[e],r=[n.index,"data",n.blockParams];return(this.useBlockParams||this.useDepths)&&r.push("blockParams"),this.useDepths&&r.push("depths"),"container.program("+r.join(", ")+")"},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},push:function(e){return e instanceof vr||(e=this.source.wrap(e)),this.inlineStack.push(e),e},pushStackLiteral:function(e){this.push(new vr(e))},pushSource:function(e){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),e&&this.source.push(e)},replaceStack:function(e){var n=["("],r=void 0,i=void 0,o=void 0;if(!this.isInline())throw new Xo.default("replaceStack on non-inline");var u=this.popStack(!0);if(u instanceof vr)r=[u.value],n=["(",r],o=!0;else{i=!0;var f=this.incrStack();n=["((",this.push(f)," = ",u,")"],r=this.topStack()}var d=e.call(this,r);o||this.popStack(),i&&this.stackSlot--,this.push(n.concat(d,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;this.inlineStack=[];for(var n=0,r=e.length;n<r;n++){var i=e[n];if(i instanceof vr)this.compileStack.push(i);else{var o=this.incrStack();this.pushSource([o," = ",i,";"]),this.compileStack.push(o)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var n=this.isInline(),r=(n?this.inlineStack:this.compileStack).pop();if(!e&&r instanceof vr)return r.value;if(!n){if(!this.stackSlot)throw new Xo.default("Invalid stack pop");this.stackSlot--}return r},topStack:function(){var e=this.isInline()?this.inlineStack:this.compileStack,n=e[e.length-1];return n instanceof vr?n.value:n},contextName:function(e){return this.useDepths&&e?"depths["+e+"]":"depth"+e},quotedString:function(e){return this.source.quotedString(e)},objectLiteral:function(e){return this.source.objectLiteral(e)},aliasable:function(e){var n=this.aliases[e];return n?(n.referenceCount++,n):(n=this.aliases[e]=this.source.wrap(e),n.aliasable=!0,n.referenceCount=1,n)},setupHelper:function(e,n,r){var i=[],o=this.setupHelperArgs(n,e,i,r),u=this.nameLookup("helpers",n,"helper"),f=this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})");return{params:i,paramsInit:o,name:u,callParams:[f].concat(i)}},setupParams:function(e,n,r){var i={},o=[],u=[],f=[],d=!r,p=void 0;d&&(r=[]),i.name=this.quotedString(e),i.hash=this.popStack(),this.trackIds&&(i.hashIds=this.popStack()),this.stringParams&&(i.hashTypes=this.popStack(),i.hashContexts=this.popStack());var E=this.popStack(),y=this.popStack();(y||E)&&(i.fn=y||"container.noop",i.inverse=E||"container.noop");for(var _=n;_--;)p=this.popStack(),r[_]=p,this.trackIds&&(f[_]=this.popStack()),this.stringParams&&(u[_]=this.popStack(),o[_]=this.popStack());return d&&(i.args=this.source.generateArray(r)),this.trackIds&&(i.ids=this.source.generateArray(f)),this.stringParams&&(i.types=this.source.generateArray(u),i.contexts=this.source.generateArray(o)),this.options.data&&(i.data="data"),this.useBlockParams&&(i.blockParams="blockParams"),i},setupHelperArgs:function(e,n,r,i){var o=this.setupParams(e,n,r);return o.loc=JSON.stringify(this.source.currentLocation),o=this.objectLiteral(o),i?(this.useRegister("options"),r.push("options"),["options=",o]):r?(r.push(o),""):o}};(function(){for(var t="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),e=Dr.RESERVED_WORDS={},n=0,r=t.length;n<r;n++)e[t[n]]=!0})();Dr.isValidJavaScriptVariableName=function(t){return!Dr.RESERVED_WORDS[t]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(t)};function Fy(t,e,n,r,i){var o=e.popStack(),u=n.length;for(t&&u--;r<u;r++)o=e.nameLookup(o,n[r],i);return t?[e.aliasable("container.strict"),"(",o,", ",e.quotedString(n[r]),", ",JSON.stringify(e.source.currentLocation)," )"]:o}Ns.default=Dr;af.exports=Ns.default});var cf=he((Bs,lf)=>{"use strict";Bs.__esModule=!0;function li(t){return t&&t.__esModule?t:{default:t}}var _y=cc(),Sy=li(_y),ky=Oo(),xy=li(ky),eu=Cc(),tu=kc(),Oy=of(),Ty=li(Oy),My=Mo(),Ay=li(My),Iy=_o(),Py=li(Iy),Ny=Sy.default.create;function uf(){var t=Ny();return t.compile=function(e,n){return tu.compile(e,n,t)},t.precompile=function(e,n){return tu.precompile(e,n,t)},t.AST=xy.default,t.Compiler=tu.Compiler,t.JavaScriptCompiler=Ty.default,t.Parser=eu.parser,t.parse=eu.parse,t.parseWithoutProcessing=eu.parseWithoutProcessing,t}var br=uf();br.create=uf;Py.default(br);br.Visitor=Ay.default;br.default=br;Bs.default=br;lf.exports=Bs.default});var pd=he(Qt=>{"use strict";Object.defineProperty(Qt,"__esModule",{value:!0});require("obsidian");var dn=class extends Error{},hu=class extends dn{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}},du=class extends dn{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}},pu=class extends dn{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}},Zn=class extends dn{},ea=class extends dn{constructor(e){super(`Invalid unit ${e}`)}},ct=class extends dn{},Zt=class extends dn{constructor(){super("Zone is an abstract class")}},Z="numeric",Lt="short",mt="long",ta={year:Z,month:Z,day:Z},mh={year:Z,month:Lt,day:Z},yv={year:Z,month:Lt,day:Z,weekday:Lt},gh={year:Z,month:mt,day:Z},yh={year:Z,month:mt,day:Z,weekday:mt},vh={hour:Z,minute:Z},Dh={hour:Z,minute:Z,second:Z},bh={hour:Z,minute:Z,second:Z,timeZoneName:Lt},wh={hour:Z,minute:Z,second:Z,timeZoneName:mt},Eh={hour:Z,minute:Z,hourCycle:"h23"},Ch={hour:Z,minute:Z,second:Z,hourCycle:"h23"},Fh={hour:Z,minute:Z,second:Z,hourCycle:"h23",timeZoneName:Lt},_h={hour:Z,minute:Z,second:Z,hourCycle:"h23",timeZoneName:mt},Sh={year:Z,month:Z,day:Z,hour:Z,minute:Z},kh={year:Z,month:Z,day:Z,hour:Z,minute:Z,second:Z},xh={year:Z,month:Lt,day:Z,hour:Z,minute:Z},Oh={year:Z,month:Lt,day:Z,hour:Z,minute:Z,second:Z},vv={year:Z,month:Lt,day:Z,weekday:Lt,hour:Z,minute:Z},Th={year:Z,month:mt,day:Z,hour:Z,minute:Z,timeZoneName:Lt},Mh={year:Z,month:mt,day:Z,hour:Z,minute:Z,second:Z,timeZoneName:Lt},Ah={year:Z,month:mt,day:Z,weekday:mt,hour:Z,minute:Z,timeZoneName:mt},Ih={year:Z,month:mt,day:Z,weekday:mt,hour:Z,minute:Z,second:Z,timeZoneName:mt},$n=class{get type(){throw new Zt}get name(){throw new Zt}get ianaName(){return this.name}get isUniversal(){throw new Zt}offsetName(e,n){throw new Zt}formatOffset(e,n){throw new Zt}offset(e){throw new Zt}equals(e){throw new Zt}get isValid(){throw new Zt}},su=null,Sr=class extends $n{static get instance(){return su===null&&(su=new Sr),su}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:n,locale:r}){return Nh(e,n,r)}formatOffset(e,n){return bi(this.offset(e),n)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}},$s={};function Dv(t){return $s[t]||($s[t]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),$s[t]}var bv={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function wv(t,e){let n=t.format(e).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(n),[,i,o,u,f,d,p,E]=r;return[u,i,o,f,d,p,E]}function Ev(t,e){let n=t.formatToParts(e),r=[];for(let i=0;i<n.length;i++){let{type:o,value:u}=n[i],f=bv[o];o==="era"?r[f]=u:ge(f)||(r[f]=parseInt(u,10))}return r}var Ws={},Rt=class extends $n{static create(e){return Ws[e]||(Ws[e]=new Rt(e)),Ws[e]}static resetCache(){Ws={},$s={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch(n){return!1}}constructor(e){super(),this.zoneName=e,this.valid=Rt.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:n,locale:r}){return Nh(e,n,r,this.name)}formatOffset(e,n){return bi(this.offset(e),n)}offset(e){let n=new Date(e);if(isNaN(n))return NaN;let r=Dv(this.name),[i,o,u,f,d,p,E]=r.formatToParts?Ev(r,n):wv(r,n);f==="BC"&&(i=-Math.abs(i)+1);let _=la({year:i,month:o,day:u,hour:d===24?0:d,minute:p,second:E,millisecond:0}),M=+n,K=M%1e3;return M-=K>=0?K:1e3+K,(_-M)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}},Rf={};function Cv(t,e={}){let n=JSON.stringify([t,e]),r=Rf[n];return r||(r=new Intl.ListFormat(t,e),Rf[n]=r),r}var mu={};function gu(t,e={}){let n=JSON.stringify([t,e]),r=mu[n];return r||(r=new Intl.DateTimeFormat(t,e),mu[n]=r),r}var yu={};function Fv(t,e={}){let n=JSON.stringify([t,e]),r=yu[n];return r||(r=new Intl.NumberFormat(t,e),yu[n]=r),r}var vu={};function _v(t,e={}){let{base:n,...r}=e,i=JSON.stringify([t,r]),o=vu[i];return o||(o=new Intl.RelativeTimeFormat(t,e),vu[i]=o),o}var vi=null;function Sv(){return vi||(vi=new Intl.DateTimeFormat().resolvedOptions().locale,vi)}function kv(t){let e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));let n=t.indexOf("-u-");if(n===-1)return[t];{let r,i;try{r=gu(t).resolvedOptions(),i=t}catch(f){let d=t.substring(0,n);r=gu(d).resolvedOptions(),i=d}let{numberingSystem:o,calendar:u}=r;return[i,o,u]}}function xv(t,e,n){return(n||e)&&(t.includes("-u-")||(t+="-u"),n&&(t+=`-ca-${n}`),e&&(t+=`-nu-${e}`)),t}function Ov(t){let e=[];for(let n=1;n<=12;n++){let r=ne.utc(2009,n,1);e.push(t(r))}return e}function Tv(t){let e=[];for(let n=1;n<=7;n++){let r=ne.utc(2016,11,13+n);e.push(t(r))}return e}function zs(t,e,n,r){let i=t.listingMode();return i==="error"?null:i==="en"?n(e):r(e)}function Mv(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||new Intl.DateTimeFormat(t.intl).resolvedOptions().numberingSystem==="latn"}var Du=class{constructor(e,n,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;let{padTo:i,floor:o,...u}=r;if(!n||Object.keys(u).length>0){let f={useGrouping:!1,...r};r.padTo>0&&(f.minimumIntegerDigits=r.padTo),this.inf=Fv(e,f)}}format(e){if(this.inf){let n=this.floor?Math.floor(e):e;return this.inf.format(n)}else{let n=this.floor?Math.floor(e):Mu(e,3);return He(n,this.padTo)}}},bu=class{constructor(e,n,r){this.opts=r,this.originalZone=void 0;let i;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){let u=-1*(e.offset/60),f=u>=0?`Etc/GMT+${u}`:`Etc/GMT${u}`;e.offset!==0&&Rt.create(f).valid?(i=f,this.dt=e):(i="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,i=e.zone.name):(i="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);let o={...this.opts};o.timeZone=o.timeZone||i,this.dtf=gu(n,o)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){let e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(n=>{if(n.type==="timeZoneName"){let r=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...n,value:r}}else return n}):e}resolvedOptions(){return this.dtf.resolvedOptions()}},wu=class{constructor(e,n,r){this.opts={style:"long",...r},!n&&Ph()&&(this.rtf=_v(e,r))}format(e,n){return this.rtf?this.rtf.format(e,n):zv(n,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,n){return this.rtf?this.rtf.formatToParts(e,n):[]}},_e=class{static fromOpts(e){return _e.create(e.locale,e.numberingSystem,e.outputCalendar,e.defaultToEN)}static create(e,n,r,i=!1){let o=e||Pe.defaultLocale,u=o||(i?"en-US":Sv()),f=n||Pe.defaultNumberingSystem,d=r||Pe.defaultOutputCalendar;return new _e(u,f,d,o)}static resetCache(){vi=null,mu={},yu={},vu={}}static fromObject({locale:e,numberingSystem:n,outputCalendar:r}={}){return _e.create(e,n,r)}constructor(e,n,r,i){let[o,u,f]=kv(e);this.locale=o,this.numberingSystem=n||u||null,this.outputCalendar=r||f||null,this.intl=xv(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=i,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=Mv(this)),this.fastNumbersCached}listingMode(){let e=this.isEnglish(),n=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&n?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:_e.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,n=!1){return zs(this,e,Rh,()=>{let r=n?{month:e,day:"numeric"}:{month:e},i=n?"format":"standalone";return this.monthsCache[i][e]||(this.monthsCache[i][e]=Ov(o=>this.extract(o,r,"month"))),this.monthsCache[i][e]})}weekdays(e,n=!1){return zs(this,e,Gh,()=>{let r=n?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},i=n?"format":"standalone";return this.weekdaysCache[i][e]||(this.weekdaysCache[i][e]=Tv(o=>this.extract(o,r,"weekday"))),this.weekdaysCache[i][e]})}meridiems(){return zs(this,void 0,()=>Kh,()=>{if(!this.meridiemCache){let e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[ne.utc(2016,11,13,9),ne.utc(2016,11,13,19)].map(n=>this.extract(n,e,"dayperiod"))}return this.meridiemCache})}eras(e){return zs(this,e,qh,()=>{let n={era:e};return this.eraCache[e]||(this.eraCache[e]=[ne.utc(-40,1,1),ne.utc(2017,1,1)].map(r=>this.extract(r,n,"era"))),this.eraCache[e]})}extract(e,n,r){let i=this.dtFormatter(e,n),o=i.formatToParts(),u=o.find(f=>f.type.toLowerCase()===r);return u?u.value:null}numberFormatter(e={}){return new Du(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,n={}){return new bu(e,this.intl,n)}relFormatter(e={}){return new wu(this.intl,this.isEnglish(),e)}listFormatter(e={}){return Cv(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}},au=null,Ze=class extends $n{static get utcInstance(){return au===null&&(au=new Ze(0)),au}static instance(e){return e===0?Ze.utcInstance:new Ze(e)}static parseSpecifier(e){if(e){let n=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(n)return new Ze(ca(n[1],n[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${bi(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${bi(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,n){return bi(this.fixed,n)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}},Eu=class extends $n{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}};function Mn(t,e){if(ge(t)||t===null)return e;if(t instanceof $n)return t;if(Av(t)){let n=t.toLowerCase();return n==="default"?e:n==="local"||n==="system"?Sr.instance:n==="utc"||n==="gmt"?Ze.utcInstance:Ze.parseSpecifier(n)||Rt.create(t)}else return Qn(t)?Ze.instance(t):typeof t=="object"&&"offset"in t&&typeof t.offset=="function"?t:new Eu(t)}var Hf=()=>Date.now(),Vf="system",Gf=null,Kf=null,qf=null,jf=60,Uf,Pe=class{static get now(){return Hf}static set now(e){Hf=e}static set defaultZone(e){Vf=e}static get defaultZone(){return Mn(Vf,Sr.instance)}static get defaultLocale(){return Gf}static set defaultLocale(e){Gf=e}static get defaultNumberingSystem(){return Kf}static set defaultNumberingSystem(e){Kf=e}static get defaultOutputCalendar(){return qf}static set defaultOutputCalendar(e){qf=e}static get twoDigitCutoffYear(){return jf}static set twoDigitCutoffYear(e){jf=e%100}static get throwOnInvalid(){return Uf}static set throwOnInvalid(e){Uf=e}static resetCaches(){_e.resetCache(),Rt.resetCache()}};function ge(t){return typeof t=="undefined"}function Qn(t){return typeof t=="number"}function ua(t){return typeof t=="number"&&t%1===0}function Av(t){return typeof t=="string"}function Iv(t){return Object.prototype.toString.call(t)==="[object Date]"}function Ph(){try{return typeof Intl!="undefined"&&!!Intl.RelativeTimeFormat}catch(t){return!1}}function Pv(t){return Array.isArray(t)?t:[t]}function Wf(t,e,n){if(t.length!==0)return t.reduce((r,i)=>{let o=[e(i),i];return r&&n(r[0],o[0])===r[0]?r:o},null)[1]}function Nv(t,e){return e.reduce((n,r)=>(n[r]=t[r],n),{})}function kr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function hn(t,e,n){return ua(t)&&t>=e&&t<=n}function Bv(t,e){return t-e*Math.floor(t/e)}function He(t,e=2){let n=t<0,r;return n?r="-"+(""+-t).padStart(e,"0"):r=(""+t).padStart(e,"0"),r}function Tn(t){if(!(ge(t)||t===null||t===""))return parseInt(t,10)}function zn(t){if(!(ge(t)||t===null||t===""))return parseFloat(t)}function Tu(t){if(!(ge(t)||t===null||t==="")){let e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function Mu(t,e,n=!1){let r=10**e;return(n?Math.trunc:Math.round)(t*r)/r}function _i(t){return t%4===0&&(t%100!==0||t%400===0)}function Di(t){return _i(t)?366:365}function na(t,e){let n=Bv(e-1,12)+1,r=t+(e-n)/12;return n===2?_i(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][n-1]}function la(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function ra(t){let e=(t+Math.floor(t/4)-Math.floor(t/100)+Math.floor(t/400))%7,n=t-1,r=(n+Math.floor(n/4)-Math.floor(n/100)+Math.floor(n/400))%7;return e===4||r===3?53:52}function Cu(t){return t>99?t:t>Pe.twoDigitCutoffYear?1900+t:2e3+t}function Nh(t,e,n,r=null){let i=new Date(t),o={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(o.timeZone=r);let u={timeZoneName:e,...o},f=new Intl.DateTimeFormat(n,u).formatToParts(i).find(d=>d.type.toLowerCase()==="timezonename");return f?f.value:null}function ca(t,e){let n=parseInt(t,10);Number.isNaN(n)&&(n=0);let r=parseInt(e,10)||0,i=n<0||Object.is(n,-0)?-r:r;return n*60+i}function Bh(t){let e=Number(t);if(typeof t=="boolean"||t===""||Number.isNaN(e))throw new ct(`Invalid unit value ${t}`);return e}function ia(t,e){let n={};for(let r in t)if(kr(t,r)){let i=t[r];if(i==null)continue;n[e(r)]=Bh(i)}return n}function bi(t,e){let n=Math.trunc(Math.abs(t/60)),r=Math.trunc(Math.abs(t%60)),i=t>=0?"+":"-";switch(e){case"short":return`${i}${He(n,2)}:${He(r,2)}`;case"narrow":return`${i}${n}${r>0?`:${r}`:""}`;case"techie":return`${i}${He(n,2)}${He(r,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function fa(t){return Nv(t,["hour","minute","second","millisecond"])}var Lv=["January","February","March","April","May","June","July","August","September","October","November","December"],Lh=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Rv=["J","F","M","A","M","J","J","A","S","O","N","D"];function Rh(t){switch(t){case"narrow":return[...Rv];case"short":return[...Lh];case"long":return[...Lv];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}var Hh=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Vh=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Hv=["M","T","W","T","F","S","S"];function Gh(t){switch(t){case"narrow":return[...Hv];case"short":return[...Vh];case"long":return[...Hh];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}var Kh=["AM","PM"],Vv=["Before Christ","Anno Domini"],Gv=["BC","AD"],Kv=["B","A"];function qh(t){switch(t){case"narrow":return[...Kv];case"short":return[...Gv];case"long":return[...Vv];default:return null}}function qv(t){return Kh[t.hour<12?0:1]}function jv(t,e){return Gh(e)[t.weekday-1]}function Uv(t,e){return Rh(e)[t.month-1]}function Wv(t,e){return qh(e)[t.year<0?0:1]}function zv(t,e,n="always",r=!1){let i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},o=["hours","minutes","seconds"].indexOf(t)===-1;if(n==="auto"&&o){let y=t==="days";switch(e){case 1:return y?"tomorrow":`next ${i[t][0]}`;case-1:return y?"yesterday":`last ${i[t][0]}`;case 0:return y?"today":`this ${i[t][0]}`}}let u=Object.is(e,-0)||e<0,f=Math.abs(e),d=f===1,p=i[t],E=r?d?p[1]:p[2]||p[1]:d?i[t][0]:t;return u?`${f} ${E} ago`:`in ${f} ${E}`}function zf(t,e){let n="";for(let r of t)r.literal?n+=r.val:n+=e(r.val);return n}var Yv={D:ta,DD:mh,DDD:gh,DDDD:yh,t:vh,tt:Dh,ttt:bh,tttt:wh,T:Eh,TT:Ch,TTT:Fh,TTTT:_h,f:Sh,ff:xh,fff:Th,ffff:Ah,F:kh,FF:Oh,FFF:Mh,FFFF:Ih},Ue=class{static create(e,n={}){return new Ue(e,n)}static parseFormat(e){let n=null,r="",i=!1,o=[];for(let u=0;u<e.length;u++){let f=e.charAt(u);f==="'"?(r.length>0&&o.push({literal:i||/^\s+$/.test(r),val:r}),n=null,r="",i=!i):i||f===n?r+=f:(r.length>0&&o.push({literal:/^\s+$/.test(r),val:r}),r=f,n=f)}return r.length>0&&o.push({literal:i||/^\s+$/.test(r),val:r}),o}static macroTokenToFormatOpts(e){return Yv[e]}constructor(e,n){this.opts=n,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,n){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...n}).format()}dtFormatter(e,n={}){return this.loc.dtFormatter(e,{...this.opts,...n})}formatDateTime(e,n){return this.dtFormatter(e,n).format()}formatDateTimeParts(e,n){return this.dtFormatter(e,n).formatToParts()}formatInterval(e,n){return this.dtFormatter(e.start,n).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,n){return this.dtFormatter(e,n).resolvedOptions()}num(e,n=0){if(this.opts.forceSimple)return He(e,n);let r={...this.opts};return n>0&&(r.padTo=n),this.loc.numberFormatter(r).format(e)}formatDateTimeFromString(e,n){let r=this.loc.listingMode()==="en",i=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",o=(M,K)=>this.loc.extract(e,M,K),u=M=>e.isOffsetFixed&&e.offset===0&&M.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,M.format):"",f=()=>r?qv(e):o({hour:"numeric",hourCycle:"h12"},"dayperiod"),d=(M,K)=>r?Uv(e,M):o(K?{month:M}:{month:M,day:"numeric"},"month"),p=(M,K)=>r?jv(e,M):o(K?{weekday:M}:{weekday:M,month:"long",day:"numeric"},"weekday"),E=M=>{let K=Ue.macroTokenToFormatOpts(M);return K?this.formatWithSystemDefault(e,K):M},y=M=>r?Wv(e,M):o({era:M},"era"),_=M=>{switch(M){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return u({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return u({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return u({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return f();case"d":return i?o({day:"numeric"},"day"):this.num(e.day);case"dd":return i?o({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return p("short",!0);case"cccc":return p("long",!0);case"ccccc":return p("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return p("short",!1);case"EEEE":return p("long",!1);case"EEEEE":return p("narrow",!1);case"L":return i?o({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return i?o({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return d("short",!0);case"LLLL":return d("long",!0);case"LLLLL":return d("narrow",!0);case"M":return i?o({month:"numeric"},"month"):this.num(e.month);case"MM":return i?o({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return d("short",!1);case"MMMM":return d("long",!1);case"MMMMM":return d("narrow",!1);case"y":return i?o({year:"numeric"},"year"):this.num(e.year);case"yy":return i?o({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return i?o({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return i?o({year:"numeric"},"year"):this.num(e.year,6);case"G":return y("short");case"GG":return y("long");case"GGGGG":return y("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return E(M)}};return zf(Ue.parseFormat(n),_)}formatDurationFromString(e,n){let r=d=>{switch(d[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},i=d=>p=>{let E=r(p);return E?this.num(d.get(E),p.length):p},o=Ue.parseFormat(n),u=o.reduce((d,{literal:p,val:E})=>p?d:d.concat(E),[]),f=e.shiftTo(...u.map(r).filter(d=>d));return zf(o,i(f))}},pt=class{constructor(e,n){this.reason=e,this.explanation=n}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}},jh=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function xr(...t){let e=t.reduce((n,r)=>n+r.source,"");return RegExp(`^${e}$`)}function Or(...t){return e=>t.reduce(([n,r,i],o)=>{let[u,f,d]=o(e,i);return[{...n,...u},f||r,d]},[{},null,1]).slice(0,2)}function Tr(t,...e){if(t==null)return[null,null];for(let[n,r]of e){let i=n.exec(t);if(i)return r(i)}return[null,null]}function Uh(...t){return(e,n)=>{let r={},i;for(i=0;i<t.length;i++)r[t[i]]=Tn(e[n+i]);return[r,null,n+i]}}var Wh=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Zv=`(?:${Wh.source}?(?:\\[(${jh.source})\\])?)?`,Au=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,zh=RegExp(`${Au.source}${Zv}`),Iu=RegExp(`(?:T${zh.source})?`),Jv=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Qv=/(\d{4})-?W(\d\d)(?:-?(\d))?/,$v=/(\d{4})-?(\d{3})/,Xv=Uh("weekYear","weekNumber","weekDay"),eD=Uh("year","ordinal"),tD=/(\d{4})-(\d\d)-(\d\d)/,Yh=RegExp(`${Au.source} ?(?:${Wh.source}|(${jh.source}))?`),nD=RegExp(`(?: ${Yh.source})?`);function _r(t,e,n){let r=t[e];return ge(r)?n:Tn(r)}function rD(t,e){return[{year:_r(t,e),month:_r(t,e+1,1),day:_r(t,e+2,1)},null,e+3]}function Mr(t,e){return[{hours:_r(t,e,0),minutes:_r(t,e+1,0),seconds:_r(t,e+2,0),milliseconds:Tu(t[e+3])},null,e+4]}function Si(t,e){let n=!t[e]&&!t[e+1],r=ca(t[e+1],t[e+2]),i=n?null:Ze.instance(r);return[{},i,e+3]}function ki(t,e){let n=t[e]?Rt.create(t[e]):null;return[{},n,e+1]}var iD=RegExp(`^T?${Au.source}$`),sD=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function aD(t){let[e,n,r,i,o,u,f,d,p]=t,E=e[0]==="-",y=d&&d[0]==="-",_=(M,K=!1)=>M!==void 0&&(K||M&&E)?-M:M;return[{years:_(zn(n)),months:_(zn(r)),weeks:_(zn(i)),days:_(zn(o)),hours:_(zn(u)),minutes:_(zn(f)),seconds:_(zn(d),d==="-0"),milliseconds:_(Tu(p),y)}]}var oD={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Pu(t,e,n,r,i,o,u){let f={year:e.length===2?Cu(Tn(e)):Tn(e),month:Lh.indexOf(n)+1,day:Tn(r),hour:Tn(i),minute:Tn(o)};return u&&(f.second=Tn(u)),t&&(f.weekday=t.length>3?Hh.indexOf(t)+1:Vh.indexOf(t)+1),f}var uD=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function lD(t){let[,e,n,r,i,o,u,f,d,p,E,y]=t,_=Pu(e,i,r,n,o,u,f),M;return d?M=oD[d]:p?M=0:M=ca(E,y),[_,new Ze(M)]}function cD(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}var fD=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,hD=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,dD=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Yf(t){let[,e,n,r,i,o,u,f]=t;return[Pu(e,i,r,n,o,u,f),Ze.utcInstance]}function pD(t){let[,e,n,r,i,o,u,f]=t;return[Pu(e,f,n,r,i,o,u),Ze.utcInstance]}var mD=xr(Jv,Iu),gD=xr(Qv,Iu),yD=xr($v,Iu),vD=xr(zh),Zh=Or(rD,Mr,Si,ki),DD=Or(Xv,Mr,Si,ki),bD=Or(eD,Mr,Si,ki),wD=Or(Mr,Si,ki);function ED(t){return Tr(t,[mD,Zh],[gD,DD],[yD,bD],[vD,wD])}function CD(t){return Tr(cD(t),[uD,lD])}function FD(t){return Tr(t,[fD,Yf],[hD,Yf],[dD,pD])}function _D(t){return Tr(t,[sD,aD])}var SD=Or(Mr);function kD(t){return Tr(t,[iD,SD])}var xD=xr(tD,nD),OD=xr(Yh),TD=Or(Mr,Si,ki);function MD(t){return Tr(t,[xD,Zh],[OD,TD])}var Zf="Invalid Duration",Jh={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},AD={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...Jh},Ft=146097/400,Er=146097/4800,ID={years:{quarters:4,months:12,weeks:Ft/7,days:Ft,hours:Ft*24,minutes:Ft*24*60,seconds:Ft*24*60*60,milliseconds:Ft*24*60*60*1e3},quarters:{months:3,weeks:Ft/28,days:Ft/4,hours:Ft*24/4,minutes:Ft*24*60/4,seconds:Ft*24*60*60/4,milliseconds:Ft*24*60*60*1e3/4},months:{weeks:Er/7,days:Er,hours:Er*24,minutes:Er*24*60,seconds:Er*24*60*60,milliseconds:Er*24*60*60*1e3},...Jh},Jn=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],PD=Jn.slice(0).reverse();function On(t,e,n=!1){let r={values:n?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new X(r)}function Qh(t,e){var r;let n=(r=e.milliseconds)!=null?r:0;for(let i of PD.slice(1))e[i]&&(n+=e[i]*t[i].milliseconds);return n}function Jf(t,e){let n=Qh(t,e)<0?-1:1;Jn.reduceRight((r,i)=>{if(ge(e[i]))return r;if(r){let o=e[r]*n,u=t[i][r],f=Math.floor(o/u);e[i]+=f*n,e[r]-=f*u*n}return i},null),Jn.reduce((r,i)=>{if(ge(e[i]))return r;if(r){let o=e[r]%1;e[r]-=o,e[i]+=o*t[r][i]}return i},null)}function ND(t){let e={};for(let[n,r]of Object.entries(t))r!==0&&(e[n]=r);return e}var X=class{constructor(e){let n=e.conversionAccuracy==="longterm"||!1,r=n?ID:AD;e.matrix&&(r=e.matrix),this.values=e.values,this.loc=e.loc||_e.create(),this.conversionAccuracy=n?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(e,n){return X.fromObject({milliseconds:e},n)}static fromObject(e,n={}){if(e==null||typeof e!="object")throw new ct(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new X({values:ia(e,X.normalizeUnit),loc:_e.fromObject(n),conversionAccuracy:n.conversionAccuracy,matrix:n.matrix})}static fromDurationLike(e){if(Qn(e))return X.fromMillis(e);if(X.isDuration(e))return e;if(typeof e=="object")return X.fromObject(e);throw new ct(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,n){let[r]=_D(e);return r?X.fromObject(r,n):X.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,n){let[r]=kD(e);return r?X.fromObject(r,n):X.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,n=null){if(!e)throw new ct("need to specify a reason the Duration is invalid");let r=e instanceof pt?e:new pt(e,n);if(Pe.throwOnInvalid)throw new pu(r);return new X({invalid:r})}static normalizeUnit(e){let n={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!n)throw new ea(e);return n}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,n={}){let r={...n,floor:n.round!==!1&&n.floor!==!1};return this.isValid?Ue.create(this.loc,r).formatDurationFromString(this,e):Zf}toHuman(e={}){if(!this.isValid)return Zf;let n=Jn.map(r=>{let i=this.values[r];return ge(i)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:r.slice(0,-1)}).format(i)}).filter(r=>r);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(n)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=Mu(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;let n=this.toMillis();return n<0||n>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},ne.fromMillis(n,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.isValid?Qh(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;let n=X.fromDurationLike(e),r={};for(let i of Jn)(kr(n.values,i)||kr(this.values,i))&&(r[i]=n.get(i)+this.get(i));return On(this,{values:r},!0)}minus(e){if(!this.isValid)return this;let n=X.fromDurationLike(e);return this.plus(n.negate())}mapUnits(e){if(!this.isValid)return this;let n={};for(let r of Object.keys(this.values))n[r]=Bh(e(this.values[r],r));return On(this,{values:n},!0)}get(e){return this[X.normalizeUnit(e)]}set(e){if(!this.isValid)return this;let n={...this.values,...ia(e,X.normalizeUnit)};return On(this,{values:n})}reconfigure({locale:e,numberingSystem:n,conversionAccuracy:r,matrix:i}={}){let u={loc:this.loc.clone({locale:e,numberingSystem:n}),matrix:i,conversionAccuracy:r};return On(this,u)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;let e=this.toObject();return Jf(this.matrix,e),On(this,{values:e},!0)}rescale(){if(!this.isValid)return this;let e=ND(this.normalize().shiftToAll().toObject());return On(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(u=>X.normalizeUnit(u));let n={},r={},i=this.toObject(),o;for(let u of Jn)if(e.indexOf(u)>=0){o=u;let f=0;for(let p in r)f+=this.matrix[p][u]*r[p],r[p]=0;Qn(i[u])&&(f+=i[u]);let d=Math.trunc(f);n[u]=d,r[u]=(f*1e3-d*1e3)/1e3}else Qn(i[u])&&(r[u]=i[u]);for(let u in r)r[u]!==0&&(n[o]+=u===o?r[u]:r[u]/this.matrix[o][u]);return Jf(this.matrix,n),On(this,{values:n},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;let e={};for(let n of Object.keys(this.values))e[n]=this.values[n]===0?0:-this.values[n];return On(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function n(r,i){return r===void 0||r===0?i===void 0||i===0:r===i}for(let r of Jn)if(!n(this.values[r],e.values[r]))return!1;return!0}},Cr="Invalid Interval";function BD(t,e){return!t||!t.isValid?Oe.invalid("missing or invalid start"):!e||!e.isValid?Oe.invalid("missing or invalid end"):e<t?Oe.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}var Oe=class{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,n=null){if(!e)throw new ct("need to specify a reason the Interval is invalid");let r=e instanceof pt?e:new pt(e,n);if(Pe.throwOnInvalid)throw new du(r);return new Oe({invalid:r})}static fromDateTimes(e,n){let r=gi(e),i=gi(n),o=BD(r,i);return o==null?new Oe({start:r,end:i}):o}static after(e,n){let r=X.fromDurationLike(n),i=gi(e);return Oe.fromDateTimes(i,i.plus(r))}static before(e,n){let r=X.fromDurationLike(n),i=gi(e);return Oe.fromDateTimes(i.minus(r),i)}static fromISO(e,n){let[r,i]=(e||"").split("/",2);if(r&&i){let o,u;try{o=ne.fromISO(r,n),u=o.isValid}catch(p){u=!1}let f,d;try{f=ne.fromISO(i,n),d=f.isValid}catch(p){d=!1}if(u&&d)return Oe.fromDateTimes(o,f);if(u){let p=X.fromISO(i,n);if(p.isValid)return Oe.after(o,p)}else if(d){let p=X.fromISO(r,n);if(p.isValid)return Oe.before(f,p)}}return Oe.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds"){if(!this.isValid)return NaN;let n=this.start.startOf(e),r=this.end.startOf(e);return Math.floor(r.diff(n,e).get(e))+(r.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:n}={}){return this.isValid?Oe.fromDateTimes(e||this.s,n||this.e):this}splitAt(...e){if(!this.isValid)return[];let n=e.map(gi).filter(u=>this.contains(u)).sort(),r=[],{s:i}=this,o=0;for(;i<this.e;){let u=n[o]||this.e,f=+u>+this.e?this.e:u;r.push(Oe.fromDateTimes(i,f)),i=f,o+=1}return r}splitBy(e){let n=X.fromDurationLike(e);if(!this.isValid||!n.isValid||n.as("milliseconds")===0)return[];let{s:r}=this,i=1,o,u=[];for(;r<this.e;){let f=this.start.plus(n.mapUnits(d=>d*i));o=+f>+this.e?this.e:f,u.push(Oe.fromDateTimes(r,o)),r=o,i+=1}return u}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;let n=this.s>e.s?this.s:e.s,r=this.e<e.e?this.e:e.e;return n>=r?null:Oe.fromDateTimes(n,r)}union(e){if(!this.isValid)return this;let n=this.s<e.s?this.s:e.s,r=this.e>e.e?this.e:e.e;return Oe.fromDateTimes(n,r)}static merge(e){let[n,r]=e.sort((i,o)=>i.s-o.s).reduce(([i,o],u)=>o?o.overlaps(u)||o.abutsStart(u)?[i,o.union(u)]:[i.concat([o]),u]:[i,u],[[],null]);return r&&n.push(r),n}static xor(e){let n=null,r=0,i=[],o=e.map(d=>[{time:d.s,type:"s"},{time:d.e,type:"e"}]),u=Array.prototype.concat(...o),f=u.sort((d,p)=>d.time-p.time);for(let d of f)r+=d.type==="s"?1:-1,r===1?n=d.time:(n&&+n!=+d.time&&i.push(Oe.fromDateTimes(n,d.time)),n=null);return Oe.merge(i)}difference(...e){return Oe.xor([this].concat(e)).map(n=>this.intersection(n)).filter(n=>n&&!n.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:Cr}toLocaleString(e=ta,n={}){return this.isValid?Ue.create(this.s.loc.clone(n),e).formatInterval(this):Cr}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:Cr}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Cr}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:Cr}toFormat(e,{separator:n=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(e)}${n}${this.e.toFormat(e)}`:Cr}toDuration(e,n){return this.isValid?this.e.diff(this.s,e,n):X.invalid(this.invalidReason)}mapEndpoints(e){return Oe.fromDateTimes(e(this.s),e(this.e))}},Fr=class{static hasDST(e=Pe.defaultZone){let n=ne.now().setZone(e).set({month:12});return!e.isUniversal&&n.offset!==n.set({month:6}).offset}static isValidIANAZone(e){return Rt.isValidZone(e)}static normalizeZone(e){return Mn(e,Pe.defaultZone)}static months(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null,outputCalendar:o="gregory"}={}){return(i||_e.create(n,r,o)).months(e)}static monthsFormat(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null,outputCalendar:o="gregory"}={}){return(i||_e.create(n,r,o)).months(e,!0)}static weekdays(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null}={}){return(i||_e.create(n,r,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null}={}){return(i||_e.create(n,r,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return _e.create(e).meridiems()}static eras(e="short",{locale:n=null}={}){return _e.create(n,null,"gregory").eras(e)}static features(){return{relative:Ph()}}};function Qf(t,e){let n=i=>i.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=n(e)-n(t);return Math.floor(X.fromMillis(r).as("days"))}function LD(t,e,n){let r=[["years",(d,p)=>p.year-d.year],["quarters",(d,p)=>p.quarter-d.quarter+(p.year-d.year)*4],["months",(d,p)=>p.month-d.month+(p.year-d.year)*12],["weeks",(d,p)=>{let E=Qf(d,p);return(E-E%7)/7}],["days",Qf]],i={},o=t,u,f;for(let[d,p]of r)n.indexOf(d)>=0&&(u=d,i[d]=p(t,e),f=o.plus(i),f>e?(i[d]--,t=o.plus(i),t>e&&(f=t,i[d]--,t=o.plus(i))):t=f);return[t,i,f,u]}function RD(t,e,n,r){let[i,o,u,f]=LD(t,e,n),d=e-i,p=n.filter(y=>["hours","minutes","seconds","milliseconds"].indexOf(y)>=0);p.length===0&&(u<e&&(u=i.plus({[f]:1})),u!==i&&(o[f]=(o[f]||0)+d/(u-i)));let E=X.fromObject(o,r);return p.length>0?X.fromMillis(d,r).shiftTo(...p).plus(E):E}var Nu={arab:"[\u0660-\u0669]",arabext:"[\u06F0-\u06F9]",bali:"[\u1B50-\u1B59]",beng:"[\u09E6-\u09EF]",deva:"[\u0966-\u096F]",fullwide:"[\uFF10-\uFF19]",gujr:"[\u0AE6-\u0AEF]",hanidec:"[\u3007|\u4E00|\u4E8C|\u4E09|\u56DB|\u4E94|\u516D|\u4E03|\u516B|\u4E5D]",khmr:"[\u17E0-\u17E9]",knda:"[\u0CE6-\u0CEF]",laoo:"[\u0ED0-\u0ED9]",limb:"[\u1946-\u194F]",mlym:"[\u0D66-\u0D6F]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0B66-\u0B6F]",tamldec:"[\u0BE6-\u0BEF]",telu:"[\u0C66-\u0C6F]",thai:"[\u0E50-\u0E59]",tibt:"[\u0F20-\u0F29]",latn:"\\d"},$f={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},HD=Nu.hanidec.replace(/[\[|\]]/g,"").split("");function VD(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(t[n].search(Nu.hanidec)!==-1)e+=HD.indexOf(t[n]);else for(let i in $f){let[o,u]=$f[i];r>=o&&r<=u&&(e+=r-o)}}return parseInt(e,10)}else return e}function Pt({numberingSystem:t},e=""){return new RegExp(`${Nu[t||"latn"]}${e}`)}var GD="missing Intl.DateTimeFormat.formatToParts support";function Fe(t,e=n=>n){return{regex:t,deser:([n])=>e(VD(n))}}var KD=String.fromCharCode(160),$h=`[ ${KD}]`,Xh=new RegExp($h,"g");function qD(t){return t.replace(/\./g,"\\.?").replace(Xh,$h)}function Xf(t){return t.replace(/\./g,"").replace(Xh," ").toLowerCase()}function Nt(t,e){return t===null?null:{regex:RegExp(t.map(qD).join("|")),deser:([n])=>t.findIndex(r=>Xf(n)===Xf(r))+e}}function eh(t,e){return{regex:t,deser:([,n,r])=>ca(n,r),groups:e}}function Ys(t){return{regex:t,deser:([e])=>e}}function jD(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function UD(t,e){let n=Pt(e),r=Pt(e,"{2}"),i=Pt(e,"{3}"),o=Pt(e,"{4}"),u=Pt(e,"{6}"),f=Pt(e,"{1,2}"),d=Pt(e,"{1,3}"),p=Pt(e,"{1,6}"),E=Pt(e,"{1,9}"),y=Pt(e,"{2,4}"),_=Pt(e,"{4,6}"),M=ye=>({regex:RegExp(jD(ye.val)),deser:([ve])=>ve,literal:!0}),ue=(ye=>{if(t.literal)return M(ye);switch(ye.val){case"G":return Nt(e.eras("short"),0);case"GG":return Nt(e.eras("long"),0);case"y":return Fe(p);case"yy":return Fe(y,Cu);case"yyyy":return Fe(o);case"yyyyy":return Fe(_);case"yyyyyy":return Fe(u);case"M":return Fe(f);case"MM":return Fe(r);case"MMM":return Nt(e.months("short",!0),1);case"MMMM":return Nt(e.months("long",!0),1);case"L":return Fe(f);case"LL":return Fe(r);case"LLL":return Nt(e.months("short",!1),1);case"LLLL":return Nt(e.months("long",!1),1);case"d":return Fe(f);case"dd":return Fe(r);case"o":return Fe(d);case"ooo":return Fe(i);case"HH":return Fe(r);case"H":return Fe(f);case"hh":return Fe(r);case"h":return Fe(f);case"mm":return Fe(r);case"m":return Fe(f);case"q":return Fe(f);case"qq":return Fe(r);case"s":return Fe(f);case"ss":return Fe(r);case"S":return Fe(d);case"SSS":return Fe(i);case"u":return Ys(E);case"uu":return Ys(f);case"uuu":return Fe(n);case"a":return Nt(e.meridiems(),0);case"kkkk":return Fe(o);case"kk":return Fe(y,Cu);case"W":return Fe(f);case"WW":return Fe(r);case"E":case"c":return Fe(n);case"EEE":return Nt(e.weekdays("short",!1),1);case"EEEE":return Nt(e.weekdays("long",!1),1);case"ccc":return Nt(e.weekdays("short",!0),1);case"cccc":return Nt(e.weekdays("long",!0),1);case"Z":case"ZZ":return eh(new RegExp(`([+-]${f.source})(?::(${r.source}))?`),2);case"ZZZ":return eh(new RegExp(`([+-]${f.source})(${r.source})?`),2);case"z":return Ys(/[a-z_+-/]{1,256}?/i);case" ":return Ys(/[^\S\n\r]/);default:return M(ye)}})(t)||{invalidReason:GD};return ue.token=t,ue}var WD={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function zD(t,e,n){let{type:r,value:i}=t;if(r==="literal"){let d=/^\s+$/.test(i);return{literal:!d,val:d?" ":i}}let o=e[r],u=r;r==="hour"&&(e.hour12!=null?u=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?u="hour12":u="hour24":u=n.hour12?"hour12":"hour24");let f=WD[u];if(typeof f=="object"&&(f=f[o]),f)return{literal:!1,val:f}}function YD(t){return[`^${t.map(n=>n.regex).reduce((n,r)=>`${n}(${r.source})`,"")}$`,t]}function ZD(t,e,n){let r=t.match(e);if(r){let i={},o=1;for(let u in n)if(kr(n,u)){let f=n[u],d=f.groups?f.groups+1:1;!f.literal&&f.token&&(i[f.token.val[0]]=f.deser(r.slice(o,o+d))),o+=d}return[r,i]}else return[r,{}]}function JD(t){let e=o=>{switch(o){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}},n=null,r;return ge(t.z)||(n=Rt.create(t.z)),ge(t.Z)||(n||(n=new Ze(t.Z)),r=t.Z),ge(t.q)||(t.M=(t.q-1)*3+1),ge(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),ge(t.u)||(t.S=Tu(t.u)),[Object.keys(t).reduce((o,u)=>{let f=e(u);return f&&(o[f]=t[u]),o},{}),n,r]}var ou=null;function QD(){return ou||(ou=ne.fromMillis(1555555555555)),ou}function $D(t,e){if(t.literal)return t;let n=Ue.macroTokenToFormatOpts(t.val),r=nd(n,e);return r==null||r.includes(void 0)?t:r}function ed(t,e){return Array.prototype.concat(...t.map(n=>$D(n,e)))}function td(t,e,n){let r=ed(Ue.parseFormat(n),t),i=r.map(u=>UD(u,t)),o=i.find(u=>u.invalidReason);if(o)return{input:e,tokens:r,invalidReason:o.invalidReason};{let[u,f]=YD(i),d=RegExp(u,"i"),[p,E]=ZD(e,d,f),[y,_,M]=E?JD(E):[null,null,void 0];if(kr(E,"a")&&kr(E,"H"))throw new Zn("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:r,regex:d,rawMatches:p,matches:E,result:y,zone:_,specificOffset:M}}}function XD(t,e,n){let{result:r,zone:i,specificOffset:o,invalidReason:u}=td(t,e,n);return[r,i,o,u]}function nd(t,e){if(!t)return null;let r=Ue.create(e,t).dtFormatter(QD()),i=r.formatToParts(),o=r.resolvedOptions();return i.map(u=>zD(u,t,o))}var rd=[0,31,59,90,120,151,181,212,243,273,304,334],id=[0,31,60,91,121,152,182,213,244,274,305,335];function _t(t,e){return new pt("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function sd(t,e,n){let r=new Date(Date.UTC(t,e-1,n));t<100&&t>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);let i=r.getUTCDay();return i===0?7:i}function ad(t,e,n){return n+(_i(t)?id:rd)[e-1]}function od(t,e){let n=_i(t)?id:rd,r=n.findIndex(o=>o<e),i=e-n[r];return{month:r+1,day:i}}function Fu(t){let{year:e,month:n,day:r}=t,i=ad(e,n,r),o=sd(e,n,r),u=Math.floor((i-o+10)/7),f;return u<1?(f=e-1,u=ra(f)):u>ra(e)?(f=e+1,u=1):f=e,{weekYear:f,weekNumber:u,weekday:o,...fa(t)}}function th(t){let{weekYear:e,weekNumber:n,weekday:r}=t,i=sd(e,1,4),o=Di(e),u=n*7+r-i-3,f;u<1?(f=e-1,u+=Di(f)):u>o?(f=e+1,u-=Di(e)):f=e;let{month:d,day:p}=od(f,u);return{year:f,month:d,day:p,...fa(t)}}function uu(t){let{year:e,month:n,day:r}=t,i=ad(e,n,r);return{year:e,ordinal:i,...fa(t)}}function nh(t){let{year:e,ordinal:n}=t,{month:r,day:i}=od(e,n);return{year:e,month:r,day:i,...fa(t)}}function e2(t){let e=ua(t.weekYear),n=hn(t.weekNumber,1,ra(t.weekYear)),r=hn(t.weekday,1,7);return e?n?r?!1:_t("weekday",t.weekday):_t("week",t.week):_t("weekYear",t.weekYear)}function t2(t){let e=ua(t.year),n=hn(t.ordinal,1,Di(t.year));return e?n?!1:_t("ordinal",t.ordinal):_t("year",t.year)}function ud(t){let e=ua(t.year),n=hn(t.month,1,12),r=hn(t.day,1,na(t.year,t.month));return e?n?r?!1:_t("day",t.day):_t("month",t.month):_t("year",t.year)}function ld(t){let{hour:e,minute:n,second:r,millisecond:i}=t,o=hn(e,0,23)||e===24&&n===0&&r===0&&i===0,u=hn(n,0,59),f=hn(r,0,59),d=hn(i,0,999);return o?u?f?d?!1:_t("millisecond",i):_t("second",r):_t("minute",n):_t("hour",e)}var lu="Invalid DateTime",rh=864e13;function Zs(t){return new pt("unsupported zone",`the zone "${t.name}" is not supported`)}function cu(t){return t.weekData===null&&(t.weekData=Fu(t.c)),t.weekData}function Yn(t,e){let n={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new ne({...n,...e,old:n})}function cd(t,e,n){let r=t-e*60*1e3,i=n.offset(r);if(e===i)return[r,e];r-=(i-e)*60*1e3;let o=n.offset(r);return i===o?[r,i]:[t-Math.min(i,o)*60*1e3,Math.max(i,o)]}function Js(t,e){t+=e*60*1e3;let n=new Date(t);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds()}}function Xs(t,e,n){return cd(la(t),e,n)}function ih(t,e){let n=t.o,r=t.c.year+Math.trunc(e.years),i=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,o={...t.c,year:r,month:i,day:Math.min(t.c.day,na(r,i))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},u=X.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),f=la(o),[d,p]=cd(f,n,t.zone);return u!==0&&(d+=u,p=t.zone.offset(d)),{ts:d,o:p}}function mi(t,e,n,r,i,o){let{setZone:u,zone:f}=n;if(t&&Object.keys(t).length!==0||e){let d=e||f,p=ne.fromObject(t,{...n,zone:d,specificOffset:o});return u?p:p.setZone(f)}else return ne.invalid(new pt("unparsable",`the input "${i}" can't be parsed as ${r}`))}function Qs(t,e,n=!0){return t.isValid?Ue.create(_e.create("en-US"),{allowZ:n,forceSimple:!0}).formatDateTimeFromString(t,e):null}function fu(t,e){let n=t.c.year>9999||t.c.year<0,r="";return n&&t.c.year>=0&&(r+="+"),r+=He(t.c.year,n?6:4),e?(r+="-",r+=He(t.c.month),r+="-",r+=He(t.c.day)):(r+=He(t.c.month),r+=He(t.c.day)),r}function sh(t,e,n,r,i,o){let u=He(t.c.hour);return e?(u+=":",u+=He(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!n)&&(u+=":")):u+=He(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!n)&&(u+=He(t.c.second),(t.c.millisecond!==0||!r)&&(u+=".",u+=He(t.c.millisecond,3))),i&&(t.isOffsetFixed&&t.offset===0&&!o?u+="Z":t.o<0?(u+="-",u+=He(Math.trunc(-t.o/60)),u+=":",u+=He(Math.trunc(-t.o%60))):(u+="+",u+=He(Math.trunc(t.o/60)),u+=":",u+=He(Math.trunc(t.o%60)))),o&&(u+="["+t.zone.ianaName+"]"),u}var fd={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},n2={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},r2={ordinal:1,hour:0,minute:0,second:0,millisecond:0},hd=["year","month","day","hour","minute","second","millisecond"],i2=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],s2=["year","ordinal","hour","minute","second","millisecond"];function ah(t){let e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new ea(t);return e}function oh(t,e){let n=Mn(e.zone,Pe.defaultZone),r=_e.fromObject(e),i=Pe.now(),o,u;if(ge(t.year))o=i;else{for(let p of hd)ge(t[p])&&(t[p]=fd[p]);let f=ud(t)||ld(t);if(f)return ne.invalid(f);let d=n.offset(i);[o,u]=Xs(t,d,n)}return new ne({ts:o,zone:n,loc:r,o:u})}function uh(t,e,n){let r=ge(n.round)?!0:n.round,i=(u,f)=>(u=Mu(u,r||n.calendary?0:2,!0),e.loc.clone(n).relFormatter(n).format(u,f)),o=u=>n.calendary?e.hasSame(t,u)?0:e.startOf(u).diff(t.startOf(u),u).get(u):e.diff(t,u).get(u);if(n.unit)return i(o(n.unit),n.unit);for(let u of n.units){let f=o(u);if(Math.abs(f)>=1)return i(f,u)}return i(t>e?-0:0,n.units[n.units.length-1])}function lh(t){let e={},n;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],n=Array.from(t).slice(0,t.length-1)):n=Array.from(t),[e,n]}var ne=class{constructor(e){let n=e.zone||Pe.defaultZone,r=e.invalid||(Number.isNaN(e.ts)?new pt("invalid input"):null)||(n.isValid?null:Zs(n));this.ts=ge(e.ts)?Pe.now():e.ts;let i=null,o=null;if(!r)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(n))[i,o]=[e.old.c,e.old.o];else{let f=n.offset(this.ts);i=Js(this.ts,f),r=Number.isNaN(i.year)?new pt("invalid input"):null,i=r?null:i,o=r?null:f}this._zone=n,this.loc=e.loc||_e.create(),this.invalid=r,this.weekData=null,this.c=i,this.o=o,this.isLuxonDateTime=!0}static now(){return new ne({})}static local(){let[e,n]=lh(arguments),[r,i,o,u,f,d,p]=n;return oh({year:r,month:i,day:o,hour:u,minute:f,second:d,millisecond:p},e)}static utc(){let[e,n]=lh(arguments),[r,i,o,u,f,d,p]=n;return e.zone=Ze.utcInstance,oh({year:r,month:i,day:o,hour:u,minute:f,second:d,millisecond:p},e)}static fromJSDate(e,n={}){let r=Iv(e)?e.valueOf():NaN;if(Number.isNaN(r))return ne.invalid("invalid input");let i=Mn(n.zone,Pe.defaultZone);return i.isValid?new ne({ts:r,zone:i,loc:_e.fromObject(n)}):ne.invalid(Zs(i))}static fromMillis(e,n={}){if(Qn(e))return e<-rh||e>rh?ne.invalid("Timestamp out of range"):new ne({ts:e,zone:Mn(n.zone,Pe.defaultZone),loc:_e.fromObject(n)});throw new ct(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,n={}){if(Qn(e))return new ne({ts:e*1e3,zone:Mn(n.zone,Pe.defaultZone),loc:_e.fromObject(n)});throw new ct("fromSeconds requires a numerical input")}static fromObject(e,n={}){e=e||{};let r=Mn(n.zone,Pe.defaultZone);if(!r.isValid)return ne.invalid(Zs(r));let i=Pe.now(),o=ge(n.specificOffset)?r.offset(i):n.specificOffset,u=ia(e,ah),f=!ge(u.ordinal),d=!ge(u.year),p=!ge(u.month)||!ge(u.day),E=d||p,y=u.weekYear||u.weekNumber,_=_e.fromObject(n);if((E||f)&&y)throw new Zn("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(p&&f)throw new Zn("Can't mix ordinal dates with month/day");let M=y||u.weekday&&!E,K,ue,ye=Js(i,o);M?(K=i2,ue=n2,ye=Fu(ye)):f?(K=s2,ue=r2,ye=uu(ye)):(K=hd,ue=fd);let ve=!1;for(let ce of K){let fe=u[ce];ge(fe)?ve?u[ce]=ue[ce]:u[ce]=ye[ce]:ve=!0}let Te=M?e2(u):f?t2(u):ud(u),Ve=Te||ld(u);if(Ve)return ne.invalid(Ve);let R=M?th(u):f?nh(u):u,[ae,we]=Xs(R,o,r),J=new ne({ts:ae,zone:r,o:we,loc:_});return u.weekday&&E&&e.weekday!==J.weekday?ne.invalid("mismatched weekday",`you can't specify both a weekday of ${u.weekday} and a date of ${J.toISO()}`):J}static fromISO(e,n={}){let[r,i]=ED(e);return mi(r,i,n,"ISO 8601",e)}static fromRFC2822(e,n={}){let[r,i]=CD(e);return mi(r,i,n,"RFC 2822",e)}static fromHTTP(e,n={}){let[r,i]=FD(e);return mi(r,i,n,"HTTP",n)}static fromFormat(e,n,r={}){if(ge(e)||ge(n))throw new ct("fromFormat requires an input string and a format");let{locale:i=null,numberingSystem:o=null}=r,u=_e.fromOpts({locale:i,numberingSystem:o,defaultToEN:!0}),[f,d,p,E]=XD(u,e,n);return E?ne.invalid(E):mi(f,d,r,`format ${n}`,e,p)}static fromString(e,n,r={}){return ne.fromFormat(e,n,r)}static fromSQL(e,n={}){let[r,i]=MD(e);return mi(r,i,n,"SQL",e)}static invalid(e,n=null){if(!e)throw new ct("need to specify a reason the DateTime is invalid");let r=e instanceof pt?e:new pt(e,n);if(Pe.throwOnInvalid)throw new hu(r);return new ne({invalid:r})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,n={}){let r=nd(e,_e.fromObject(n));return r?r.map(i=>i?i.val:null).join(""):null}static expandFormat(e,n={}){return ed(Ue.parseFormat(e),_e.fromObject(n)).map(i=>i.val).join("")}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?cu(this).weekYear:NaN}get weekNumber(){return this.isValid?cu(this).weekNumber:NaN}get weekday(){return this.isValid?cu(this).weekday:NaN}get ordinal(){return this.isValid?uu(this.c).ordinal:NaN}get monthShort(){return this.isValid?Fr.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Fr.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Fr.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Fr.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];let e=864e5,n=6e4,r=la(this.c),i=this.zone.offset(r-e),o=this.zone.offset(r+e),u=this.zone.offset(r-i*n),f=this.zone.offset(r-o*n);if(u===f)return[this];let d=r-u*n,p=r-f*n,E=Js(d,u),y=Js(p,f);return E.hour===y.hour&&E.minute===y.minute&&E.second===y.second&&E.millisecond===y.millisecond?[Yn(this,{ts:d}),Yn(this,{ts:p})]:[this]}get isInLeapYear(){return _i(this.year)}get daysInMonth(){return na(this.year,this.month)}get daysInYear(){return this.isValid?Di(this.year):NaN}get weeksInWeekYear(){return this.isValid?ra(this.weekYear):NaN}resolvedLocaleOptions(e={}){let{locale:n,numberingSystem:r,calendar:i}=Ue.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:n,numberingSystem:r,outputCalendar:i}}toUTC(e=0,n={}){return this.setZone(Ze.instance(e),n)}toLocal(){return this.setZone(Pe.defaultZone)}setZone(e,{keepLocalTime:n=!1,keepCalendarTime:r=!1}={}){if(e=Mn(e,Pe.defaultZone),e.equals(this.zone))return this;if(e.isValid){let i=this.ts;if(n||r){let o=e.offset(this.ts),u=this.toObject();[i]=Xs(u,o,e)}return Yn(this,{ts:i,zone:e})}else return ne.invalid(Zs(e))}reconfigure({locale:e,numberingSystem:n,outputCalendar:r}={}){let i=this.loc.clone({locale:e,numberingSystem:n,outputCalendar:r});return Yn(this,{loc:i})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;let n=ia(e,ah),r=!ge(n.weekYear)||!ge(n.weekNumber)||!ge(n.weekday),i=!ge(n.ordinal),o=!ge(n.year),u=!ge(n.month)||!ge(n.day),f=o||u,d=n.weekYear||n.weekNumber;if((f||i)&&d)throw new Zn("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(u&&i)throw new Zn("Can't mix ordinal dates with month/day");let p;r?p=th({...Fu(this.c),...n}):ge(n.ordinal)?(p={...this.toObject(),...n},ge(n.day)&&(p.day=Math.min(na(p.year,p.month),p.day))):p=nh({...uu(this.c),...n});let[E,y]=Xs(p,this.o,this.zone);return Yn(this,{ts:E,o:y})}plus(e){if(!this.isValid)return this;let n=X.fromDurationLike(e);return Yn(this,ih(this,n))}minus(e){if(!this.isValid)return this;let n=X.fromDurationLike(e).negate();return Yn(this,ih(this,n))}startOf(e){if(!this.isValid)return this;let n={},r=X.normalizeUnit(e);switch(r){case"years":n.month=1;case"quarters":case"months":n.day=1;case"weeks":case"days":n.hour=0;case"hours":n.minute=0;case"minutes":n.second=0;case"seconds":n.millisecond=0;break}if(r==="weeks"&&(n.weekday=1),r==="quarters"){let i=Math.ceil(this.month/3);n.month=(i-1)*3+1}return this.set(n)}endOf(e){return this.isValid?this.plus({[e]:1}).startOf(e).minus(1):this}toFormat(e,n={}){return this.isValid?Ue.create(this.loc.redefaultToEN(n)).formatDateTimeFromString(this,e):lu}toLocaleString(e=ta,n={}){return this.isValid?Ue.create(this.loc.clone(n),e).formatDateTime(this):lu}toLocaleParts(e={}){return this.isValid?Ue.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:n=!1,suppressMilliseconds:r=!1,includeOffset:i=!0,extendedZone:o=!1}={}){if(!this.isValid)return null;let u=e==="extended",f=fu(this,u);return f+="T",f+=sh(this,u,n,r,i,o),f}toISODate({format:e="extended"}={}){return this.isValid?fu(this,e==="extended"):null}toISOWeekDate(){return Qs(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:n=!1,includeOffset:r=!0,includePrefix:i=!1,extendedZone:o=!1,format:u="extended"}={}){return this.isValid?(i?"T":"")+sh(this,u==="extended",n,e,r,o):null}toRFC2822(){return Qs(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Qs(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?fu(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:n=!1,includeOffsetSpace:r=!0}={}){let i="HH:mm:ss.SSS";return(n||e)&&(r&&(i+=" "),n?i+="z":e&&(i+="ZZ")),Qs(this,i,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():lu}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};let n={...this.c};return e.includeConfig&&(n.outputCalendar=this.outputCalendar,n.numberingSystem=this.loc.numberingSystem,n.locale=this.loc.locale),n}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,n="milliseconds",r={}){if(!this.isValid||!e.isValid)return X.invalid("created by diffing an invalid DateTime");let i={locale:this.locale,numberingSystem:this.numberingSystem,...r},o=Pv(n).map(X.normalizeUnit),u=e.valueOf()>this.valueOf(),f=u?this:e,d=u?e:this,p=RD(f,d,o,i);return u?p.negate():p}diffNow(e="milliseconds",n={}){return this.diff(ne.now(),e,n)}until(e){return this.isValid?Oe.fromDateTimes(this,e):this}hasSame(e,n){if(!this.isValid)return!1;let r=e.valueOf(),i=this.setZone(e.zone,{keepLocalTime:!0});return i.startOf(n)<=r&&r<=i.endOf(n)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;let n=e.base||ne.fromObject({},{zone:this.zone}),r=e.padding?this<n?-e.padding:e.padding:0,i=["years","months","days","hours","minutes","seconds"],o=e.unit;return Array.isArray(e.unit)&&(i=e.unit,o=void 0),uh(n,this.plus(r),{...e,numeric:"always",units:i,unit:o})}toRelativeCalendar(e={}){return this.isValid?uh(e.base||ne.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(ne.isDateTime))throw new ct("min requires all arguments be DateTimes");return Wf(e,n=>n.valueOf(),Math.min)}static max(...e){if(!e.every(ne.isDateTime))throw new ct("max requires all arguments be DateTimes");return Wf(e,n=>n.valueOf(),Math.max)}static fromFormatExplain(e,n,r={}){let{locale:i=null,numberingSystem:o=null}=r,u=_e.fromOpts({locale:i,numberingSystem:o,defaultToEN:!0});return td(u,e,n)}static fromStringExplain(e,n,r={}){return ne.fromFormatExplain(e,n,r)}static get DATE_SHORT(){return ta}static get DATE_MED(){return mh}static get DATE_MED_WITH_WEEKDAY(){return yv}static get DATE_FULL(){return gh}static get DATE_HUGE(){return yh}static get TIME_SIMPLE(){return vh}static get TIME_WITH_SECONDS(){return Dh}static get TIME_WITH_SHORT_OFFSET(){return bh}static get TIME_WITH_LONG_OFFSET(){return wh}static get TIME_24_SIMPLE(){return Eh}static get TIME_24_WITH_SECONDS(){return Ch}static get TIME_24_WITH_SHORT_OFFSET(){return Fh}static get TIME_24_WITH_LONG_OFFSET(){return _h}static get DATETIME_SHORT(){return Sh}static get DATETIME_SHORT_WITH_SECONDS(){return kh}static get DATETIME_MED(){return xh}static get DATETIME_MED_WITH_SECONDS(){return Oh}static get DATETIME_MED_WITH_WEEKDAY(){return vv}static get DATETIME_FULL(){return Th}static get DATETIME_FULL_WITH_SECONDS(){return Mh}static get DATETIME_HUGE(){return Ah}static get DATETIME_HUGE_WITH_SECONDS(){return Ih}};function gi(t){if(ne.isDateTime(t))return t;if(t&&t.valueOf&&Qn(t.valueOf()))return ne.fromJSDate(t);if(t&&typeof t=="object")return ne.fromObject(t);throw new ct(`Unknown datetime argument: ${t}, of type ${typeof t}`)}var Bu={renderNullAs:"\\-",taskCompletionTracking:!1,taskCompletionUseEmojiShorthand:!1,taskCompletionText:"completion",taskCompletionDateFormat:"yyyy-MM-dd",recursiveSubTaskCompletion:!1,warnOnEmptyResult:!0,refreshEnabled:!0,refreshInterval:2500,defaultDateFormat:"MMMM dd, yyyy",defaultDateTimeFormat:"h:mm a - MMMM dd, yyyy",maxRecursiveRenderDepth:4,tableIdColumnName:"File",tableGroupColumnName:"Group",showResultCount:!0},a2={allowHtml:!0};({...Bu,...a2});var wi=class{constructor(e){this.value=e,this.successful=!0}map(e){return new wi(e(this.value))}flatMap(e){return e(this.value)}mapErr(e){return this}bimap(e,n){return this.map(e)}orElse(e){return this.value}cast(){return this}orElseThrow(e){return this.value}},Ei=class{constructor(e){this.error=e,this.successful=!1}map(e){return this}flatMap(e){return this}mapErr(e){return new Ei(e(this.error))}bimap(e,n){return this.mapErr(n)}orElse(e){return e}cast(){return this}orElseThrow(e){throw e?new Error(e(this.error)):new Error(""+this.error)}},sa;(function(t){function e(o){return new wi(o)}t.success=e;function n(o){return new Ei(o)}t.failure=n;function r(o,u,f){return o.successful?u.successful?f(o.value,u.value):n(u.error):n(o.error)}t.flatMap2=r;function i(o,u,f){return r(o,u,(d,p)=>e(f(d,p)))}t.map2=i})(sa||(sa={}));var o2=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},aa={exports:{}};aa.exports;(function(t,e){(function(n,r){t.exports=r()})(typeof self!="undefined"?self:o2,function(){return function(n){var r={};function i(o){if(r[o])return r[o].exports;var u=r[o]={i:o,l:!1,exports:{}};return n[o].call(u.exports,u,u.exports,i),u.l=!0,u.exports}return i.m=n,i.c=r,i.d=function(o,u,f){i.o(o,u)||Object.defineProperty(o,u,{configurable:!1,enumerable:!0,get:f})},i.r=function(o){Object.defineProperty(o,"__esModule",{value:!0})},i.n=function(o){var u=o&&o.__esModule?function(){return o.default}:function(){return o};return i.d(u,"a",u),u},i.o=function(o,u){return Object.prototype.hasOwnProperty.call(o,u)},i.p="",i(i.s=0)}([function(n,r,i){function o(v){if(!(this instanceof o))return new o(v);this._=v}var u=o.prototype;function f(v,F){for(var T=0;T<v;T++)F(T)}function d(v,F,T){return function(L,q){f(q.length,function(U){L(q[U],U,q)})}(function(L,q,U){F=v(F,L,q,U)},T),F}function p(v,F){return d(function(T,L,q,U){return T.concat([v(L,q,U)])},[],F)}function E(v,F){var T={v:0,buf:F};return f(v,function(){var L;T={v:T.v<<1|(L=T.buf,L[0]>>7),buf:function(q){var U=d(function(W,le,De,Le){return W.concat(De===Le.length-1?Buffer.from([le,0]).readUInt16BE(0):Le.readUInt16BE(De))},[],q);return Buffer.from(p(function(W){return(W<<1&65535)>>8},U))}(T.buf)}}),T}function y(){return typeof Buffer!="undefined"}function _(){if(!y())throw new Error("Buffer global does not exist; please use webpack if you need to parse Buffers in the browser.")}function M(v){_();var F=d(function(U,W){return U+W},0,v);if(F%8!=0)throw new Error("The bits ["+v.join(", ")+"] add up to "+F+" which is not an even number of bytes; the total should be divisible by 8");var T,L=F/8,q=(T=function(U){return U>48},d(function(U,W){return U||(T(W)?W:U)},null,v));if(q)throw new Error(q+" bit range requested exceeds 48 bit (6 byte) Number max.");return new o(function(U,W){var le=L+W;return le>U.length?ce(W,L.toString()+" bytes"):J(le,d(function(De,Le){var Ne=E(Le,De.buf);return{coll:De.coll.concat(Ne.v),buf:Ne.buf}},{coll:[],buf:U.slice(W,le)},v).coll)})}function K(v,F){return new o(function(T,L){return _(),L+F>T.length?ce(L,F+" bytes for "+v):J(L+F,T.slice(L,L+F))})}function ue(v,F){if(typeof(T=F)!="number"||Math.floor(T)!==T||F<0||F>6)throw new Error(v+" requires integer length in range [0, 6].");var T}function ye(v){return ue("uintBE",v),K("uintBE("+v+")",v).map(function(F){return F.readUIntBE(0,v)})}function ve(v){return ue("uintLE",v),K("uintLE("+v+")",v).map(function(F){return F.readUIntLE(0,v)})}function Te(v){return ue("intBE",v),K("intBE("+v+")",v).map(function(F){return F.readIntBE(0,v)})}function Ve(v){return ue("intLE",v),K("intLE("+v+")",v).map(function(F){return F.readIntLE(0,v)})}function R(v){return v instanceof o}function ae(v){return{}.toString.call(v)==="[object Array]"}function we(v){return y()&&Buffer.isBuffer(v)}function J(v,F){return{status:!0,index:v,value:F,furthest:-1,expected:[]}}function ce(v,F){return ae(F)||(F=[F]),{status:!1,index:-1,value:null,furthest:v,expected:F}}function fe(v,F){if(!F||v.furthest>F.furthest)return v;var T=v.furthest===F.furthest?function(L,q){if(function(){if(o._supportsSet!==void 0)return o._supportsSet;var it=typeof Set!="undefined";return o._supportsSet=it,it}()&&Array.from){for(var U=new Set(L),W=0;W<q.length;W++)U.add(q[W]);var le=Array.from(U);return le.sort(),le}for(var De={},Le=0;Le<L.length;Le++)De[L[Le]]=!0;for(var Ne=0;Ne<q.length;Ne++)De[q[Ne]]=!0;var Ke=[];for(var $ in De)({}).hasOwnProperty.call(De,$)&&Ke.push($);return Ke.sort(),Ke}(v.expected,F.expected):F.expected;return{status:v.status,index:v.index,value:v.value,furthest:F.furthest,expected:T}}var Ce={};function Je(v,F){if(we(v))return{offset:F,line:-1,column:-1};v in Ce||(Ce[v]={});for(var T=Ce[v],L=0,q=0,U=0,W=F;W>=0;){if(W in T){L=T[W].line,U===0&&(U=T[W].lineStart);break}(v.charAt(W)===`
`||v.charAt(W)==="\r"&&v.charAt(W+1)!==`
`)&&(q++,U===0&&(U=W+1)),W--}var le=L+q,De=F-U;return T[F]={line:le,lineStart:U},{offset:F,line:le+1,column:De+1}}function Se(v){if(!R(v))throw new Error("not a parser: "+v)}function gt(v,F){return typeof v=="string"?v.charAt(F):v[F]}function We(v){if(typeof v!="number")throw new Error("not a number: "+v)}function ze(v){if(typeof v!="function")throw new Error("not a function: "+v)}function Me(v){if(typeof v!="string")throw new Error("not a string: "+v)}var kt=2,yt=3,rt=8,An=5*rt,mn=4*rt,$t="  ";function Qe(v,F){return new Array(F+1).join(v)}function Ge(v,F,T){var L=F-v.length;return L<=0?v:Qe(T,L)+v}function Xt(v,F,T,L){return{from:v-F>0?v-F:0,to:v+T>L?L:v+T}}function xt(v,F){var T,L,q,U,W,le=F.index,De=le.offset,Le=1;if(De===v.length)return"Got the end of the input";if(we(v)){var Ne=De-De%rt,Ke=De-Ne,$=Xt(Ne,An,mn+rt,v.length),it=p(function(j){return p(function(Vt){return Ge(Vt.toString(16),2,"0")},j)},function(j,Vt){var nn=j.length,Gt=[],Kt=0;if(nn<=Vt)return[j.slice()];for(var rn=0;rn<nn;rn++)Gt[Kt]||Gt.push([]),Gt[Kt].push(j[rn]),(rn+1)%Vt==0&&Kt++;return Gt}(v.slice($.from,$.to).toJSON().data,rt));U=function(j){return j.from===0&&j.to===1?{from:j.from,to:j.to}:{from:j.from/rt,to:Math.floor(j.to/rt)}}($),L=Ne/rt,T=3*Ke,Ke>=4&&(T+=1),Le=2,q=p(function(j){return j.length<=4?j.join(" "):j.slice(0,4).join(" ")+"  "+j.slice(4).join(" ")},it),(W=(8*(U.to>0?U.to-1:U.to)).toString(16).length)<2&&(W=2)}else{var at=v.split(/\r\n|[\n\r\u2028\u2029]/);T=le.column-1,L=le.line-1,U=Xt(L,kt,yt,at.length),q=at.slice(U.from,U.to),W=U.to.toString().length}var sr=L-U.from;return we(v)&&(W=(8*(U.to>0?U.to-1:U.to)).toString(16).length)<2&&(W=2),d(function(j,Vt,nn){var Gt,Kt=nn===sr,rn=Kt?"> ":$t;return Gt=we(v)?Ge((8*(U.from+nn)).toString(16),W,"0"):Ge((U.from+nn+1).toString(),W," "),[].concat(j,[rn+Gt+" | "+Vt],Kt?[$t+Qe(" ",W)+" | "+Ge("",T," ")+Qe("^",Le)]:[])},[],q).join(`
`)}function Xn(v,F){return[`
`,"-- PARSING FAILED "+Qe("-",50),`

`,xt(v,F),`

`,(T=F.expected,T.length===1?`Expected:

`+T[0]:`Expected one of the following: 

`+T.join(", ")),`
`].join("");var T}function Oi(v){return v.flags!==void 0?v.flags:[v.global?"g":"",v.ignoreCase?"i":"",v.multiline?"m":"",v.unicode?"u":"",v.sticky?"y":""].join("")}function In(){for(var v=[].slice.call(arguments),F=v.length,T=0;T<F;T+=1)Se(v[T]);return o(function(L,q){for(var U,W=new Array(F),le=0;le<F;le+=1){if(!(U=fe(v[le]._(L,q),U)).status)return U;W[le]=U.value,q=U.index}return fe(J(q,W),U)})}function Ot(){var v=[].slice.call(arguments);if(v.length===0)throw new Error("seqMap needs at least one argument");var F=v.pop();return ze(F),In.apply(null,v).map(function(T){return F.apply(null,T)})}function er(){var v=[].slice.call(arguments),F=v.length;if(F===0)return nr("zero alternates");for(var T=0;T<F;T+=1)Se(v[T]);return o(function(L,q){for(var U,W=0;W<v.length;W+=1)if((U=fe(v[W]._(L,q),U)).status)return U;return U})}function en(v,F){return tr(v,F).or(Tt([]))}function tr(v,F){return Se(v),Se(F),Ot(v,F.then(v).many(),function(T,L){return[T].concat(L)})}function Ht(v){Me(v);var F="'"+v+"'";return o(function(T,L){var q=L+v.length,U=T.slice(L,q);return U===v?J(q,U):ce(L,F)})}function $e(v,F){(function(q){if(!(q instanceof RegExp))throw new Error("not a regexp: "+q);for(var U=Oi(q),W=0;W<U.length;W++){var le=U.charAt(W);if(le!=="i"&&le!=="m"&&le!=="u"&&le!=="s")throw new Error('unsupported regexp flag "'+le+'": '+q)}})(v),arguments.length>=2?We(F):F=0;var T=function(q){return RegExp("^(?:"+q.source+")",Oi(q))}(v),L=""+v;return o(function(q,U){var W=T.exec(q.slice(U));if(W){if(0<=F&&F<=W.length){var le=W[0],De=W[F];return J(U+le.length,De)}return ce(U,"valid match group (0 to "+W.length+") in "+L)}return ce(U,L)})}function Tt(v){return o(function(F,T){return J(T,v)})}function nr(v){return o(function(F,T){return ce(T,v)})}function re(v){if(R(v))return o(function(F,T){var L=v._(F,T);return L.index=T,L.value="",L});if(typeof v=="string")return re(Ht(v));if(v instanceof RegExp)return re($e(v));throw new Error("not a string, regexp, or parser: "+v)}function Nr(v){return Se(v),o(function(F,T){var L=v._(F,T),q=F.slice(T,L.index);return L.status?ce(T,'not "'+q+'"'):J(T,null)})}function rr(v){return ze(v),o(function(F,T){var L=gt(F,T);return T<F.length&&v(L)?J(T+1,L):ce(T,"a character/byte matching "+v)})}function Pn(v,F){arguments.length<2&&(F=v,v=void 0);var T=o(function(L,q){return T._=F()._,T._(L,q)});return v?T.desc(v):T}function Ee(){return nr("fantasy-land/empty")}u.parse=function(v){if(typeof v!="string"&&!we(v))throw new Error(".parse must be called with a string or Buffer as its argument");var F,T=this.skip(Br)._(v,0);return F=T.status?{status:!0,value:T.value}:{status:!1,index:Je(v,T.furthest),expected:T.expected},delete Ce[v],F},u.tryParse=function(v){var F=this.parse(v);if(F.status)return F.value;var T=Xn(v,F),L=new Error(T);throw L.type="ParsimmonError",L.result=F,L},u.assert=function(v,F){return this.chain(function(T){return v(T)?Tt(T):nr(F)})},u.or=function(v){return er(this,v)},u.trim=function(v){return this.wrap(v,v)},u.wrap=function(v,F){return Ot(v,this,F,function(T,L){return L})},u.thru=function(v){return v(this)},u.then=function(v){return Se(v),In(this,v).map(function(F){return F[1]})},u.many=function(){var v=this;return o(function(F,T){for(var L=[],q=void 0;;){if(!(q=fe(v._(F,T),q)).status)return fe(J(T,L),q);if(T===q.index)throw new Error("infinite loop detected in .many() parser --- calling .many() on a parser which can accept zero characters is usually the cause");T=q.index,L.push(q.value)}})},u.tieWith=function(v){return Me(v),this.map(function(F){if(function(q){if(!ae(q))throw new Error("not an array: "+q)}(F),F.length){Me(F[0]);for(var T=F[0],L=1;L<F.length;L++)Me(F[L]),T+=v+F[L];return T}return""})},u.tie=function(){return this.tieWith("")},u.times=function(v,F){var T=this;return arguments.length<2&&(F=v),We(v),We(F),o(function(L,q){for(var U=[],W=void 0,le=void 0,De=0;De<v;De+=1){if(le=fe(W=T._(L,q),le),!W.status)return le;q=W.index,U.push(W.value)}for(;De<F&&(le=fe(W=T._(L,q),le),W.status);De+=1)q=W.index,U.push(W.value);return fe(J(q,U),le)})},u.result=function(v){return this.map(function(){return v})},u.atMost=function(v){return this.times(0,v)},u.atLeast=function(v){return Ot(this.times(v),this.many(),function(F,T){return F.concat(T)})},u.map=function(v){ze(v);var F=this;return o(function(T,L){var q=F._(T,L);return q.status?fe(J(q.index,v(q.value)),q):q})},u.contramap=function(v){ze(v);var F=this;return o(function(T,L){var q=F.parse(v(T.slice(L)));return q.status?J(L+T.length,q.value):q})},u.promap=function(v,F){return ze(v),ze(F),this.contramap(v).map(F)},u.skip=function(v){return In(this,v).map(function(F){return F[0]})},u.mark=function(){return Ot(Mt,this,Mt,function(v,F,T){return{start:v,value:F,end:T}})},u.node=function(v){return Ot(Mt,this,Mt,function(F,T,L){return{name:v,value:T,start:F,end:L}})},u.sepBy=function(v){return en(this,v)},u.sepBy1=function(v){return tr(this,v)},u.lookahead=function(v){return this.skip(re(v))},u.notFollowedBy=function(v){return this.skip(Nr(v))},u.desc=function(v){ae(v)||(v=[v]);var F=this;return o(function(T,L){var q=F._(T,L);return q.status||(q.expected=v),q})},u.fallback=function(v){return this.or(Tt(v))},u.ap=function(v){return Ot(v,this,function(F,T){return F(T)})},u.chain=function(v){var F=this;return o(function(T,L){var q=F._(T,L);return q.status?fe(v(q.value)._(T,q.index),q):q})},u.concat=u.or,u.empty=Ee,u.of=Tt,u["fantasy-land/ap"]=u.ap,u["fantasy-land/chain"]=u.chain,u["fantasy-land/concat"]=u.concat,u["fantasy-land/empty"]=u.empty,u["fantasy-land/of"]=u.of,u["fantasy-land/map"]=u.map;var Mt=o(function(v,F){return J(F,Je(v,F))}),Sa=o(function(v,F){return F>=v.length?ce(F,"any character/byte"):J(F+1,gt(v,F))}),tn=o(function(v,F){return J(v.length,v.slice(F))}),Br=o(function(v,F){return F<v.length?ce(F,"EOF"):J(F,null)}),ka=$e(/[0-9]/).desc("a digit"),xa=$e(/[0-9]*/).desc("optional digits"),Oa=$e(/[a-z]/i).desc("a letter"),Lr=$e(/[a-z]*/i).desc("optional letters"),vt=$e(/\s*/).desc("optional whitespace"),Ti=$e(/\s+/).desc("whitespace"),gn=Ht("\r"),Rr=Ht(`
`),ir=Ht(`\r
`),Hr=er(ir,Rr,gn).desc("newline"),Mi=er(Hr,Br);o.all=tn,o.alt=er,o.any=Sa,o.cr=gn,o.createLanguage=function(v){var F={};for(var T in v)({}).hasOwnProperty.call(v,T)&&function(L){F[L]=Pn(function(){return v[L](F)})}(T);return F},o.crlf=ir,o.custom=function(v){return o(v(J,ce))},o.digit=ka,o.digits=xa,o.empty=Ee,o.end=Mi,o.eof=Br,o.fail=nr,o.formatError=Xn,o.index=Mt,o.isParser=R,o.lazy=Pn,o.letter=Oa,o.letters=Lr,o.lf=Rr,o.lookahead=re,o.makeFailure=ce,o.makeSuccess=J,o.newline=Hr,o.noneOf=function(v){return rr(function(F){return v.indexOf(F)<0}).desc("none of '"+v+"'")},o.notFollowedBy=Nr,o.of=Tt,o.oneOf=function(v){for(var F=v.split(""),T=0;T<F.length;T++)F[T]="'"+F[T]+"'";return rr(function(L){return v.indexOf(L)>=0}).desc(F)},o.optWhitespace=vt,o.Parser=o,o.range=function(v,F){return rr(function(T){return v<=T&&T<=F}).desc(v+"-"+F)},o.regex=$e,o.regexp=$e,o.sepBy=en,o.sepBy1=tr,o.seq=In,o.seqMap=Ot,o.seqObj=function(){for(var v,F={},T=0,L=(v=arguments,Array.prototype.slice.call(v)),q=L.length,U=0;U<q;U+=1){var W=L[U];if(!R(W)){if(ae(W)&&W.length===2&&typeof W[0]=="string"&&R(W[1])){var le=W[0];if(Object.prototype.hasOwnProperty.call(F,le))throw new Error("seqObj: duplicate key "+le);F[le]=!0,T++;continue}throw new Error("seqObj arguments must be parsers or [string, parser] array pairs.")}}if(T===0)throw new Error("seqObj expects at least one named parser, found zero");return o(function(De,Le){for(var Ne,Ke={},$=0;$<q;$+=1){var it,at;if(ae(L[$])?(it=L[$][0],at=L[$][1]):(it=null,at=L[$]),!(Ne=fe(at._(De,Le),Ne)).status)return Ne;it&&(Ke[it]=Ne.value),Le=Ne.index}return fe(J(Le,Ke),Ne)})},o.string=Ht,o.succeed=Tt,o.takeWhile=function(v){return ze(v),o(function(F,T){for(var L=T;L<F.length&&v(gt(F,L));)L++;return J(L,F.slice(T,L))})},o.test=rr,o.whitespace=Ti,o["fantasy-land/empty"]=Ee,o["fantasy-land/of"]=Tt,o.Binary={bitSeq:M,bitSeqObj:function(v){_();var F={},T=0,L=p(function(U){if(ae(U)){var W=U;if(W.length!==2)throw new Error("["+W.join(", ")+"] should be length 2, got length "+W.length);if(Me(W[0]),We(W[1]),Object.prototype.hasOwnProperty.call(F,W[0]))throw new Error("duplicate key in bitSeqObj: "+W[0]);return F[W[0]]=!0,T++,W}return We(U),[null,U]},v);if(T<1)throw new Error("bitSeqObj expects at least one named pair, got ["+v.join(", ")+"]");var q=p(function(U){return U[0]},L);return M(p(function(U){return U[1]},L)).map(function(U){return d(function(W,le){return le[0]!==null&&(W[le[0]]=le[1]),W},{},p(function(W,le){return[W,U[le]]},q))})},byte:function(v){if(_(),We(v),v>255)throw new Error("Value specified to byte constructor ("+v+"=0x"+v.toString(16)+") is larger in value than a single byte.");var F=(v>15?"0x":"0x0")+v.toString(16);return o(function(T,L){var q=gt(T,L);return q===v?J(L+1,q):ce(L,F)})},buffer:function(v){return K("buffer",v).map(function(F){return Buffer.from(F)})},encodedString:function(v,F){return K("string",F).map(function(T){return T.toString(v)})},uintBE:ye,uint8BE:ye(1),uint16BE:ye(2),uint32BE:ye(4),uintLE:ve,uint8LE:ve(1),uint16LE:ve(2),uint32LE:ve(4),intBE:Te,int8BE:Te(1),int16BE:Te(2),int32BE:Te(4),intLE:Ve,int8LE:Ve(1),int16LE:Ve(2),int32LE:Ve(4),floatBE:K("floatBE",4).map(function(v){return v.readFloatBE(0)}),floatLE:K("floatLE",4).map(function(v){return v.readFloatLE(0)}),doubleBE:K("doubleBE",8).map(function(v){return v.readDoubleBE(0)}),doubleLE:K("doubleLE",8).map(function(v){return v.readDoubleLE(0)})},n.exports=o}])})})(aa,aa.exports);var w=aa.exports,Lu=()=>/[#*0-9]\uFE0F?\u20E3|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26AA\u26B0\u26B1\u26BD\u26BE\u26C4\u26C8\u26CF\u26D1\u26D3\u26E9\u26F0-\u26F5\u26F7\u26F8\u26FA\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B55\u3030\u303D\u3297\u3299]\uFE0F?|[\u261D\u270C\u270D](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\u270A\u270B](?:\uD83C[\uDFFB-\uDFFF])?|[\u23E9-\u23EC\u23F0\u23F3\u25FD\u2693\u26A1\u26AB\u26C5\u26CE\u26D4\u26EA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2795-\u2797\u27B0\u27BF\u2B50]|\u26F9(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\u2764\uFE0F?(?:\u200D(?:\uD83D\uDD25|\uD83E\uDE79))?|\uD83C(?:[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]\uFE0F?|[\uDF85\uDFC2\uDFC7](?:\uD83C[\uDFFB-\uDFFF])?|[\uDFC3\uDFC4\uDFCA](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDFCB\uDFCC](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uDDE6\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|\uDDE7\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|\uDDE8\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF]|\uDDE9\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|\uDDEA\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|\uDDEB\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|\uDDEC\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|\uDDED\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|\uDDEE\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|\uDDEF\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|\uDDF0\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|\uDDF1\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|\uDDF2\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|\uDDF3\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|\uDDF8\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|\uDDF9\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|\uDDFA\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|\uDDFB\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|\uDDFC\uD83C[\uDDEB\uDDF8]|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C[\uDDEA\uDDF9]|\uDDFF\uD83C[\uDDE6\uDDF2\uDDFC]|\uDFF3\uFE0F?(?:\u200D(?:\u26A7\uFE0F?|\uD83C\uDF08))?|\uDFF4(?:\u200D\u2620\uFE0F?|\uDB40\uDC67\uDB40\uDC62\uDB40(?:\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDC73\uDB40\uDC63\uDB40\uDC74|\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F)?)|\uD83D(?:[\uDC08\uDC26](?:\u200D\u2B1B)?|[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]\uFE0F?|[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC](?:\uD83C[\uDFFB-\uDFFF])?|[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD74\uDD90](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC25\uDC27-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEDC-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uDC15(?:\u200D\uD83E\uDDBA)?|\uDC3B(?:\u200D\u2744\uFE0F?)?|\uDC41\uFE0F?(?:\u200D\uD83D\uDDE8\uFE0F?)?|\uDC68(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDC68\uDC69]\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFE])))?))?|\uDC69(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?[\uDC68\uDC69]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?|\uDC69\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?))|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFE])))?))?|\uDC6F(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDD75(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDE2E(?:\u200D\uD83D\uDCA8)?|\uDE35(?:\u200D\uD83D\uDCAB)?|\uDE36(?:\u200D\uD83C\uDF2B\uFE0F?)?)|\uD83E(?:[\uDD0C\uDD0F\uDD18-\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5\uDEC3-\uDEC5\uDEF0\uDEF2-\uDEF8](?:\uD83C[\uDFFB-\uDFFF])?|[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDDDE\uDDDF](?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDE0-\uDDFF\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC2\uDECE-\uDEDB\uDEE0-\uDEE8]|\uDD3C(?:\u200D[\u2640\u2642]\uFE0F?|\uD83C[\uDFFB-\uDFFF])?|\uDDD1(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?))?|\uDEF1(?:\uD83C(?:\uDFFB(?:\u200D\uD83E\uDEF2\uD83C[\uDFFC-\uDFFF])?|\uDFFC(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFD-\uDFFF])?|\uDFFD(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])?|\uDFFE(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFD\uDFFF])?|\uDFFF(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFE])?))?)/g;function dd(t){return t==null?t:t.shiftToAll().normalize()}function ch(t){return t.includes("/")&&(t=t.substring(t.lastIndexOf("/")+1)),t.endsWith(".md")&&(t=t.substring(0,t.length-3)),t}w.alt(w.regex(new RegExp(Lu(),"")),w.regex(/[0-9\p{Letter}_-]+/u).map(t=>t.toLocaleLowerCase()),w.whitespace.map(t=>"-"),w.any.map(t=>"")).many().map(t=>t.join(""));var u2=w.alt(w.regex(new RegExp(Lu(),"")),w.regex(/[0-9\p{Letter}_-]+/u),w.whitespace.map(t=>" "),w.any.map(t=>" ")).many().map(t=>t.join("").split(/\s+/).join(" ").trim());function l2(t){return u2.tryParse(t)}function c2(t){return t=dd(t),t=X.fromObject(Object.fromEntries(Object.entries(t.toObject()).filter(([,e])=>e!=0))),t.toHuman()}var Ci;(function(t){function e(R,ae=Bu,we=!1){let J=n(R);if(!J)return ae.renderNullAs;switch(J.type){case"null":return ae.renderNullAs;case"string":return J.value;case"number":case"boolean":return""+J.value;case"html":return J.value.outerHTML;case"widget":return J.value.markdown();case"link":return J.value.markdown();case"function":return"<function>";case"array":let ce="";return we&&(ce+="["),ce+=J.value.map(fe=>e(fe,ae,!0)).join(", "),we&&(ce+="]"),ce;case"object":return"{ "+Object.entries(J.value).map(fe=>fe[0]+": "+e(fe[1],ae,!0)).join(", ")+" }";case"date":return J.value.second==0&&J.value.hour==0&&J.value.minute==0?J.value.toFormat(ae.defaultDateFormat):J.value.toFormat(ae.defaultDateTimeFormat);case"duration":return c2(J.value)}}t.toString=e;function n(R){return _(R)?{type:"null",value:R}:p(R)?{type:"number",value:R}:d(R)?{type:"string",value:R}:K(R)?{type:"boolean",value:R}:y(R)?{type:"duration",value:R}:E(R)?{type:"date",value:R}:ye(R)?{type:"widget",value:R}:M(R)?{type:"array",value:R}:ue(R)?{type:"link",value:R}:Ve(R)?{type:"function",value:R}:ve(R)?{type:"html",value:R}:Te(R)?{type:"object",value:R}:void 0}t.wrapValue=n;function r(R,ae){if(Te(R)){let we={};for(let[J,ce]of Object.entries(R))we[J]=r(ce,ae);return we}else if(M(R)){let we=[];for(let J of R)we.push(r(J,ae));return we}else return ae(R)}t.mapLeaves=r;function i(R,ae,we){var J,ce;if(R===void 0&&(R=null),ae===void 0&&(ae=null),R===null&&ae===null)return 0;if(R===null)return-1;if(ae===null)return 1;let fe=n(R),Ce=n(ae);if(fe===void 0&&Ce===void 0)return 0;if(fe===void 0)return-1;if(Ce===void 0)return 1;if(fe.type!=Ce.type)return fe.type.localeCompare(Ce.type);if(fe.value===Ce.value)return 0;switch(fe.type){case"string":return fe.value.localeCompare(Ce.value);case"number":return fe.value<Ce.value?-1:fe.value==Ce.value?0:1;case"null":return 0;case"boolean":return fe.value==Ce.value?0:fe.value?1:-1;case"link":let Je=fe.value,Se=Ce.value,gt=we!=null?we:Qe=>Qe,We=gt(Je.path).localeCompare(gt(Se.path));if(We!=0)return We;let ze=Je.type.localeCompare(Se.type);return ze!=0?ze:Je.subpath&&!Se.subpath?1:!Je.subpath&&Se.subpath?-1:!Je.subpath&&!Se.subpath?0:((J=Je.subpath)!==null&&J!==void 0?J:"").localeCompare((ce=Se.subpath)!==null&&ce!==void 0?ce:"");case"date":return fe.value<Ce.value?-1:fe.value.equals(Ce.value)?0:1;case"duration":return fe.value<Ce.value?-1:fe.value.equals(Ce.value)?0:1;case"array":let Me=fe.value,kt=Ce.value;for(let Qe=0;Qe<Math.min(Me.length,kt.length);Qe++){let Ge=i(Me[Qe],kt[Qe]);if(Ge!=0)return Ge}return Me.length-kt.length;case"object":let yt=fe.value,rt=Ce.value,An=Array.from(Object.keys(yt)),mn=Array.from(Object.keys(rt));An.sort(),mn.sort();let $t=i(An,mn);if($t!=0)return $t;for(let Qe of An){let Ge=i(yt[Qe],rt[Qe]);if(Ge!=0)return Ge}return 0;case"widget":case"html":case"function":return 0}}t.compareValue=i;function o(R){var ae;return(ae=n(R))===null||ae===void 0?void 0:ae.type}t.typeOf=o;function u(R){let ae=n(R);if(!ae)return!1;switch(ae.type){case"number":return ae.value!=0;case"string":return ae.value.length>0;case"boolean":return ae.value;case"link":return!!ae.value.path;case"date":return ae.value.toMillis()!=0;case"duration":return ae.value.as("seconds")!=0;case"object":return Object.keys(ae.value).length>0;case"array":return ae.value.length>0;case"null":return!1;case"html":case"widget":case"function":return!0}}t.isTruthy=u;function f(R){if(R==null)return R;if(t.isArray(R))return[].concat(R.map(ae=>f(ae)));if(t.isObject(R)){let ae={};for(let[we,J]of Object.entries(R))ae[we]=f(J);return ae}else return R}t.deepCopy=f;function d(R){return typeof R=="string"}t.isString=d;function p(R){return typeof R=="number"}t.isNumber=p;function E(R){return R instanceof ne}t.isDate=E;function y(R){return R instanceof X}t.isDuration=y;function _(R){return R==null}t.isNull=_;function M(R){return Array.isArray(R)}t.isArray=M;function K(R){return typeof R=="boolean"}t.isBoolean=K;function ue(R){return R instanceof je}t.isLink=ue;function ye(R){return R instanceof Fi}t.isWidget=ye;function ve(R){return typeof HTMLElement!="undefined"?R instanceof HTMLElement:!1}t.isHtml=ve;function Te(R){return typeof R=="object"&&!ve(R)&&!ye(R)&&!M(R)&&!y(R)&&!E(R)&&!ue(R)&&R!==void 0&&!_(R)}t.isObject=Te;function Ve(R){return typeof R=="function"}t.isFunction=Ve})(Ci||(Ci={}));var fh;(function(t){function e(i){return Ci.isObject(i)&&Object.keys(i).length==2&&"key"in i&&"rows"in i}t.isElementGroup=e;function n(i){for(let o of i)if(!e(o))return!1;return!0}t.isGrouping=n;function r(i){if(n(i)){let o=0;for(let u of i)o+=r(u.rows);return o}else return i.length}t.count=r})(fh||(fh={}));var je=class{static file(e,n=!1,r){return new je({path:e,embed:n,display:r,subpath:void 0,type:"file"})}static infer(e,n=!1,r){if(e.includes("#^")){let i=e.split("#^");return je.block(i[0],i[1],n,r)}else if(e.includes("#")){let i=e.split("#");return je.header(i[0],i[1],n,r)}else return je.file(e,n,r)}static header(e,n,r,i){return new je({path:e,embed:r,display:i,subpath:l2(n),type:"header"})}static block(e,n,r,i){return new je({path:e,embed:r,display:i,subpath:n,type:"block"})}static fromObject(e){return new je(e)}constructor(e){Object.assign(this,e)}equals(e){return e==null||e==null?!1:this.path==e.path&&this.type==e.type&&this.subpath==e.subpath}toString(){return this.markdown()}toObject(){return{path:this.path,type:this.type,subpath:this.subpath,display:this.display,embed:this.embed}}withPath(e){return new je(Object.assign({},this,{path:e}))}withDisplay(e){return new je(Object.assign({},this,{display:e}))}withHeader(e){return je.header(this.path,e,this.embed,this.display)}toFile(){return je.file(this.path,this.embed,this.display)}toEmbed(){if(this.embed)return this;{let e=new je(this);return e.embed=!0,e}}fromEmbed(){if(this.embed){let e=new je(this);return e.embed=!1,e}else return this}markdown(){let e=(this.embed?"!":"")+"[["+this.obsidianLink();return this.display?e+="|"+this.display:(e+="|"+ch(this.path),(this.type=="header"||this.type=="block")&&(e+=" > "+this.subpath)),e+="]]",e}obsidianLink(){var e,n;let r=this.path.replace("|","\\|");return this.type=="header"?r+"#"+((e=this.subpath)===null||e===void 0?void 0:e.replace("|","\\|")):this.type=="block"?r+"#^"+((n=this.subpath)===null||n===void 0?void 0:n.replace("|","\\|")):r}fileName(){return ch(this.path).replace(".md","")}},Fi=class{constructor(e){this.$widget=e}},_u=class extends Fi{constructor(e,n){super("dataview:list-pair"),this.key=e,this.value=n}markdown(){return`${Ci.toString(this.key)}: ${Ci.toString(this.value)}`}},Su=class extends Fi{constructor(e,n){super("dataview:external-link"),this.url=e,this.display=n}markdown(){var e;return`[${(e=this.display)!==null&&e!==void 0?e:this.url}](${this.url})`}},hh;(function(t){function e(u,f){return new _u(u,f)}t.listPair=e;function n(u,f){return new Su(u,f)}t.externalLink=n;function r(u){return u.$widget==="dataview:list-pair"}t.isListPair=r;function i(u){return u.$widget==="dataview:external-link"}t.isExternalLink=i;function o(u){return r(u)||i(u)}t.isBuiltin=o})(hh||(hh={}));var Ie;(function(t){function e(_){return{type:"variable",name:_}}t.variable=e;function n(_){return{type:"literal",value:_}}t.literal=n;function r(_,M,K){return{type:"binaryop",left:_,op:M,right:K}}t.binaryOp=r;function i(_,M){return{type:"index",object:_,index:M}}t.index=i;function o(_){let M=_.split("."),K=t.variable(M[0]);for(let ue=1;ue<M.length;ue++)K=t.index(K,t.literal(M[ue]));return K}t.indexVariable=o;function u(_,M){return{type:"lambda",arguments:_,value:M}}t.lambda=u;function f(_,M){return{type:"function",func:_,arguments:M}}t.func=f;function d(_){return{type:"list",values:_}}t.list=d;function p(_){return{type:"object",values:_}}t.object=p;function E(_){return{type:"negated",child:_}}t.negate=E;function y(_){return _=="<="||_=="<"||_==">"||_==">="||_=="!="||_=="="}t.isCompareOp=y,t.NULL=t.literal(null)})(Ie||(Ie={}));var Jt;(function(t){function e(E){return{type:"tag",tag:E}}t.tag=e;function n(E){return{type:"csv",path:E}}t.csv=n;function r(E){return{type:"folder",folder:E}}t.folder=r;function i(E,y){return{type:"link",file:E,direction:y?"incoming":"outgoing"}}t.link=i;function o(E,y,_){return{type:"binaryop",left:E,op:y,right:_}}t.binaryOp=o;function u(E,y){return{type:"binaryop",left:E,op:"&",right:y}}t.and=u;function f(E,y){return{type:"binaryop",left:E,op:"|",right:y}}t.or=f;function d(E){return{type:"negate",child:E}}t.negate=d;function p(){return{type:"empty"}}t.empty=p})(Jt||(Jt={}));var dh=new RegExp(Lu(),""),ku={year:X.fromObject({years:1}),years:X.fromObject({years:1}),yr:X.fromObject({years:1}),yrs:X.fromObject({years:1}),month:X.fromObject({months:1}),months:X.fromObject({months:1}),mo:X.fromObject({months:1}),mos:X.fromObject({months:1}),week:X.fromObject({weeks:1}),weeks:X.fromObject({weeks:1}),wk:X.fromObject({weeks:1}),wks:X.fromObject({weeks:1}),w:X.fromObject({weeks:1}),day:X.fromObject({days:1}),days:X.fromObject({days:1}),d:X.fromObject({days:1}),hour:X.fromObject({hours:1}),hours:X.fromObject({hours:1}),hr:X.fromObject({hours:1}),hrs:X.fromObject({hours:1}),h:X.fromObject({hours:1}),minute:X.fromObject({minutes:1}),minutes:X.fromObject({minutes:1}),min:X.fromObject({minutes:1}),mins:X.fromObject({minutes:1}),m:X.fromObject({minutes:1}),second:X.fromObject({seconds:1}),seconds:X.fromObject({seconds:1}),sec:X.fromObject({seconds:1}),secs:X.fromObject({seconds:1}),s:X.fromObject({seconds:1})},xu={now:()=>ne.local(),today:()=>ne.local().startOf("day"),yesterday:()=>ne.local().startOf("day").minus(X.fromObject({days:1})),tomorrow:()=>ne.local().startOf("day").plus(X.fromObject({days:1})),sow:()=>ne.local().startOf("week"),"start-of-week":()=>ne.local().startOf("week"),eow:()=>ne.local().endOf("week"),"end-of-week":()=>ne.local().endOf("week"),soy:()=>ne.local().startOf("year"),"start-of-year":()=>ne.local().startOf("year"),eoy:()=>ne.local().endOf("year"),"end-of-year":()=>ne.local().endOf("year"),som:()=>ne.local().startOf("month"),"start-of-month":()=>ne.local().startOf("month"),eom:()=>ne.local().endOf("month"),"end-of-month":()=>ne.local().endOf("month")},Ou=["FROM","WHERE","LIMIT","GROUP","FLATTEN"];function f2(t){let e=-1;for(;(e=t.indexOf("|",e+1))>=0;)if(!(e>0&&t[e-1]=="\\"))return[t.substring(0,e).replace(/\\\|/g,"|"),t.substring(e+1)];return[t.replace(/\\\|/g,"|"),void 0]}function h2(t){let[e,n]=f2(t);return je.infer(e,!1,n)}function yi(t,e,n){return w.seqMap(t,w.seq(w.optWhitespace,e,w.optWhitespace,t).many(),(r,i)=>{if(i.length==0)return r;let o=n(r,i[0][1],i[0][3]);for(let u=1;u<i.length;u++)o=n(o,i[u][1],i[u][3]);return o})}function d2(t,...e){return w.custom((n,r)=>(i,o)=>{let u=t._(i,o);if(!u.status)return u;for(let f of e){let d=f(u.value)._(i,u.index);if(!d.status)return u;u=d}return u})}var Bt=w.createLanguage({number:t=>w.regexp(/-?[0-9]+(\.[0-9]+)?/).map(e=>Number.parseFloat(e)).desc("number"),string:t=>w.string('"').then(w.alt(t.escapeCharacter,w.noneOf('"\\')).atLeast(0).map(e=>e.join(""))).skip(w.string('"')).desc("string"),escapeCharacter:t=>w.string("\\").then(w.any).map(e=>e==='"'?'"':e==="\\"?"\\":"\\"+e),bool:t=>w.regexp(/true|false|True|False/).map(e=>e.toLowerCase()=="true").desc("boolean ('true' or 'false')"),tag:t=>w.seqMap(w.string("#"),w.alt(w.regexp(/[^\u2000-\u206F\u2E00-\u2E7F'!"#$%&()*+,.:;<=>?@^`{|}~\[\]\\\s]/).desc("text")).many(),(e,n)=>e+n.join("")).desc("tag ('#hello/stuff')"),identifier:t=>w.seqMap(w.alt(w.regexp(/\p{Letter}/u),w.regexp(dh).desc("text")),w.alt(w.regexp(/[0-9\p{Letter}_-]/u),w.regexp(dh).desc("text")).many(),(e,n)=>e+n.join("")).desc("variable identifier"),link:t=>w.regexp(/\[\[([^\[\]]*?)\]\]/u,1).map(e=>h2(e)).desc("file link"),embedLink:t=>w.seqMap(w.string("!").atMost(1),t.link,(e,n)=>(e.length>0&&(n.embed=!0),n)).desc("file link"),binaryPlusMinus:t=>w.regexp(/\+|-/).map(e=>e).desc("'+' or '-'"),binaryMulDiv:t=>w.regexp(/\*|\/|%/).map(e=>e).desc("'*' or '/' or '%'"),binaryCompareOp:t=>w.regexp(/>=|<=|!=|>|<|=/).map(e=>e).desc("'>=' or '<=' or '!=' or '=' or '>' or '<'"),binaryBooleanOp:t=>w.regexp(/and|or|&|\|/i).map(e=>e.toLowerCase()=="and"?"&":e.toLowerCase()=="or"?"|":e).desc("'and' or 'or'"),rootDate:t=>w.seqMap(w.regexp(/\d{4}/),w.string("-"),w.regexp(/\d{2}/),(e,n,r)=>ne.fromObject({year:Number.parseInt(e),month:Number.parseInt(r)})).desc("date in format YYYY-MM[-DDTHH-MM-SS.MS]"),dateShorthand:t=>w.alt(...Object.keys(xu).sort((e,n)=>n.length-e.length).map(w.string)),date:t=>d2(t.rootDate,e=>w.seqMap(w.string("-"),w.regexp(/\d{2}/),(n,r)=>e.set({day:Number.parseInt(r)})),e=>w.seqMap(w.string("T"),w.regexp(/\d{2}/),(n,r)=>e.set({hour:Number.parseInt(r)})),e=>w.seqMap(w.string(":"),w.regexp(/\d{2}/),(n,r)=>e.set({minute:Number.parseInt(r)})),e=>w.seqMap(w.string(":"),w.regexp(/\d{2}/),(n,r)=>e.set({second:Number.parseInt(r)})),e=>w.alt(w.seqMap(w.string("."),w.regexp(/\d{3}/),(n,r)=>e.set({millisecond:Number.parseInt(r)})),w.succeed(e)),e=>w.alt(w.seqMap(w.string("+").or(w.string("-")),w.regexp(/\d{1,2}(:\d{2})?/),(n,r)=>e.setZone("UTC"+n+r,{keepLocalTime:!0})),w.seqMap(w.string("Z"),()=>e.setZone("utc",{keepLocalTime:!0})),w.seqMap(w.string("["),w.regexp(/[0-9A-Za-z+-\/]+/u),w.string("]"),(n,r,i)=>e.setZone(r,{keepLocalTime:!0})))).assert(e=>e.isValid,"valid date").desc("date in format YYYY-MM[-DDTHH-MM-SS.MS]"),datePlus:t=>w.alt(t.dateShorthand.map(e=>xu[e]()),t.date).desc("date in format YYYY-MM[-DDTHH-MM-SS.MS] or in shorthand"),durationType:t=>w.alt(...Object.keys(ku).sort((e,n)=>n.length-e.length).map(w.string)),duration:t=>w.seqMap(t.number,w.optWhitespace,t.durationType,(e,n,r)=>ku[r].mapUnits(i=>i*e)).sepBy1(w.string(",").trim(w.optWhitespace).or(w.optWhitespace)).map(e=>e.reduce((n,r)=>n.plus(r))).desc("duration like 4hr2min"),rawNull:t=>w.string("null"),tagSource:t=>t.tag.map(e=>Jt.tag(e)),csvSource:t=>w.seqMap(w.string("csv(").skip(w.optWhitespace),t.string,w.string(")"),(e,n,r)=>Jt.csv(n)),linkIncomingSource:t=>t.link.map(e=>Jt.link(e.path,!0)),linkOutgoingSource:t=>w.seqMap(w.string("outgoing(").skip(w.optWhitespace),t.link,w.string(")"),(e,n,r)=>Jt.link(n.path,!1)),folderSource:t=>t.string.map(e=>Jt.folder(e)),parensSource:t=>w.seqMap(w.string("("),w.optWhitespace,t.source,w.optWhitespace,w.string(")"),(e,n,r,i,o)=>r),negateSource:t=>w.seqMap(w.alt(w.string("-"),w.string("!")),t.atomSource,(e,n)=>Jt.negate(n)),atomSource:t=>w.alt(t.parensSource,t.negateSource,t.linkOutgoingSource,t.linkIncomingSource,t.folderSource,t.tagSource,t.csvSource),binaryOpSource:t=>yi(t.atomSource,t.binaryBooleanOp.map(e=>e),Jt.binaryOp),source:t=>t.binaryOpSource,variableField:t=>t.identifier.chain(e=>Ou.includes(e.toUpperCase())?w.fail("Variable fields cannot be a keyword ("+Ou.join(" or ")+")"):w.succeed(Ie.variable(e))).desc("variable"),numberField:t=>t.number.map(e=>Ie.literal(e)).desc("number"),stringField:t=>t.string.map(e=>Ie.literal(e)).desc("string"),boolField:t=>t.bool.map(e=>Ie.literal(e)).desc("boolean"),dateField:t=>w.seqMap(w.string("date("),w.optWhitespace,t.datePlus,w.optWhitespace,w.string(")"),(e,n,r,i,o)=>Ie.literal(r)).desc("date"),durationField:t=>w.seqMap(w.string("dur("),w.optWhitespace,t.duration,w.optWhitespace,w.string(")"),(e,n,r,i,o)=>Ie.literal(r)).desc("duration"),nullField:t=>t.rawNull.map(e=>Ie.NULL),linkField:t=>t.link.map(e=>Ie.literal(e)),listField:t=>t.field.sepBy(w.string(",").trim(w.optWhitespace)).wrap(w.string("[").skip(w.optWhitespace),w.optWhitespace.then(w.string("]"))).map(e=>Ie.list(e)).desc("list ('[1, 2, 3]')"),objectField:t=>w.seqMap(t.identifier.or(t.string),w.string(":").trim(w.optWhitespace),t.field,(e,n,r)=>({name:e,value:r})).sepBy(w.string(",").trim(w.optWhitespace)).wrap(w.string("{").skip(w.optWhitespace),w.optWhitespace.then(w.string("}"))).map(e=>{let n={};for(let r of e)n[r.name]=r.value;return Ie.object(n)}).desc("object ('{ a: 1, b: 2 }')"),atomInlineField:t=>w.alt(t.date,t.duration.map(e=>dd(e)),t.string,t.tag,t.embedLink,t.bool,t.number,t.rawNull),inlineFieldList:t=>t.atomInlineField.sepBy(w.string(",").trim(w.optWhitespace).lookahead(t.atomInlineField)),inlineField:t=>w.alt(w.seqMap(t.atomInlineField,w.string(",").trim(w.optWhitespace),t.inlineFieldList,(e,n,r)=>[e].concat(r)),t.atomInlineField),atomField:t=>w.alt(t.embedLink.map(e=>Ie.literal(e)),t.negatedField,t.linkField,t.listField,t.objectField,t.lambdaField,t.parensField,t.boolField,t.numberField,t.stringField,t.dateField,t.durationField,t.nullField,t.variableField),indexField:t=>w.seqMap(t.atomField,w.alt(t.dotPostfix,t.indexPostfix,t.functionPostfix).many(),(e,n)=>{let r=e;for(let i of n)switch(i.type){case"dot":r=Ie.index(r,Ie.literal(i.field));break;case"index":r=Ie.index(r,i.field);break;case"function":r=Ie.func(r,i.fields);break}return r}),negatedField:t=>w.seqMap(w.string("!"),t.indexField,(e,n)=>Ie.negate(n)).desc("negated field"),parensField:t=>w.seqMap(w.string("("),w.optWhitespace,t.field,w.optWhitespace,w.string(")"),(e,n,r,i,o)=>r),lambdaField:t=>w.seqMap(t.identifier.sepBy(w.string(",").trim(w.optWhitespace)).wrap(w.string("(").trim(w.optWhitespace),w.string(")").trim(w.optWhitespace)),w.string("=>").trim(w.optWhitespace),t.field,(e,n,r)=>({type:"lambda",arguments:e,value:r})),dotPostfix:t=>w.seqMap(w.string("."),t.identifier,(e,n)=>({type:"dot",field:n})),indexPostfix:t=>w.seqMap(w.string("["),w.optWhitespace,t.field,w.optWhitespace,w.string("]"),(e,n,r,i,o)=>({type:"index",field:r})),functionPostfix:t=>w.seqMap(w.string("("),w.optWhitespace,t.field.sepBy(w.string(",").trim(w.optWhitespace)),w.optWhitespace,w.string(")"),(e,n,r,i,o)=>({type:"function",fields:r})),binaryMulDivField:t=>yi(t.indexField,t.binaryMulDiv,Ie.binaryOp),binaryPlusMinusField:t=>yi(t.binaryMulDivField,t.binaryPlusMinus,Ie.binaryOp),binaryCompareField:t=>yi(t.binaryPlusMinusField,t.binaryCompareOp,Ie.binaryOp),binaryBooleanField:t=>yi(t.binaryCompareField,t.binaryBooleanOp,Ie.binaryOp),binaryOpField:t=>t.binaryBooleanField,field:t=>t.binaryOpField});function p2(t){try{return sa.success(Bt.field.tryParse(t))}catch(e){return sa.failure(""+e)}}var oa;(function(t){function e(r,i){return{name:r,field:i}}t.named=e;function n(r,i){return{field:r,direction:i}}t.sortBy=n})(oa||(oa={}));function m2(t){return w.custom((e,n)=>(r,i)=>{let o=t._(r,i);return o.status?Object.assign({},o,{value:[o.value,r.substring(i,o.index)]}):o})}function g2(t){return t.split(/[\r\n]+/).map(e=>e.trim()).join("")}function ph(t,e){return w.eof.map(t).or(w.whitespace.then(e))}var y2=w.createLanguage({queryType:t=>w.alt(w.regexp(/TABLE|LIST|TASK|CALENDAR/i)).map(e=>e.toLowerCase()).desc("query type ('TABLE', 'LIST', 'TASK', or 'CALENDAR')"),explicitNamedField:t=>w.seqMap(Bt.field.skip(w.whitespace),w.regexp(/AS/i).skip(w.whitespace),Bt.identifier.or(Bt.string),(e,n,r)=>oa.named(r,e)),namedField:t=>w.alt(t.explicitNamedField,m2(Bt.field).map(([e,n])=>oa.named(g2(n),e))),sortField:t=>w.seqMap(Bt.field.skip(w.optWhitespace),w.regexp(/ASCENDING|DESCENDING|ASC|DESC/i).atMost(1),(e,n)=>{let r=n.length==0?"ascending":n[0].toLowerCase();return r=="desc"&&(r="descending"),r=="asc"&&(r="ascending"),{field:e,direction:r}}),headerClause:t=>t.queryType.chain(e=>{switch(e){case"table":return ph(()=>({type:e,fields:[],showId:!0}),w.seqMap(w.regexp(/WITHOUT\s+ID/i).skip(w.optWhitespace).atMost(1),w.sepBy(t.namedField,w.string(",").trim(w.optWhitespace)),(n,r)=>({type:e,fields:r,showId:n.length==0})));case"list":return ph(()=>({type:e,format:void 0,showId:!0}),w.seqMap(w.regexp(/WITHOUT\s+ID/i).skip(w.optWhitespace).atMost(1),Bt.field.atMost(1),(n,r)=>({type:e,format:r.length==1?r[0]:void 0,showId:n.length==0})));case"task":return w.succeed({type:e});case"calendar":return w.whitespace.then(w.seqMap(t.namedField,n=>({type:e,showId:!0,field:n})));default:return w.fail(`Unrecognized query type '${e}'`)}}).desc("TABLE or LIST or TASK or CALENDAR"),fromClause:t=>w.seqMap(w.regexp(/FROM/i),w.whitespace,Bt.source,(e,n,r)=>r),whereClause:t=>w.seqMap(w.regexp(/WHERE/i),w.whitespace,Bt.field,(e,n,r)=>({type:"where",clause:r})).desc("WHERE <expression>"),sortByClause:t=>w.seqMap(w.regexp(/SORT/i),w.whitespace,t.sortField.sepBy1(w.string(",").trim(w.optWhitespace)),(e,n,r)=>({type:"sort",fields:r})).desc("SORT field [ASC/DESC]"),limitClause:t=>w.seqMap(w.regexp(/LIMIT/i),w.whitespace,Bt.field,(e,n,r)=>({type:"limit",amount:r})).desc("LIMIT <value>"),flattenClause:t=>w.seqMap(w.regexp(/FLATTEN/i).skip(w.whitespace),t.namedField,(e,n)=>({type:"flatten",field:n})).desc("FLATTEN <value> [AS <name>]"),groupByClause:t=>w.seqMap(w.regexp(/GROUP BY/i).skip(w.whitespace),t.namedField,(e,n)=>({type:"group",field:n})).desc("GROUP BY <value> [AS <name>]"),clause:t=>w.alt(t.fromClause,t.whereClause,t.sortByClause,t.limitClause,t.groupByClause,t.flattenClause),query:t=>w.seqMap(t.headerClause.trim(w.optWhitespace),t.fromClause.trim(w.optWhitespace).atMost(1),t.clause.trim(w.optWhitespace).many(),(e,n,r)=>({header:e,source:n.length==0?Jt.folder(""):n[0],operations:r,settings:Bu}))}),v2=t=>{var e;return t?(e=t.plugins.plugins.dataview)===null||e===void 0?void 0:e.api:window.DataviewAPI},D2=t=>t.plugins.enabledPlugins.has("dataview");Qt.DATE_SHORTHANDS=xu;Qt.DURATION_TYPES=ku;Qt.EXPRESSION=Bt;Qt.KEYWORDS=Ou;Qt.QUERY_LANGUAGE=y2;Qt.getAPI=v2;Qt.isPluginEnabled=D2;Qt.parseField=p2});var vd=he((Ru,Hu)=>{(function(t,e){typeof Ru=="object"&&typeof Hu!="undefined"?Hu.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis!="undefined"?globalThis:t||self,t.Dexie=e())})(Ru,function(){"use strict";var t=function(s,a){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&(l[h]=c[h])},t(s,a)};function e(s,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");t(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}var n=function(){return n=Object.assign||function(a){for(var l,c=1,h=arguments.length;c<h;c++){l=arguments[c];for(var m in l)Object.prototype.hasOwnProperty.call(l,m)&&(a[m]=l[m])}return a},n.apply(this,arguments)};function r(s,a,l){if(l||arguments.length===2)for(var c=0,h=a.length,m;c<h;c++)(m||!(c in a))&&(m||(m=Array.prototype.slice.call(a,0,c)),m[c]=a[c]);return s.concat(m||Array.prototype.slice.call(a))}var i=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:global,o=Object.keys,u=Array.isArray;typeof Promise!="undefined"&&!i.Promise&&(i.Promise=Promise);function f(s,a){return typeof a!="object"||o(a).forEach(function(l){s[l]=a[l]}),s}var d=Object.getPrototypeOf,p={}.hasOwnProperty;function E(s,a){return p.call(s,a)}function y(s,a){typeof a=="function"&&(a=a(d(s))),(typeof Reflect=="undefined"?o:Reflect.ownKeys)(a).forEach(function(l){M(s,l,a[l])})}var _=Object.defineProperty;function M(s,a,l,c){_(s,a,f(l&&E(l,"get")&&typeof l.get=="function"?{get:l.get,set:l.set,configurable:!0}:{value:l,configurable:!0,writable:!0},c))}function K(s){return{from:function(a){return s.prototype=Object.create(a.prototype),M(s.prototype,"constructor",s),{extend:y.bind(null,s.prototype)}}}}var ue=Object.getOwnPropertyDescriptor;function ye(s,a){var l=ue(s,a),c;return l||(c=d(s))&&ye(c,a)}var ve=[].slice;function Te(s,a,l){return ve.call(s,a,l)}function Ve(s,a){return a(s)}function R(s){if(!s)throw new Error("Assertion Failed")}function ae(s){i.setImmediate?setImmediate(s):setTimeout(s,0)}function we(s,a){return s.reduce(function(l,c,h){var m=a(c,h);return m&&(l[m[0]]=m[1]),l},{})}function J(s,a){if(typeof a=="string"&&E(s,a))return s[a];if(!a)return s;if(typeof a!="string"){for(var l=[],c=0,h=a.length;c<h;++c){var m=J(s,a[c]);l.push(m)}return l}var g=a.indexOf(".");if(g!==-1){var D=s[a.substr(0,g)];return D==null?void 0:J(D,a.substr(g+1))}}function ce(s,a,l){if(!(!s||a===void 0)&&!("isFrozen"in Object&&Object.isFrozen(s)))if(typeof a!="string"&&"length"in a){R(typeof l!="string"&&"length"in l);for(var c=0,h=a.length;c<h;++c)ce(s,a[c],l[c])}else{var m=a.indexOf(".");if(m!==-1){var g=a.substr(0,m),D=a.substr(m+1);if(D==="")l===void 0?u(s)&&!isNaN(parseInt(g))?s.splice(g,1):delete s[g]:s[g]=l;else{var b=s[g];(!b||!E(s,g))&&(b=s[g]={}),ce(b,D,l)}}else l===void 0?u(s)&&!isNaN(parseInt(a))?s.splice(a,1):delete s[a]:s[a]=l}}function fe(s,a){typeof a=="string"?ce(s,a,void 0):"length"in a&&[].map.call(a,function(l){ce(s,l,void 0)})}function Ce(s){var a={};for(var l in s)E(s,l)&&(a[l]=s[l]);return a}var Je=[].concat;function Se(s){return Je.apply([],s)}var gt="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Se([8,16,32,64].map(function(s){return["Int","Uint","Float"].map(function(a){return a+s+"Array"})}))).filter(function(s){return i[s]}),We=new Set(gt.map(function(s){return i[s]}));function ze(s){var a={};for(var l in s)if(E(s,l)){var c=s[l];a[l]=!c||typeof c!="object"||We.has(c.constructor)?c:ze(c)}return a}function Me(s){for(var a in s)if(E(s,a))return!1;return!0}var kt=null;function yt(s){kt=new WeakMap;var a=rt(s);return kt=null,a}function rt(s){if(!s||typeof s!="object")return s;var a=kt.get(s);if(a)return a;if(u(s)){a=[],kt.set(s,a);for(var l=0,c=s.length;l<c;++l)a.push(rt(s[l]))}else if(We.has(s.constructor))a=s;else{var h=d(s);a=h===Object.prototype?{}:Object.create(h),kt.set(s,a);for(var m in s)E(s,m)&&(a[m]=rt(s[m]))}return a}var An={}.toString;function mn(s){return An.call(s).slice(8,-1)}var $t=typeof Symbol!="undefined"?Symbol.iterator:"@@iterator",Qe=typeof $t=="symbol"?function(s){var a;return s!=null&&(a=s[$t])&&a.apply(s)}:function(){return null};function Ge(s,a){var l=s.indexOf(a);return l>=0&&s.splice(l,1),l>=0}var Xt={};function xt(s){var a,l,c,h;if(arguments.length===1){if(u(s))return s.slice();if(this===Xt&&typeof s=="string")return[s];if(h=Qe(s)){for(l=[];c=h.next(),!c.done;)l.push(c.value);return l}if(s==null)return[s];if(a=s.length,typeof a=="number"){for(l=new Array(a);a--;)l[a]=s[a];return l}return[s]}for(a=arguments.length,l=new Array(a);a--;)l[a]=arguments[a];return l}var Xn=typeof Symbol!="undefined"?function(s){return s[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Oi=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],In=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Ot=Oi.concat(In),er={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function en(s,a){this.name=s,this.message=a}K(en).from(Error).extend({toString:function(){return this.name+": "+this.message}});function tr(s,a){return s+". Errors: "+Object.keys(a).map(function(l){return a[l].toString()}).filter(function(l,c,h){return h.indexOf(l)===c}).join(`
`)}function Ht(s,a,l,c){this.failures=a,this.failedKeys=c,this.successCount=l,this.message=tr(s,a)}K(Ht).from(en);function $e(s,a){this.name="BulkError",this.failures=Object.keys(a).map(function(l){return a[l]}),this.failuresByPos=a,this.message=tr(s,this.failures)}K($e).from(en);var Tt=Ot.reduce(function(s,a){return s[a]=a+"Error",s},{}),nr=en,re=Ot.reduce(function(s,a){var l=a+"Error";function c(h,m){this.name=l,h?typeof h=="string"?(this.message="".concat(h).concat(m?`
 `+m:""),this.inner=m||null):typeof h=="object"&&(this.message="".concat(h.name," ").concat(h.message),this.inner=h):(this.message=er[a]||l,this.inner=null)}return K(c).from(nr),s[a]=c,s},{});re.Syntax=SyntaxError,re.Type=TypeError,re.Range=RangeError;var Nr=In.reduce(function(s,a){return s[a+"Error"]=re[a],s},{});function rr(s,a){if(!s||s instanceof en||s instanceof TypeError||s instanceof SyntaxError||!s.name||!Nr[s.name])return s;var l=new Nr[s.name](a||s.message,s);return"stack"in s&&M(l,"stack",{get:function(){return this.inner.stack}}),l}var Pn=Ot.reduce(function(s,a){return["Syntax","Type","Range"].indexOf(a)===-1&&(s[a+"Error"]=re[a]),s},{});Pn.ModifyError=Ht,Pn.DexieError=en,Pn.BulkError=$e;function Ee(){}function Mt(s){return s}function Sa(s,a){return s==null||s===Mt?a:function(l){return a(s(l))}}function tn(s,a){return function(){s.apply(this,arguments),a.apply(this,arguments)}}function Br(s,a){return s===Ee?a:function(){var l=s.apply(this,arguments);l!==void 0&&(arguments[0]=l);var c=this.onsuccess,h=this.onerror;this.onsuccess=null,this.onerror=null;var m=a.apply(this,arguments);return c&&(this.onsuccess=this.onsuccess?tn(c,this.onsuccess):c),h&&(this.onerror=this.onerror?tn(h,this.onerror):h),m!==void 0?m:l}}function ka(s,a){return s===Ee?a:function(){s.apply(this,arguments);var l=this.onsuccess,c=this.onerror;this.onsuccess=this.onerror=null,a.apply(this,arguments),l&&(this.onsuccess=this.onsuccess?tn(l,this.onsuccess):l),c&&(this.onerror=this.onerror?tn(c,this.onerror):c)}}function xa(s,a){return s===Ee?a:function(l){var c=s.apply(this,arguments);f(l,c);var h=this.onsuccess,m=this.onerror;this.onsuccess=null,this.onerror=null;var g=a.apply(this,arguments);return h&&(this.onsuccess=this.onsuccess?tn(h,this.onsuccess):h),m&&(this.onerror=this.onerror?tn(m,this.onerror):m),c===void 0?g===void 0?void 0:g:f(c,g)}}function Oa(s,a){return s===Ee?a:function(){return a.apply(this,arguments)===!1?!1:s.apply(this,arguments)}}function Lr(s,a){return s===Ee?a:function(){var l=s.apply(this,arguments);if(l&&typeof l.then=="function"){for(var c=this,h=arguments.length,m=new Array(h);h--;)m[h]=arguments[h];return l.then(function(){return a.apply(c,m)})}return a.apply(this,arguments)}}var vt=typeof location!="undefined"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Ti(s,a){vt=s}var gn={},Rr=100,ir=typeof Promise=="undefined"?[]:function(){var s=Promise.resolve();if(typeof crypto=="undefined"||!crypto.subtle)return[s,d(s),s];var a=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[a,d(a),s]}(),Hr=ir[0],Mi=ir[1],v=ir[2],F=Mi&&Mi.then,T=Hr&&Hr.constructor,L=!!v;function q(){queueMicrotask(xd)}var U=function(s,a){it.push([s,a]),le&&(q(),le=!1)},W=!0,le=!0,De=[],Le=[],Ne=Mt,Ke={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Ee,pgp:!1,env:{},finalize:Ee},$=Ke,it=[],at=0,sr=[];function j(s){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var a=this._PSD=$;if(typeof s!="function"){if(s!==gn)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&Kt(this,this._value);return}this._state=null,this._value=null,++a.ref,Gt(this,s)}var Vt={get:function(){var s=$,a=Ni;function l(c,h){var m=this,g=!s.global&&(s!==$||a!==Ni),D=g&&!vn(),b=new j(function(C,x){Ta(m,new nn(Yu(c,s,g,D),Yu(h,s,g,D),C,x,s))});return this._consoleTask&&(b._consoleTask=this._consoleTask),b}return l.prototype=gn,l},set:function(s){M(this,"then",s&&s.prototype===gn?Vt:{get:function(){return s},set:Vt.set})}};y(j.prototype,{then:Vt,_then:function(s,a){Ta(this,new nn(null,null,s,a,$))},catch:function(s){if(arguments.length===1)return this.then(null,s);var a=arguments[0],l=arguments[1];return typeof a=="function"?this.then(null,function(c){return c instanceof a?l(c):Ai(c)}):this.then(null,function(c){return c&&c.name===a?l(c):Ai(c)})},finally:function(s){return this.then(function(a){return j.resolve(s()).then(function(){return a})},function(a){return j.resolve(s()).then(function(){return Ai(a)})})},timeout:function(s,a){var l=this;return s<1/0?new j(function(c,h){var m=setTimeout(function(){return h(new re.Timeout(a))},s);l.then(c,h).finally(clearTimeout.bind(null,m))}):this}}),typeof Symbol!="undefined"&&Symbol.toStringTag&&M(j.prototype,Symbol.toStringTag,"Dexie.Promise"),Ke.env=zu();function nn(s,a,l,c,h){this.onFulfilled=typeof s=="function"?s:null,this.onRejected=typeof a=="function"?a:null,this.resolve=l,this.reject=c,this.psd=h}y(j,{all:function(){var s=xt.apply(null,arguments).map(Bi);return new j(function(a,l){s.length===0&&a([]);var c=s.length;s.forEach(function(h,m){return j.resolve(h).then(function(g){s[m]=g,--c||a(s)},l)})})},resolve:function(s){if(s instanceof j)return s;if(s&&typeof s.then=="function")return new j(function(l,c){s.then(l,c)});var a=new j(gn,!0,s);return a},reject:Ai,race:function(){var s=xt.apply(null,arguments).map(Bi);return new j(function(a,l){s.map(function(c){return j.resolve(c).then(a,l)})})},PSD:{get:function(){return $},set:function(s){return $=s}},totalEchoes:{get:function(){return Ni}},newPSD:yn,usePSD:Nn,scheduler:{get:function(){return U},set:function(s){U=s}},rejectionMapper:{get:function(){return Ne},set:function(s){Ne=s}},follow:function(s,a){return new j(function(l,c){return yn(function(h,m){var g=$;g.unhandleds=[],g.onunhandled=m,g.finalize=tn(function(){var D=this;Od(function(){D.unhandleds.length===0?h():m(D.unhandleds[0])})},g.finalize),s()},a,l,c)})}}),T&&(T.allSettled&&M(j,"allSettled",function(){var s=xt.apply(null,arguments).map(Bi);return new j(function(a){s.length===0&&a([]);var l=s.length,c=new Array(l);s.forEach(function(h,m){return j.resolve(h).then(function(g){return c[m]={status:"fulfilled",value:g}},function(g){return c[m]={status:"rejected",reason:g}}).then(function(){return--l||a(c)})})})}),T.any&&typeof AggregateError!="undefined"&&M(j,"any",function(){var s=xt.apply(null,arguments).map(Bi);return new j(function(a,l){s.length===0&&l(new AggregateError([]));var c=s.length,h=new Array(c);s.forEach(function(m,g){return j.resolve(m).then(function(D){return a(D)},function(D){h[g]=D,--c||l(new AggregateError(h))})})})}),T.withResolvers&&(j.withResolvers=T.withResolvers));function Gt(s,a){try{a(function(l){if(s._state===null){if(l===s)throw new TypeError("A promise cannot be resolved with itself.");var c=s._lib&&ar();l&&typeof l.then=="function"?Gt(s,function(h,m){l instanceof j?l._then(h,m):l.then(h,m)}):(s._state=!0,s._value=l,rn(s)),c&&or()}},Kt.bind(null,s))}catch(l){Kt(s,l)}}function Kt(s,a){if(Le.push(a),s._state===null){var l=s._lib&&ar();a=Ne(a),s._state=!1,s._value=a,Td(s),rn(s),l&&or()}}function rn(s){var a=s._listeners;s._listeners=[];for(var l=0,c=a.length;l<c;++l)Ta(s,a[l]);var h=s._PSD;--h.ref||h.finalize(),at===0&&(++at,U(function(){--at===0&&Ma()},[]))}function Ta(s,a){if(s._state===null){s._listeners.push(a);return}var l=s._state?a.onFulfilled:a.onRejected;if(l===null)return(s._state?a.resolve:a.reject)(s._value);++a.psd.ref,++at,U(kd,[l,s,a])}function kd(s,a,l){try{var c,h=a._value;!a._state&&Le.length&&(Le=[]),c=vt&&a._consoleTask?a._consoleTask.run(function(){return s(h)}):s(h),!a._state&&Le.indexOf(h)===-1&&Md(a),l.resolve(c)}catch(m){l.reject(m)}finally{--at===0&&Ma(),--l.psd.ref||l.psd.finalize()}}function xd(){Nn(Ke,function(){ar()&&or()})}function ar(){var s=W;return W=!1,le=!1,s}function or(){var s,a,l;do for(;it.length>0;)for(s=it,it=[],l=s.length,a=0;a<l;++a){var c=s[a];c[0].apply(null,c[1])}while(it.length>0);W=!0,le=!0}function Ma(){var s=De;De=[],s.forEach(function(c){c._PSD.onunhandled.call(null,c._value,c)});for(var a=sr.slice(0),l=a.length;l;)a[--l]()}function Od(s){function a(){s(),sr.splice(sr.indexOf(a),1)}sr.push(a),++at,U(function(){--at===0&&Ma()},[])}function Td(s){De.some(function(a){return a._value===s._value})||De.push(s)}function Md(s){for(var a=De.length;a;)if(De[--a]._value===s._value){De.splice(a,1);return}}function Ai(s){return new j(gn,!1,s)}function xe(s,a){var l=$;return function(){var c=ar(),h=$;try{return Dn(l,!0),s.apply(this,arguments)}catch(m){a&&a(m)}finally{Dn(h,!1),c&&or()}}}var qe={awaits:0,echoes:0,id:0},Ad=0,Ii=[],Pi=0,Ni=0,Id=0;function yn(s,a,l,c){var h=$,m=Object.create(h);m.parent=h,m.ref=0,m.global=!1,m.id=++Id,Ke.env,m.env=L?{Promise:j,PromiseProp:{value:j,configurable:!0,writable:!0},all:j.all,race:j.race,allSettled:j.allSettled,any:j.any,resolve:j.resolve,reject:j.reject}:{},a&&f(m,a),++h.ref,m.finalize=function(){--this.parent.ref||this.parent.finalize()};var g=Nn(m,s,l,c);return m.ref===0&&m.finalize(),g}function ur(){return qe.id||(qe.id=++Ad),++qe.awaits,qe.echoes+=Rr,qe.id}function vn(){return qe.awaits?(--qe.awaits===0&&(qe.id=0),qe.echoes=qe.awaits*Rr,!0):!1}(""+F).indexOf("[native code]")===-1&&(ur=vn=Ee);function Bi(s){return qe.echoes&&s&&s.constructor===T?(ur(),s.then(function(a){return vn(),a},function(a){return vn(),Be(a)})):s}function Pd(s){++Ni,(!qe.echoes||--qe.echoes===0)&&(qe.echoes=qe.awaits=qe.id=0),Ii.push($),Dn(s,!0)}function Nd(){var s=Ii[Ii.length-1];Ii.pop(),Dn(s,!1)}function Dn(s,a){var l=$;if((a?qe.echoes&&(!Pi++||s!==$):Pi&&(!--Pi||s!==$))&&queueMicrotask(a?Pd.bind(null,s):Nd),s!==$&&($=s,l===Ke&&(Ke.env=zu()),L)){var c=Ke.env.Promise,h=s.env;(l.global||s.global)&&(Object.defineProperty(i,"Promise",h.PromiseProp),c.all=h.all,c.race=h.race,c.resolve=h.resolve,c.reject=h.reject,h.allSettled&&(c.allSettled=h.allSettled),h.any&&(c.any=h.any))}}function zu(){var s=i.Promise;return L?{Promise:s,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:s.all,race:s.race,allSettled:s.allSettled,any:s.any,resolve:s.resolve,reject:s.reject}:{}}function Nn(s,a,l,c,h){var m=$;try{return Dn(s,!0),a(l,c,h)}finally{Dn(m,!1)}}function Yu(s,a,l,c){return typeof s!="function"?s:function(){var h=$;l&&ur(),Dn(a,!0);try{return s.apply(this,arguments)}finally{Dn(h,!1),c&&queueMicrotask(vn)}}}function Aa(s){Promise===T&&qe.echoes===0?Pi===0?s():enqueueNativeMicroTask(s):setTimeout(s,0)}var Be=j.reject;function Ia(s,a,l,c){if(!s.idbdb||!s._state.openComplete&&!$.letThrough&&!s._vip){if(s._state.openComplete)return Be(new re.DatabaseClosed(s._state.dbOpenError));if(!s._state.isBeingOpened){if(!s._state.autoOpen)return Be(new re.DatabaseClosed);s.open().catch(Ee)}return s._state.dbReadyPromise.then(function(){return Ia(s,a,l,c)})}else{var h=s._createTransaction(a,l,s._dbSchema);try{h.create(),s._state.PR1398_maxLoop=3}catch(m){return m.name===Tt.InvalidState&&s.isOpen()&&--s._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),s.close({disableAutoOpen:!1}),s.open().then(function(){return Ia(s,a,l,c)})):Be(m)}return h._promise(a,function(m,g){return yn(function(){return $.trans=h,c(m,g,h)})}).then(function(m){if(a==="readwrite")try{h.idbtrans.commit()}catch(g){}return a==="readonly"?m:h._completion.then(function(){return m})})}}var Zu="4.0.10",Bn=String.fromCharCode(65535),Pa=-1/0,sn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Ju="String expected.",lr=[],Li="__dbnames",Na="readonly",Ba="readwrite";function Ln(s,a){return s?a?function(){return s.apply(this,arguments)&&a.apply(this,arguments)}:s:a}var Qu={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ri(s){return typeof s=="string"&&!/\./.test(s)?function(a){return a[s]===void 0&&s in a&&(a=yt(a),delete a[s]),a}:function(a){return a}}function $u(){throw re.Type()}function me(s,a){try{var l=Xu(s),c=Xu(a);if(l!==c)return l==="Array"?1:c==="Array"?-1:l==="binary"?1:c==="binary"?-1:l==="string"?1:c==="string"?-1:l==="Date"?1:c!=="Date"?NaN:-1;switch(l){case"number":case"Date":case"string":return s>a?1:s<a?-1:0;case"binary":return Ld(el(s),el(a));case"Array":return Bd(s,a)}}catch(h){}return NaN}function Bd(s,a){for(var l=s.length,c=a.length,h=l<c?l:c,m=0;m<h;++m){var g=me(s[m],a[m]);if(g!==0)return g}return l===c?0:l<c?-1:1}function Ld(s,a){for(var l=s.length,c=a.length,h=l<c?l:c,m=0;m<h;++m)if(s[m]!==a[m])return s[m]<a[m]?-1:1;return l===c?0:l<c?-1:1}function Xu(s){var a=typeof s;if(a!=="object")return a;if(ArrayBuffer.isView(s))return"binary";var l=mn(s);return l==="ArrayBuffer"?"binary":l}function el(s){return s instanceof Uint8Array?s:ArrayBuffer.isView(s)?new Uint8Array(s.buffer,s.byteOffset,s.byteLength):new Uint8Array(s)}var tl=function(){function s(){}return s.prototype._trans=function(a,l,c){var h=this._tx||$.trans,m=this.name,g=vt&&typeof console!="undefined"&&console.createTask&&console.createTask("Dexie: ".concat(a==="readonly"?"read":"write"," ").concat(this.name));function D(x,S,I){if(!I.schema[m])throw new re.NotFound("Table "+m+" not part of transaction");return l(I.idbtrans,I)}var b=ar();try{var C=h&&h.db._novip===this.db._novip?h===$.trans?h._promise(a,D,c):yn(function(){return h._promise(a,D,c)},{trans:h,transless:$.transless||$}):Ia(this.db,a,[this.name],D);return g&&(C._consoleTask=g,C=C.catch(function(x){return console.trace(x),Be(x)})),C}finally{b&&or()}},s.prototype.get=function(a,l){var c=this;return a&&a.constructor===Object?this.where(a).first(l):a==null?Be(new re.Type("Invalid argument to Table.get()")):this._trans("readonly",function(h){return c.core.get({trans:h,key:a}).then(function(m){return c.hook.reading.fire(m)})}).then(l)},s.prototype.where=function(a){if(typeof a=="string")return new this.db.WhereClause(this,a);if(u(a))return new this.db.WhereClause(this,"[".concat(a.join("+"),"]"));var l=o(a);if(l.length===1)return this.where(l[0]).equals(a[l[0]]);var c=this.schema.indexes.concat(this.schema.primKey).filter(function(x){if(x.compound&&l.every(function(I){return x.keyPath.indexOf(I)>=0})){for(var S=0;S<l.length;++S)if(l.indexOf(x.keyPath[S])===-1)return!1;return!0}return!1}).sort(function(x,S){return x.keyPath.length-S.keyPath.length})[0];if(c&&this.db._maxKey!==Bn){var h=c.keyPath.slice(0,l.length);return this.where(h).equals(h.map(function(x){return a[x]}))}!c&&vt&&console.warn("The query ".concat(JSON.stringify(a)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(l.join("+"),"]"));var m=this.schema.idxByName;function g(x,S){return me(x,S)===0}var D=l.reduce(function(x,S){var I=x[0],G=x[1],k=m[S],O=a[S];return[I||k,I||!k?Ln(G,k&&k.multi?function(A){var H=J(A,S);return u(H)&&H.some(function(N){return g(O,N)})}:function(A){return g(O,J(A,S))}):G]},[null,null]),b=D[0],C=D[1];return b?this.where(b.name).equals(a[b.keyPath]).filter(C):c?this.filter(C):this.where(l).equals("")},s.prototype.filter=function(a){return this.toCollection().and(a)},s.prototype.count=function(a){return this.toCollection().count(a)},s.prototype.offset=function(a){return this.toCollection().offset(a)},s.prototype.limit=function(a){return this.toCollection().limit(a)},s.prototype.each=function(a){return this.toCollection().each(a)},s.prototype.toArray=function(a){return this.toCollection().toArray(a)},s.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},s.prototype.orderBy=function(a){return new this.db.Collection(new this.db.WhereClause(this,u(a)?"[".concat(a.join("+"),"]"):a))},s.prototype.reverse=function(){return this.toCollection().reverse()},s.prototype.mapToClass=function(a){var l=this,c=l.db,h=l.name;this.schema.mappedClass=a,a.prototype instanceof $u&&(a=function(b){e(C,b);function C(){return b!==null&&b.apply(this,arguments)||this}return Object.defineProperty(C.prototype,"db",{get:function(){return c},enumerable:!1,configurable:!0}),C.prototype.table=function(){return h},C}(a));for(var m=new Set,g=a.prototype;g;g=d(g))Object.getOwnPropertyNames(g).forEach(function(b){return m.add(b)});var D=function(b){if(!b)return b;var C=Object.create(a.prototype);for(var x in b)if(!m.has(x))try{C[x]=b[x]}catch(S){}return C};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=D,this.hook("reading",D),a},s.prototype.defineClass=function(){function a(l){f(this,l)}return this.mapToClass(a)},s.prototype.add=function(a,l){var c=this,h=this.schema.primKey,m=h.auto,g=h.keyPath,D=a;return g&&m&&(D=Ri(g)(a)),this._trans("readwrite",function(b){return c.core.mutate({trans:b,type:"add",keys:l!=null?[l]:null,values:[D]})}).then(function(b){return b.numFailures?j.reject(b.failures[0]):b.lastResult}).then(function(b){if(g)try{ce(a,g,b)}catch(C){}return b})},s.prototype.update=function(a,l){if(typeof a=="object"&&!u(a)){var c=J(a,this.schema.primKey.keyPath);return c===void 0?Be(new re.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(c).modify(l)}else return this.where(":id").equals(a).modify(l)},s.prototype.put=function(a,l){var c=this,h=this.schema.primKey,m=h.auto,g=h.keyPath,D=a;return g&&m&&(D=Ri(g)(a)),this._trans("readwrite",function(b){return c.core.mutate({trans:b,type:"put",values:[D],keys:l!=null?[l]:null})}).then(function(b){return b.numFailures?j.reject(b.failures[0]):b.lastResult}).then(function(b){if(g)try{ce(a,g,b)}catch(C){}return b})},s.prototype.delete=function(a){var l=this;return this._trans("readwrite",function(c){return l.core.mutate({trans:c,type:"delete",keys:[a]})}).then(function(c){return c.numFailures?j.reject(c.failures[0]):void 0})},s.prototype.clear=function(){var a=this;return this._trans("readwrite",function(l){return a.core.mutate({trans:l,type:"deleteRange",range:Qu})}).then(function(l){return l.numFailures?j.reject(l.failures[0]):void 0})},s.prototype.bulkGet=function(a){var l=this;return this._trans("readonly",function(c){return l.core.getMany({keys:a,trans:c}).then(function(h){return h.map(function(m){return l.hook.reading.fire(m)})})})},s.prototype.bulkAdd=function(a,l,c){var h=this,m=Array.isArray(l)?l:void 0;c=c||(m?void 0:l);var g=c?c.allKeys:void 0;return this._trans("readwrite",function(D){var b=h.schema.primKey,C=b.auto,x=b.keyPath;if(x&&m)throw new re.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(m&&m.length!==a.length)throw new re.InvalidArgument("Arguments objects and keys must have the same length");var S=a.length,I=x&&C?a.map(Ri(x)):a;return h.core.mutate({trans:D,type:"add",keys:m,values:I,wantResults:g}).then(function(G){var k=G.numFailures,O=G.results,A=G.lastResult,H=G.failures,N=g?O:A;if(k===0)return N;throw new $e("".concat(h.name,".bulkAdd(): ").concat(k," of ").concat(S," operations failed"),H)})})},s.prototype.bulkPut=function(a,l,c){var h=this,m=Array.isArray(l)?l:void 0;c=c||(m?void 0:l);var g=c?c.allKeys:void 0;return this._trans("readwrite",function(D){var b=h.schema.primKey,C=b.auto,x=b.keyPath;if(x&&m)throw new re.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(m&&m.length!==a.length)throw new re.InvalidArgument("Arguments objects and keys must have the same length");var S=a.length,I=x&&C?a.map(Ri(x)):a;return h.core.mutate({trans:D,type:"put",keys:m,values:I,wantResults:g}).then(function(G){var k=G.numFailures,O=G.results,A=G.lastResult,H=G.failures,N=g?O:A;if(k===0)return N;throw new $e("".concat(h.name,".bulkPut(): ").concat(k," of ").concat(S," operations failed"),H)})})},s.prototype.bulkUpdate=function(a){var l=this,c=this.core,h=a.map(function(D){return D.key}),m=a.map(function(D){return D.changes}),g=[];return this._trans("readwrite",function(D){return c.getMany({trans:D,keys:h,cache:"clone"}).then(function(b){var C=[],x=[];a.forEach(function(I,G){var k=I.key,O=I.changes,A=b[G];if(A){for(var H=0,N=Object.keys(O);H<N.length;H++){var B=N[H],V=O[B];if(B===l.schema.primKey.keyPath){if(me(V,k)!==0)throw new re.Constraint("Cannot update primary key in bulkUpdate()")}else ce(A,B,V)}g.push(G),C.push(k),x.push(A)}});var S=C.length;return c.mutate({trans:D,type:"put",keys:C,values:x,updates:{keys:h,changeSpecs:m}}).then(function(I){var G=I.numFailures,k=I.failures;if(G===0)return S;for(var O=0,A=Object.keys(k);O<A.length;O++){var H=A[O],N=g[Number(H)];if(N!=null){var B=k[H];delete k[H],k[N]=B}}throw new $e("".concat(l.name,".bulkUpdate(): ").concat(G," of ").concat(S," operations failed"),k)})})})},s.prototype.bulkDelete=function(a){var l=this,c=a.length;return this._trans("readwrite",function(h){return l.core.mutate({trans:h,type:"delete",keys:a})}).then(function(h){var m=h.numFailures,g=h.lastResult,D=h.failures;if(m===0)return g;throw new $e("".concat(l.name,".bulkDelete(): ").concat(m," of ").concat(c," operations failed"),D)})},s}();function Vr(s){var a={},l=function(D,b){if(b){for(var C=arguments.length,x=new Array(C-1);--C;)x[C-1]=arguments[C];return a[D].subscribe.apply(null,x),s}else if(typeof D=="string")return a[D]};l.addEventType=m;for(var c=1,h=arguments.length;c<h;++c)m(arguments[c]);return l;function m(D,b,C){if(typeof D=="object")return g(D);b||(b=Oa),C||(C=Ee);var x={subscribers:[],fire:C,subscribe:function(S){x.subscribers.indexOf(S)===-1&&(x.subscribers.push(S),x.fire=b(x.fire,S))},unsubscribe:function(S){x.subscribers=x.subscribers.filter(function(I){return I!==S}),x.fire=x.subscribers.reduce(b,C)}};return a[D]=l[D]=x,x}function g(D){o(D).forEach(function(b){var C=D[b];if(u(C))m(b,D[b][0],D[b][1]);else if(C==="asap")var x=m(b,Mt,function(){for(var I=arguments.length,G=new Array(I);I--;)G[I]=arguments[I];x.subscribers.forEach(function(k){ae(function(){k.apply(null,G)})})});else throw new re.InvalidArgument("Invalid event config")})}}function Gr(s,a){return K(a).from({prototype:s}),a}function Rd(s){return Gr(tl.prototype,function(l,c,h){this.db=s,this._tx=h,this.name=l,this.schema=c,this.hook=s._allTables[l]?s._allTables[l].hook:Vr(null,{creating:[Br,Ee],reading:[Sa,Mt],updating:[xa,Ee],deleting:[ka,Ee]})})}function cr(s,a){return!(s.filter||s.algorithm||s.or)&&(a?s.justLimit:!s.replayFilter)}function La(s,a){s.filter=Ln(s.filter,a)}function Ra(s,a,l){var c=s.replayFilter;s.replayFilter=c?function(){return Ln(c(),a())}:a,s.justLimit=l&&!c}function Hd(s,a){s.isMatch=Ln(s.isMatch,a)}function Hi(s,a){if(s.isPrimKey)return a.primaryKey;var l=a.getIndexByKeyPath(s.index);if(!l)throw new re.Schema("KeyPath "+s.index+" on object store "+a.name+" is not indexed");return l}function nl(s,a,l){var c=Hi(s,a.schema);return a.openCursor({trans:l,values:!s.keysOnly,reverse:s.dir==="prev",unique:!!s.unique,query:{index:c,range:s.range}})}function Vi(s,a,l,c){var h=s.replayFilter?Ln(s.filter,s.replayFilter()):s.filter;if(s.or){var m={},g=function(D,b,C){if(!h||h(b,C,function(I){return b.stop(I)},function(I){return b.fail(I)})){var x=b.primaryKey,S=""+x;S==="[object ArrayBuffer]"&&(S=""+new Uint8Array(x)),E(m,S)||(m[S]=!0,a(D,b,C))}};return Promise.all([s.or._iterate(g,l),rl(nl(s,c,l),s.algorithm,g,!s.keysOnly&&s.valueMapper)])}else return rl(nl(s,c,l),Ln(s.algorithm,h),a,!s.keysOnly&&s.valueMapper)}function rl(s,a,l,c){var h=c?function(g,D,b){return l(c(g),D,b)}:l,m=xe(h);return s.then(function(g){if(g)return g.start(function(){var D=function(){return g.continue()};(!a||a(g,function(b){return D=b},function(b){g.stop(b),D=Ee},function(b){g.fail(b),D=Ee}))&&m(g.value,g,function(b){return D=b}),D()})})}var Vd=Symbol(),Kr=function(){function s(a){Object.assign(this,a)}return s.prototype.execute=function(a){var l;if(this.add!==void 0){var c=this.add;if(u(c))return r(r([],u(a)?a:[],!0),c,!0).sort();if(typeof c=="number")return(Number(a)||0)+c;if(typeof c=="bigint")try{return BigInt(a)+c}catch(g){return BigInt(0)+c}throw new TypeError("Invalid term ".concat(c))}if(this.remove!==void 0){var h=this.remove;if(u(h))return u(a)?a.filter(function(g){return!h.includes(g)}).sort():[];if(typeof h=="number")return Number(a)-h;if(typeof h=="bigint")try{return BigInt(a)-h}catch(g){return BigInt(0)-h}throw new TypeError("Invalid subtrahend ".concat(h))}var m=(l=this.replacePrefix)===null||l===void 0?void 0:l[0];return m&&typeof a=="string"&&a.startsWith(m)?this.replacePrefix[1]+a.substring(m.length):a},s}(),Gd=function(){function s(){}return s.prototype._read=function(a,l){var c=this._ctx;return c.error?c.table._trans(null,Be.bind(null,c.error)):c.table._trans("readonly",a).then(l)},s.prototype._write=function(a){var l=this._ctx;return l.error?l.table._trans(null,Be.bind(null,l.error)):l.table._trans("readwrite",a,"locked")},s.prototype._addAlgorithm=function(a){var l=this._ctx;l.algorithm=Ln(l.algorithm,a)},s.prototype._iterate=function(a,l){return Vi(this._ctx,a,l,this._ctx.table.core)},s.prototype.clone=function(a){var l=Object.create(this.constructor.prototype),c=Object.create(this._ctx);return a&&f(c,a),l._ctx=c,l},s.prototype.raw=function(){return this._ctx.valueMapper=null,this},s.prototype.each=function(a){var l=this._ctx;return this._read(function(c){return Vi(l,a,c,l.table.core)})},s.prototype.count=function(a){var l=this;return this._read(function(c){var h=l._ctx,m=h.table.core;if(cr(h,!0))return m.count({trans:c,query:{index:Hi(h,m.schema),range:h.range}}).then(function(D){return Math.min(D,h.limit)});var g=0;return Vi(h,function(){return++g,!1},c,m).then(function(){return g})}).then(a)},s.prototype.sortBy=function(a,l){var c=a.split(".").reverse(),h=c[0],m=c.length-1;function g(C,x){return x?g(C[c[x]],x-1):C[h]}var D=this._ctx.dir==="next"?1:-1;function b(C,x){var S=g(C,m),I=g(x,m);return me(S,I)*D}return this.toArray(function(C){return C.sort(b)}).then(l)},s.prototype.toArray=function(a){var l=this;return this._read(function(c){var h=l._ctx;if(h.dir==="next"&&cr(h,!0)&&h.limit>0){var m=h.valueMapper,g=Hi(h,h.table.core.schema);return h.table.core.query({trans:c,limit:h.limit,values:!0,query:{index:g,range:h.range}}).then(function(b){var C=b.result;return m?C.map(m):C})}else{var D=[];return Vi(h,function(b){return D.push(b)},c,h.table.core).then(function(){return D})}},a)},s.prototype.offset=function(a){var l=this._ctx;return a<=0?this:(l.offset+=a,cr(l)?Ra(l,function(){var c=a;return function(h,m){return c===0?!0:c===1?(--c,!1):(m(function(){h.advance(c),c=0}),!1)}}):Ra(l,function(){var c=a;return function(){return--c<0}}),this)},s.prototype.limit=function(a){return this._ctx.limit=Math.min(this._ctx.limit,a),Ra(this._ctx,function(){var l=a;return function(c,h,m){return--l<=0&&h(m),l>=0}},!0),this},s.prototype.until=function(a,l){return La(this._ctx,function(c,h,m){return a(c.value)?(h(m),l):!0}),this},s.prototype.first=function(a){return this.limit(1).toArray(function(l){return l[0]}).then(a)},s.prototype.last=function(a){return this.reverse().first(a)},s.prototype.filter=function(a){return La(this._ctx,function(l){return a(l.value)}),Hd(this._ctx,a),this},s.prototype.and=function(a){return this.filter(a)},s.prototype.or=function(a){return new this.db.WhereClause(this._ctx.table,a,this)},s.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},s.prototype.desc=function(){return this.reverse()},s.prototype.eachKey=function(a){var l=this._ctx;return l.keysOnly=!l.isMatch,this.each(function(c,h){a(h.key,h)})},s.prototype.eachUniqueKey=function(a){return this._ctx.unique="unique",this.eachKey(a)},s.prototype.eachPrimaryKey=function(a){var l=this._ctx;return l.keysOnly=!l.isMatch,this.each(function(c,h){a(h.primaryKey,h)})},s.prototype.keys=function(a){var l=this._ctx;l.keysOnly=!l.isMatch;var c=[];return this.each(function(h,m){c.push(m.key)}).then(function(){return c}).then(a)},s.prototype.primaryKeys=function(a){var l=this._ctx;if(l.dir==="next"&&cr(l,!0)&&l.limit>0)return this._read(function(h){var m=Hi(l,l.table.core.schema);return l.table.core.query({trans:h,values:!1,limit:l.limit,query:{index:m,range:l.range}})}).then(function(h){var m=h.result;return m}).then(a);l.keysOnly=!l.isMatch;var c=[];return this.each(function(h,m){c.push(m.primaryKey)}).then(function(){return c}).then(a)},s.prototype.uniqueKeys=function(a){return this._ctx.unique="unique",this.keys(a)},s.prototype.firstKey=function(a){return this.limit(1).keys(function(l){return l[0]}).then(a)},s.prototype.lastKey=function(a){return this.reverse().firstKey(a)},s.prototype.distinct=function(){var a=this._ctx,l=a.index&&a.table.schema.idxByName[a.index];if(!l||!l.multi)return this;var c={};return La(this._ctx,function(h){var m=h.primaryKey.toString(),g=E(c,m);return c[m]=!0,!g}),this},s.prototype.modify=function(a){var l=this,c=this._ctx;return this._write(function(h){var m;if(typeof a=="function")m=a;else{var g=o(a),D=g.length;m=function(N){for(var B=!1,V=0;V<D;++V){var P=g[V],z=a[P],Q=J(N,P);z instanceof Kr?(ce(N,P,z.execute(Q)),B=!0):Q!==z&&(ce(N,P,z),B=!0)}return B}}var b=c.table.core,C=b.schema.primaryKey,x=C.outbound,S=C.extractKey,I=200,G=l.db._options.modifyChunkSize;G&&(typeof G=="object"?I=G[b.name]||G["*"]||200:I=G);var k=[],O=0,A=[],H=function(N,B){var V=B.failures,P=B.numFailures;O+=N-P;for(var z=0,Q=o(V);z<Q.length;z++){var Y=Q[z];k.push(V[Y])}};return l.clone().primaryKeys().then(function(N){var B=cr(c)&&c.limit===1/0&&(typeof a!="function"||a===Ha)&&{index:c.index,range:c.range},V=function(P){var z=Math.min(I,N.length-P);return b.getMany({trans:h,keys:N.slice(P,P+z),cache:"immutable"}).then(function(Q){for(var Y=[],se=[],pe=x?[]:null,ee=[],de=0;de<z;++de){var oe=Q[de],be={value:yt(oe),primKey:N[P+de]};m.call(be,be.value,be)!==!1&&(be.value==null?ee.push(N[P+de]):!x&&me(S(oe),S(be.value))!==0?(ee.push(N[P+de]),Y.push(be.value)):(se.push(be.value),x&&pe.push(N[P+de])))}return Promise.resolve(Y.length>0&&b.mutate({trans:h,type:"add",values:Y}).then(function(ie){for(var Ae in ie.failures)ee.splice(parseInt(Ae),1);H(Y.length,ie)})).then(function(){return(se.length>0||B&&typeof a=="object")&&b.mutate({trans:h,type:"put",keys:pe,values:se,criteria:B,changeSpec:typeof a!="function"&&a,isAdditionalChunk:P>0}).then(function(ie){return H(se.length,ie)})}).then(function(){return(ee.length>0||B&&a===Ha)&&b.mutate({trans:h,type:"delete",keys:ee,criteria:B,isAdditionalChunk:P>0}).then(function(ie){return H(ee.length,ie)})}).then(function(){return N.length>P+z&&V(P+I)})})};return V(0).then(function(){if(k.length>0)throw new Ht("Error modifying one or more objects",k,O,A);return N.length})})})},s.prototype.delete=function(){var a=this._ctx,l=a.range;return cr(a)&&(a.isPrimKey||l.type===3)?this._write(function(c){var h=a.table.core.schema.primaryKey,m=l;return a.table.core.count({trans:c,query:{index:h,range:m}}).then(function(g){return a.table.core.mutate({trans:c,type:"deleteRange",range:m}).then(function(D){var b=D.failures;D.lastResult,D.results;var C=D.numFailures;if(C)throw new Ht("Could not delete some values",Object.keys(b).map(function(x){return b[x]}),g-C);return g-C})})}):this.modify(Ha)},s}(),Ha=function(s,a){return a.value=null};function Kd(s){return Gr(Gd.prototype,function(l,c){this.db=s;var h=Qu,m=null;if(c)try{h=c()}catch(C){m=C}var g=l._ctx,D=g.table,b=D.hook.reading.fire;this._ctx={table:D,index:g.index,isPrimKey:!g.index||D.schema.primKey.keyPath&&g.index===D.schema.primKey.name,range:h,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:m,or:g.or,valueMapper:b!==Mt?b:null}})}function qd(s,a){return s<a?-1:s===a?0:1}function jd(s,a){return s>a?-1:s===a?0:1}function ft(s,a,l){var c=s instanceof sl?new s.Collection(s):s;return c._ctx.error=l?new l(a):new TypeError(a),c}function fr(s){return new s.Collection(s,function(){return il("")}).limit(0)}function Ud(s){return s==="next"?function(a){return a.toUpperCase()}:function(a){return a.toLowerCase()}}function Wd(s){return s==="next"?function(a){return a.toLowerCase()}:function(a){return a.toUpperCase()}}function zd(s,a,l,c,h,m){for(var g=Math.min(s.length,c.length),D=-1,b=0;b<g;++b){var C=a[b];if(C!==c[b])return h(s[b],l[b])<0?s.substr(0,b)+l[b]+l.substr(b+1):h(s[b],c[b])<0?s.substr(0,b)+c[b]+l.substr(b+1):D>=0?s.substr(0,D)+a[D]+l.substr(D+1):null;h(s[b],C)<0&&(D=b)}return g<c.length&&m==="next"?s+l.substr(s.length):g<s.length&&m==="prev"?s.substr(0,l.length):D<0?null:s.substr(0,D)+c[D]+l.substr(D+1)}function Gi(s,a,l,c){var h,m,g,D,b,C,x,S=l.length;if(!l.every(function(O){return typeof O=="string"}))return ft(s,Ju);function I(O){h=Ud(O),m=Wd(O),g=O==="next"?qd:jd;var A=l.map(function(H){return{lower:m(H),upper:h(H)}}).sort(function(H,N){return g(H.lower,N.lower)});D=A.map(function(H){return H.upper}),b=A.map(function(H){return H.lower}),C=O,x=O==="next"?"":c}I("next");var G=new s.Collection(s,function(){return bn(D[0],b[S-1]+c)});G._ondirectionchange=function(O){I(O)};var k=0;return G._addAlgorithm(function(O,A,H){var N=O.key;if(typeof N!="string")return!1;var B=m(N);if(a(B,b,k))return!0;for(var V=null,P=k;P<S;++P){var z=zd(N,B,D[P],b[P],g,C);z===null&&V===null?k=P+1:(V===null||g(V,z)>0)&&(V=z)}return A(V!==null?function(){O.continue(V+x)}:H),!1}),G}function bn(s,a,l,c){return{type:2,lower:s,upper:a,lowerOpen:l,upperOpen:c}}function il(s){return{type:1,lower:s,upper:s}}var sl=function(){function s(){}return Object.defineProperty(s.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),s.prototype.between=function(a,l,c,h){c=c!==!1,h=h===!0;try{return this._cmp(a,l)>0||this._cmp(a,l)===0&&(c||h)&&!(c&&h)?fr(this):new this.Collection(this,function(){return bn(a,l,!c,!h)})}catch(m){return ft(this,sn)}},s.prototype.equals=function(a){return a==null?ft(this,sn):new this.Collection(this,function(){return il(a)})},s.prototype.above=function(a){return a==null?ft(this,sn):new this.Collection(this,function(){return bn(a,void 0,!0)})},s.prototype.aboveOrEqual=function(a){return a==null?ft(this,sn):new this.Collection(this,function(){return bn(a,void 0,!1)})},s.prototype.below=function(a){return a==null?ft(this,sn):new this.Collection(this,function(){return bn(void 0,a,!1,!0)})},s.prototype.belowOrEqual=function(a){return a==null?ft(this,sn):new this.Collection(this,function(){return bn(void 0,a)})},s.prototype.startsWith=function(a){return typeof a!="string"?ft(this,Ju):this.between(a,a+Bn,!0,!0)},s.prototype.startsWithIgnoreCase=function(a){return a===""?this.startsWith(a):Gi(this,function(l,c){return l.indexOf(c[0])===0},[a],Bn)},s.prototype.equalsIgnoreCase=function(a){return Gi(this,function(l,c){return l===c[0]},[a],"")},s.prototype.anyOfIgnoreCase=function(){var a=xt.apply(Xt,arguments);return a.length===0?fr(this):Gi(this,function(l,c){return c.indexOf(l)!==-1},a,"")},s.prototype.startsWithAnyOfIgnoreCase=function(){var a=xt.apply(Xt,arguments);return a.length===0?fr(this):Gi(this,function(l,c){return c.some(function(h){return l.indexOf(h)===0})},a,Bn)},s.prototype.anyOf=function(){var a=this,l=xt.apply(Xt,arguments),c=this._cmp;try{l.sort(c)}catch(g){return ft(this,sn)}if(l.length===0)return fr(this);var h=new this.Collection(this,function(){return bn(l[0],l[l.length-1])});h._ondirectionchange=function(g){c=g==="next"?a._ascending:a._descending,l.sort(c)};var m=0;return h._addAlgorithm(function(g,D,b){for(var C=g.key;c(C,l[m])>0;)if(++m,m===l.length)return D(b),!1;return c(C,l[m])===0?!0:(D(function(){g.continue(l[m])}),!1)}),h},s.prototype.notEqual=function(a){return this.inAnyRange([[Pa,a],[a,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},s.prototype.noneOf=function(){var a=xt.apply(Xt,arguments);if(a.length===0)return new this.Collection(this);try{a.sort(this._ascending)}catch(c){return ft(this,sn)}var l=a.reduce(function(c,h){return c?c.concat([[c[c.length-1][1],h]]):[[Pa,h]]},null);return l.push([a[a.length-1],this.db._maxKey]),this.inAnyRange(l,{includeLowers:!1,includeUppers:!1})},s.prototype.inAnyRange=function(a,l){var c=this,h=this._cmp,m=this._ascending,g=this._descending,D=this._min,b=this._max;if(a.length===0)return fr(this);if(!a.every(function(P){return P[0]!==void 0&&P[1]!==void 0&&m(P[0],P[1])<=0}))return ft(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",re.InvalidArgument);var C=!l||l.includeLowers!==!1,x=l&&l.includeUppers===!0;function S(P,z){for(var Q=0,Y=P.length;Q<Y;++Q){var se=P[Q];if(h(z[0],se[1])<0&&h(z[1],se[0])>0){se[0]=D(se[0],z[0]),se[1]=b(se[1],z[1]);break}}return Q===Y&&P.push(z),P}var I=m;function G(P,z){return I(P[0],z[0])}var k;try{k=a.reduce(S,[]),k.sort(G)}catch(P){return ft(this,sn)}var O=0,A=x?function(P){return m(P,k[O][1])>0}:function(P){return m(P,k[O][1])>=0},H=C?function(P){return g(P,k[O][0])>0}:function(P){return g(P,k[O][0])>=0};function N(P){return!A(P)&&!H(P)}var B=A,V=new this.Collection(this,function(){return bn(k[0][0],k[k.length-1][1],!C,!x)});return V._ondirectionchange=function(P){P==="next"?(B=A,I=m):(B=H,I=g),k.sort(G)},V._addAlgorithm(function(P,z,Q){for(var Y=P.key;B(Y);)if(++O,O===k.length)return z(Q),!1;return N(Y)?!0:(c._cmp(Y,k[O][1])===0||c._cmp(Y,k[O][0])===0||z(function(){I===m?P.continue(k[O][0]):P.continue(k[O][1])}),!1)}),V},s.prototype.startsWithAnyOf=function(){var a=xt.apply(Xt,arguments);return a.every(function(l){return typeof l=="string"})?a.length===0?fr(this):this.inAnyRange(a.map(function(l){return[l,l+Bn]})):ft(this,"startsWithAnyOf() only works with strings")},s}();function Yd(s){return Gr(sl.prototype,function(l,c,h){if(this.db=s,this._ctx={table:l,index:c===":id"?null:c,or:h},this._cmp=this._ascending=me,this._descending=function(m,g){return me(g,m)},this._max=function(m,g){return me(m,g)>0?m:g},this._min=function(m,g){return me(m,g)<0?m:g},this._IDBKeyRange=s._deps.IDBKeyRange,!this._IDBKeyRange)throw new re.MissingAPI})}function qt(s){return xe(function(a){return qr(a),s(a.target.error),!1})}function qr(s){s.stopPropagation&&s.stopPropagation(),s.preventDefault&&s.preventDefault()}var jr="storagemutated",Va="x-storagemutated-1",wn=Vr(null,jr),Zd=function(){function s(){}return s.prototype._lock=function(){return R(!$.global),++this._reculock,this._reculock===1&&!$.global&&($.lockOwnerFor=this),this},s.prototype._unlock=function(){if(R(!$.global),--this._reculock===0)for($.global||($.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var a=this._blockedFuncs.shift();try{Nn(a[1],a[0])}catch(l){}}return this},s.prototype._locked=function(){return this._reculock&&$.lockOwnerFor!==this},s.prototype.create=function(a){var l=this;if(!this.mode)return this;var c=this.db.idbdb,h=this.db._state.dbOpenError;if(R(!this.idbtrans),!a&&!c)switch(h&&h.name){case"DatabaseClosedError":throw new re.DatabaseClosed(h);case"MissingAPIError":throw new re.MissingAPI(h.message,h);default:throw new re.OpenFailed(h)}if(!this.active)throw new re.TransactionInactive;return R(this._completion._state===null),a=this.idbtrans=a||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):c.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),a.onerror=xe(function(m){qr(m),l._reject(a.error)}),a.onabort=xe(function(m){qr(m),l.active&&l._reject(new re.Abort(a.error)),l.active=!1,l.on("abort").fire(m)}),a.oncomplete=xe(function(){l.active=!1,l._resolve(),"mutatedParts"in a&&wn.storagemutated.fire(a.mutatedParts)}),this},s.prototype._promise=function(a,l,c){var h=this;if(a==="readwrite"&&this.mode!=="readwrite")return Be(new re.ReadOnly("Transaction is readonly"));if(!this.active)return Be(new re.TransactionInactive);if(this._locked())return new j(function(g,D){h._blockedFuncs.push([function(){h._promise(a,l,c).then(g,D)},$])});if(c)return yn(function(){var g=new j(function(D,b){h._lock();var C=l(D,b,h);C&&C.then&&C.then(D,b)});return g.finally(function(){return h._unlock()}),g._lib=!0,g});var m=new j(function(g,D){var b=l(g,D,h);b&&b.then&&b.then(g,D)});return m._lib=!0,m},s.prototype._root=function(){return this.parent?this.parent._root():this},s.prototype.waitFor=function(a){var l=this._root(),c=j.resolve(a);if(l._waitingFor)l._waitingFor=l._waitingFor.then(function(){return c});else{l._waitingFor=c,l._waitingQueue=[];var h=l.idbtrans.objectStore(l.storeNames[0]);(function g(){for(++l._spinCount;l._waitingQueue.length;)l._waitingQueue.shift()();l._waitingFor&&(h.get(-1/0).onsuccess=g)})()}var m=l._waitingFor;return new j(function(g,D){c.then(function(b){return l._waitingQueue.push(xe(g.bind(null,b)))},function(b){return l._waitingQueue.push(xe(D.bind(null,b)))}).finally(function(){l._waitingFor===m&&(l._waitingFor=null)})})},s.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new re.Abort))},s.prototype.table=function(a){var l=this._memoizedTables||(this._memoizedTables={});if(E(l,a))return l[a];var c=this.schema[a];if(!c)throw new re.NotFound("Table "+a+" not part of transaction");var h=new this.db.Table(a,c,this);return h.core=this.db.core.table(a),l[a]=h,h},s}();function Jd(s){return Gr(Zd.prototype,function(l,c,h,m,g){var D=this;this.db=s,this.mode=l,this.storeNames=c,this.schema=h,this.chromeTransactionDurability=m,this.idbtrans=null,this.on=Vr(this,"complete","error","abort"),this.parent=g||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new j(function(b,C){D._resolve=b,D._reject=C}),this._completion.then(function(){D.active=!1,D.on.complete.fire()},function(b){var C=D.active;return D.active=!1,D.on.error.fire(b),D.parent?D.parent._reject(b):C&&D.idbtrans&&D.idbtrans.abort(),Be(b)})})}function Ga(s,a,l,c,h,m,g){return{name:s,keyPath:a,unique:l,multi:c,auto:h,compound:m,src:(l&&!g?"&":"")+(c?"*":"")+(h?"++":"")+al(a)}}function al(s){return typeof s=="string"?s:s?"["+[].join.call(s,"+")+"]":""}function Ka(s,a,l){return{name:s,primKey:a,indexes:l,mappedClass:null,idxByName:we(l,function(c){return[c.name,c]})}}function Qd(s){return s.length===1?s[0]:s}var Ur=function(s){try{return s.only([[]]),Ur=function(){return[[]]},[[]]}catch(a){return Ur=function(){return Bn},Bn}};function qa(s){return s==null?function(){}:typeof s=="string"?$d(s):function(a){return J(a,s)}}function $d(s){var a=s.split(".");return a.length===1?function(l){return l[s]}:function(l){return J(l,s)}}function ol(s){return[].slice.call(s)}var Xd=0;function Wr(s){return s==null?":id":typeof s=="string"?s:"[".concat(s.join("+"),"]")}function ep(s,a,l){function c(S,I){var G=ol(S.objectStoreNames);return{schema:{name:S.name,tables:G.map(function(k){return I.objectStore(k)}).map(function(k){var O=k.keyPath,A=k.autoIncrement,H=u(O),N=O==null,B={},V={name:k.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:N,compound:H,keyPath:O,autoIncrement:A,unique:!0,extractKey:qa(O)},indexes:ol(k.indexNames).map(function(P){return k.index(P)}).map(function(P){var z=P.name,Q=P.unique,Y=P.multiEntry,se=P.keyPath,pe=u(se),ee={name:z,compound:pe,keyPath:se,unique:Q,multiEntry:Y,extractKey:qa(se)};return B[Wr(se)]=ee,ee}),getIndexByKeyPath:function(P){return B[Wr(P)]}};return B[":id"]=V.primaryKey,O!=null&&(B[Wr(O)]=V.primaryKey),V})},hasGetAll:G.length>0&&"getAll"in I.objectStore(G[0])&&!(typeof navigator!="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function h(S){if(S.type===3)return null;if(S.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var I=S.lower,G=S.upper,k=S.lowerOpen,O=S.upperOpen,A=I===void 0?G===void 0?null:a.upperBound(G,!!O):G===void 0?a.lowerBound(I,!!k):a.bound(I,G,!!k,!!O);return A}function m(S){var I=S.name;function G(A){var H=A.trans,N=A.type,B=A.keys,V=A.values,P=A.range;return new Promise(function(z,Q){z=xe(z);var Y=H.objectStore(I),se=Y.keyPath==null,pe=N==="put"||N==="add";if(!pe&&N!=="delete"&&N!=="deleteRange")throw new Error("Invalid operation type: "+N);var ee=(B||V||{length:1}).length;if(B&&V&&B.length!==V.length)throw new Error("Given keys array must have same length as given values array.");if(ee===0)return z({numFailures:0,failures:{},results:[],lastResult:void 0});var de,oe=[],be=[],ie=0,Ae=function(Ut){++ie,qr(Ut)};if(N==="deleteRange"){if(P.type===4)return z({numFailures:ie,failures:be,results:[],lastResult:void 0});P.type===3?oe.push(de=Y.clear()):oe.push(de=Y.delete(h(P)))}else{var et=pe?se?[V,B]:[V,null]:[B,null],jt=et[0],ot=et[1];if(pe)for(var Dt=0;Dt<ee;++Dt)oe.push(de=ot&&ot[Dt]!==void 0?Y[N](jt[Dt],ot[Dt]):Y[N](jt[Dt])),de.onerror=Ae;else for(var Dt=0;Dt<ee;++Dt)oe.push(de=Y[N](jt[Dt])),de.onerror=Ae}var Fn=function(Ut){var Zr=Ut.target.result;oe.forEach(function(At,Xi){return At.error!=null&&(be[Xi]=At.error)}),z({numFailures:ie,failures:be,results:N==="delete"?B:oe.map(function(At){return At.result}),lastResult:Zr})};de.onerror=function(Ut){Ae(Ut),Fn(Ut)},de.onsuccess=Fn})}function k(A){var H=A.trans,N=A.values,B=A.query,V=A.reverse,P=A.unique;return new Promise(function(z,Q){z=xe(z);var Y=B.index,se=B.range,pe=H.objectStore(I),ee=Y.isPrimaryKey?pe:pe.index(Y.name),de=V?P?"prevunique":"prev":P?"nextunique":"next",oe=N||!("openKeyCursor"in ee)?ee.openCursor(h(se),de):ee.openKeyCursor(h(se),de);oe.onerror=qt(Q),oe.onsuccess=xe(function(be){var ie=oe.result;if(!ie){z(null);return}ie.___id=++Xd,ie.done=!1;var Ae=ie.continue.bind(ie),et=ie.continuePrimaryKey;et&&(et=et.bind(ie));var jt=ie.advance.bind(ie),ot=function(){throw new Error("Cursor not started")},Dt=function(){throw new Error("Cursor not stopped")};ie.trans=H,ie.stop=ie.continue=ie.continuePrimaryKey=ie.advance=ot,ie.fail=xe(Q),ie.next=function(){var Fn=this,Ut=1;return this.start(function(){return Ut--?Fn.continue():Fn.stop()}).then(function(){return Fn})},ie.start=function(Fn){var Ut=new Promise(function(At,Xi){At=xe(At),oe.onerror=qt(Xi),ie.fail=Xi,ie.stop=function(Gp){ie.stop=ie.continue=ie.continuePrimaryKey=ie.advance=Dt,At(Gp)}}),Zr=function(){if(oe.result)try{Fn()}catch(At){ie.fail(At)}else ie.done=!0,ie.start=function(){throw new Error("Cursor behind last entry")},ie.stop()};return oe.onsuccess=xe(function(At){oe.onsuccess=Zr,Zr()}),ie.continue=Ae,ie.continuePrimaryKey=et,ie.advance=jt,Zr(),Ut},z(ie)},Q)})}function O(A){return function(H){return new Promise(function(N,B){N=xe(N);var V=H.trans,P=H.values,z=H.limit,Q=H.query,Y=z===1/0?void 0:z,se=Q.index,pe=Q.range,ee=V.objectStore(I),de=se.isPrimaryKey?ee:ee.index(se.name),oe=h(pe);if(z===0)return N({result:[]});if(A){var be=P?de.getAll(oe,Y):de.getAllKeys(oe,Y);be.onsuccess=function(jt){return N({result:jt.target.result})},be.onerror=qt(B)}else{var ie=0,Ae=P||!("openKeyCursor"in de)?de.openCursor(oe):de.openKeyCursor(oe),et=[];Ae.onsuccess=function(jt){var ot=Ae.result;if(!ot)return N({result:et});if(et.push(P?ot.value:ot.primaryKey),++ie===z)return N({result:et});ot.continue()},Ae.onerror=qt(B)}})}}return{name:I,schema:S,mutate:G,getMany:function(A){var H=A.trans,N=A.keys;return new Promise(function(B,V){B=xe(B);for(var P=H.objectStore(I),z=N.length,Q=new Array(z),Y=0,se=0,pe,ee=function(ie){var Ae=ie.target;(Q[Ae._pos]=Ae.result)!=null,++se===Y&&B(Q)},de=qt(V),oe=0;oe<z;++oe){var be=N[oe];be!=null&&(pe=P.get(N[oe]),pe._pos=oe,pe.onsuccess=ee,pe.onerror=de,++Y)}Y===0&&B(Q)})},get:function(A){var H=A.trans,N=A.key;return new Promise(function(B,V){B=xe(B);var P=H.objectStore(I),z=P.get(N);z.onsuccess=function(Q){return B(Q.target.result)},z.onerror=qt(V)})},query:O(b),openCursor:k,count:function(A){var H=A.query,N=A.trans,B=H.index,V=H.range;return new Promise(function(P,z){var Q=N.objectStore(I),Y=B.isPrimaryKey?Q:Q.index(B.name),se=h(V),pe=se?Y.count(se):Y.count();pe.onsuccess=xe(function(ee){return P(ee.target.result)}),pe.onerror=qt(z)})}}}var g=c(s,l),D=g.schema,b=g.hasGetAll,C=D.tables.map(function(S){return m(S)}),x={};return C.forEach(function(S){return x[S.name]=S}),{stack:"dbcore",transaction:s.transaction.bind(s),table:function(S){var I=x[S];if(!I)throw new Error("Table '".concat(S,"' not found"));return x[S]},MIN_KEY:-1/0,MAX_KEY:Ur(a),schema:D}}function tp(s,a){return a.reduce(function(l,c){var h=c.create;return n(n({},l),h(l))},s)}function np(s,a,l,c){var h=l.IDBKeyRange;l.indexedDB;var m=tp(ep(a,h,c),s.dbcore);return{dbcore:m}}function Ki(s,a){var l=a.db,c=np(s._middlewares,l,s._deps,a);s.core=c.dbcore,s.tables.forEach(function(h){var m=h.name;s.core.schema.tables.some(function(g){return g.name===m})&&(h.core=s.core.table(m),s[m]instanceof s.Table&&(s[m].core=h.core))})}function qi(s,a,l,c){l.forEach(function(h){var m=c[h];a.forEach(function(g){var D=ye(g,h);(!D||"value"in D&&D.value===void 0)&&(g===s.Transaction.prototype||g instanceof s.Transaction?M(g,h,{get:function(){return this.table(h)},set:function(b){_(this,h,{value:b,writable:!0,configurable:!0,enumerable:!0})}}):g[h]=new s.Table(h,m))})})}function ja(s,a){a.forEach(function(l){for(var c in l)l[c]instanceof s.Table&&delete l[c]})}function rp(s,a){return s._cfg.version-a._cfg.version}function ip(s,a,l,c){var h=s._dbSchema;l.objectStoreNames.contains("$meta")&&!h.$meta&&(h.$meta=Ka("$meta",ll("")[0],[]),s._storeNames.push("$meta"));var m=s._createTransaction("readwrite",s._storeNames,h);m.create(l),m._completion.catch(c);var g=m._reject.bind(m),D=$.transless||$;yn(function(){if($.trans=m,$.transless=D,a===0)o(h).forEach(function(b){Wa(l,b,h[b].primKey,h[b].indexes)}),Ki(s,l),j.follow(function(){return s.on.populate.fire(m)}).catch(g);else return Ki(s,l),ap(s,m,a).then(function(b){return op(s,b,m,l)}).catch(g)})}function sp(s,a){ul(s._dbSchema,a),a.db.version%10===0&&!a.objectStoreNames.contains("$meta")&&a.db.createObjectStore("$meta").add(Math.ceil(a.db.version/10-1),"version");var l=Ui(s,s.idbdb,a);Wi(s,s._dbSchema,a);for(var c=Ua(l,s._dbSchema),h=function(C){if(C.change.length||C.recreate)return console.warn("Unable to patch indexes of table ".concat(C.name," because it has changes on the type of index or primary key.")),{value:void 0};var x=a.objectStore(C.name);C.add.forEach(function(S){vt&&console.debug("Dexie upgrade patch: Creating missing index ".concat(C.name,".").concat(S.src)),ji(x,S)})},m=0,g=c.change;m<g.length;m++){var D=g[m],b=h(D);if(typeof b=="object")return b.value}}function ap(s,a,l){return a.storeNames.includes("$meta")?a.table("$meta").get("version").then(function(c){return c!=null?c:l}):j.resolve(l)}function op(s,a,l,c){var h=[],m=s._versions,g=s._dbSchema=Ui(s,s.idbdb,c),D=m.filter(function(C){return C._cfg.version>=a});if(D.length===0)return j.resolve();D.forEach(function(C){h.push(function(){var x=g,S=C._cfg.dbschema;Wi(s,x,c),Wi(s,S,c),g=s._dbSchema=S;var I=Ua(x,S);I.add.forEach(function(N){Wa(c,N[0],N[1].primKey,N[1].indexes)}),I.change.forEach(function(N){if(N.recreate)throw new re.Upgrade("Not yet support for changing primary key");var B=c.objectStore(N.name);N.add.forEach(function(V){return ji(B,V)}),N.change.forEach(function(V){B.deleteIndex(V.name),ji(B,V)}),N.del.forEach(function(V){return B.deleteIndex(V)})});var G=C._cfg.contentUpgrade;if(G&&C._cfg.version>a){Ki(s,c),l._memoizedTables={};var k=Ce(S);I.del.forEach(function(N){k[N]=x[N]}),ja(s,[s.Transaction.prototype]),qi(s,[s.Transaction.prototype],o(k),k),l.schema=k;var O=Xn(G);O&&ur();var A,H=j.follow(function(){if(A=G(l),A&&O){var N=vn.bind(null,null);A.then(N,N)}});return A&&typeof A.then=="function"?j.resolve(A):H.then(function(){return A})}}),h.push(function(x){var S=C._cfg.dbschema;up(S,x),ja(s,[s.Transaction.prototype]),qi(s,[s.Transaction.prototype],s._storeNames,s._dbSchema),l.schema=s._dbSchema}),h.push(function(x){s.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(s.idbdb.version/10)===C._cfg.version?(s.idbdb.deleteObjectStore("$meta"),delete s._dbSchema.$meta,s._storeNames=s._storeNames.filter(function(S){return S!=="$meta"})):x.objectStore("$meta").put(C._cfg.version,"version"))})});function b(){return h.length?j.resolve(h.shift()(l.idbtrans)).then(b):j.resolve()}return b().then(function(){ul(g,c)})}function Ua(s,a){var l={del:[],add:[],change:[]},c;for(c in s)a[c]||l.del.push(c);for(c in a){var h=s[c],m=a[c];if(!h)l.add.push([c,m]);else{var g={name:c,def:m,recreate:!1,del:[],add:[],change:[]};if(""+(h.primKey.keyPath||"")!=""+(m.primKey.keyPath||"")||h.primKey.auto!==m.primKey.auto)g.recreate=!0,l.change.push(g);else{var D=h.idxByName,b=m.idxByName,C=void 0;for(C in D)b[C]||g.del.push(C);for(C in b){var x=D[C],S=b[C];x?x.src!==S.src&&g.change.push(S):g.add.push(S)}(g.del.length>0||g.add.length>0||g.change.length>0)&&l.change.push(g)}}}return l}function Wa(s,a,l,c){var h=s.db.createObjectStore(a,l.keyPath?{keyPath:l.keyPath,autoIncrement:l.auto}:{autoIncrement:l.auto});return c.forEach(function(m){return ji(h,m)}),h}function ul(s,a){o(s).forEach(function(l){a.db.objectStoreNames.contains(l)||(vt&&console.debug("Dexie: Creating missing table",l),Wa(a,l,s[l].primKey,s[l].indexes))})}function up(s,a){[].slice.call(a.db.objectStoreNames).forEach(function(l){return s[l]==null&&a.db.deleteObjectStore(l)})}function ji(s,a){s.createIndex(a.name,a.keyPath,{unique:a.unique,multiEntry:a.multi})}function Ui(s,a,l){var c={},h=Te(a.objectStoreNames,0);return h.forEach(function(m){for(var g=l.objectStore(m),D=g.keyPath,b=Ga(al(D),D||"",!0,!1,!!g.autoIncrement,D&&typeof D!="string",!0),C=[],x=0;x<g.indexNames.length;++x){var S=g.index(g.indexNames[x]);D=S.keyPath;var I=Ga(S.name,D,!!S.unique,!!S.multiEntry,!1,D&&typeof D!="string",!1);C.push(I)}c[m]=Ka(m,b,C)}),c}function lp(s,a,l){s.verno=a.version/10;var c=s._dbSchema=Ui(s,a,l);s._storeNames=Te(a.objectStoreNames,0),qi(s,[s._allTables],o(c),c)}function cp(s,a){var l=Ui(s,s.idbdb,a),c=Ua(l,s._dbSchema);return!(c.add.length||c.change.some(function(h){return h.add.length||h.change.length}))}function Wi(s,a,l){for(var c=l.db.objectStoreNames,h=0;h<c.length;++h){var m=c[h],g=l.objectStore(m);s._hasGetAll="getAll"in g;for(var D=0;D<g.indexNames.length;++D){var b=g.indexNames[D],C=g.index(b).keyPath,x=typeof C=="string"?C:"["+Te(C).join("+")+"]";if(a[m]){var S=a[m].idxByName[x];S&&(S.name=b,delete a[m].idxByName[x],a[m].idxByName[b]=S)}}}typeof navigator!="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(s._hasGetAll=!1)}function ll(s){return s.split(",").map(function(a,l){a=a.trim();var c=a.replace(/([&*]|\+\+)/g,""),h=/^\[/.test(c)?c.match(/^\[(.*)\]$/)[1].split("+"):c;return Ga(c,h||null,/\&/.test(a),/\*/.test(a),/\+\+/.test(a),u(h),l===0)})}var fp=function(){function s(){}return s.prototype._parseStoresSpec=function(a,l){o(a).forEach(function(c){if(a[c]!==null){var h=ll(a[c]),m=h.shift();if(m.unique=!0,m.multi)throw new re.Schema("Primary key cannot be multi-valued");h.forEach(function(g){if(g.auto)throw new re.Schema("Only primary key can be marked as autoIncrement (++)");if(!g.keyPath)throw new re.Schema("Index must have a name and cannot be an empty string")}),l[c]=Ka(c,m,h)}})},s.prototype.stores=function(a){var l=this.db;this._cfg.storesSource=this._cfg.storesSource?f(this._cfg.storesSource,a):a;var c=l._versions,h={},m={};return c.forEach(function(g){f(h,g._cfg.storesSource),m=g._cfg.dbschema={},g._parseStoresSpec(h,m)}),l._dbSchema=m,ja(l,[l._allTables,l,l.Transaction.prototype]),qi(l,[l._allTables,l,l.Transaction.prototype,this._cfg.tables],o(m),m),l._storeNames=o(m),this},s.prototype.upgrade=function(a){return this._cfg.contentUpgrade=Lr(this._cfg.contentUpgrade||Ee,a),this},s}();function hp(s){return Gr(fp.prototype,function(l){this.db=s,this._cfg={version:l,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function za(s,a){var l=s._dbNamesDB;return l||(l=s._dbNamesDB=new an(Li,{addons:[],indexedDB:s,IDBKeyRange:a}),l.version(1).stores({dbnames:"name"})),l.table("dbnames")}function Ya(s){return s&&typeof s.databases=="function"}function dp(s){var a=s.indexedDB,l=s.IDBKeyRange;return Ya(a)?Promise.resolve(a.databases()).then(function(c){return c.map(function(h){return h.name}).filter(function(h){return h!==Li})}):za(a,l).toCollection().primaryKeys()}function pp(s,a){var l=s.indexedDB,c=s.IDBKeyRange;!Ya(l)&&a!==Li&&za(l,c).put({name:a}).catch(Ee)}function mp(s,a){var l=s.indexedDB,c=s.IDBKeyRange;!Ya(l)&&a!==Li&&za(l,c).delete(a).catch(Ee)}function Za(s){return yn(function(){return $.letThrough=!0,s()})}function gp(){var s=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!s||!indexedDB.databases)return Promise.resolve();var a;return new Promise(function(l){var c=function(){return indexedDB.databases().finally(l)};a=setInterval(c,100),c()}).finally(function(){return clearInterval(a)})}var Ja;function Qa(s){return!("from"in s)}var Xe=function(s,a){if(this)f(this,arguments.length?{d:1,from:s,to:arguments.length>1?a:s}:{d:0});else{var l=new Xe;return s&&"d"in s&&f(l,s),l}};y(Xe.prototype,(Ja={add:function(s){return Yr(this,s),this},addKey:function(s){return zr(this,s,s),this},addKeys:function(s){var a=this;return s.forEach(function(l){return zr(a,l,l)}),this},hasKey:function(s){var a=zi(this).next(s).value;return a&&me(a.from,s)<=0&&me(a.to,s)>=0}},Ja[$t]=function(){return zi(this)},Ja));function zr(s,a,l){var c=me(a,l);if(!isNaN(c)){if(c>0)throw RangeError();if(Qa(s))return f(s,{from:a,to:l,d:1});var h=s.l,m=s.r;if(me(l,s.from)<0)return h?zr(h,a,l):s.l={from:a,to:l,d:1,l:null,r:null},fl(s);if(me(a,s.to)>0)return m?zr(m,a,l):s.r={from:a,to:l,d:1,l:null,r:null},fl(s);me(a,s.from)<0&&(s.from=a,s.l=null,s.d=m?m.d+1:1),me(l,s.to)>0&&(s.to=l,s.r=null,s.d=s.l?s.l.d+1:1);var g=!s.r;h&&!s.l&&Yr(s,h),m&&g&&Yr(s,m)}}function Yr(s,a){function l(c,h){var m=h.from,g=h.to,D=h.l,b=h.r;zr(c,m,g),D&&l(c,D),b&&l(c,b)}Qa(a)||l(s,a)}function cl(s,a){var l=zi(a),c=l.next();if(c.done)return!1;for(var h=c.value,m=zi(s),g=m.next(h.from),D=g.value;!c.done&&!g.done;){if(me(D.from,h.to)<=0&&me(D.to,h.from)>=0)return!0;me(h.from,D.from)<0?h=(c=l.next(D.from)).value:D=(g=m.next(h.from)).value}return!1}function zi(s){var a=Qa(s)?null:{s:0,n:s};return{next:function(l){for(var c=arguments.length>0;a;)switch(a.s){case 0:if(a.s=1,c)for(;a.n.l&&me(l,a.n.from)<0;)a={up:a,n:a.n.l,s:1};else for(;a.n.l;)a={up:a,n:a.n.l,s:1};case 1:if(a.s=2,!c||me(l,a.n.to)<=0)return{value:a.n,done:!1};case 2:if(a.n.r){a.s=3,a={up:a,n:a.n.r,s:0};continue}case 3:a=a.up}return{done:!0}}}}function fl(s){var a,l,c=(((a=s.r)===null||a===void 0?void 0:a.d)||0)-(((l=s.l)===null||l===void 0?void 0:l.d)||0),h=c>1?"r":c<-1?"l":"";if(h){var m=h==="r"?"l":"r",g=n({},s),D=s[h];s.from=D.from,s.to=D.to,s[h]=D[h],g[h]=D[m],s[m]=g,g.d=hl(g)}s.d=hl(s)}function hl(s){var a=s.r,l=s.l;return(a?l?Math.max(a.d,l.d):a.d:l?l.d:0)+1}function Yi(s,a){return o(a).forEach(function(l){s[l]?Yr(s[l],a[l]):s[l]=ze(a[l])}),s}function $a(s,a){return s.all||a.all||Object.keys(s).some(function(l){return a[l]&&cl(a[l],s[l])})}var Rn={},Xa={},eo=!1;function Zi(s,a){Yi(Xa,s),eo||(eo=!0,setTimeout(function(){eo=!1;var l=Xa;Xa={},to(l,!1)},0))}function to(s,a){a===void 0&&(a=!1);var l=new Set;if(s.all)for(var c=0,h=Object.values(Rn);c<h.length;c++){var m=h[c];dl(m,s,l,a)}else for(var g in s){var D=/^idb\:\/\/(.*)\/(.*)\//.exec(g);if(D){var b=D[1],C=D[2],m=Rn["idb://".concat(b,"/").concat(C)];m&&dl(m,s,l,a)}}l.forEach(function(x){return x()})}function dl(s,a,l,c){for(var h=[],m=0,g=Object.entries(s.queries.query);m<g.length;m++){for(var D=g[m],b=D[0],C=D[1],x=[],S=0,I=C;S<I.length;S++){var G=I[S];$a(a,G.obsSet)?G.subscribers.forEach(function(H){return l.add(H)}):c&&x.push(G)}c&&h.push([b,x])}if(c)for(var k=0,O=h;k<O.length;k++){var A=O[k],b=A[0],x=A[1];s.queries.query[b]=x}}function yp(s){var a=s._state,l=s._deps.indexedDB;if(a.isBeingOpened||s.idbdb)return a.dbReadyPromise.then(function(){return a.dbOpenError?Be(a.dbOpenError):s});a.isBeingOpened=!0,a.dbOpenError=null,a.openComplete=!1;var c=a.openCanceller,h=Math.round(s.verno*10),m=!1;function g(){if(a.openCanceller!==c)throw new re.DatabaseClosed("db.open() was cancelled")}var D=a.dbReadyResolve,b=null,C=!1,x=function(){return new j(function(S,I){if(g(),!l)throw new re.MissingAPI;var G=s.name,k=a.autoSchema||!h?l.open(G):l.open(G,h);if(!k)throw new re.MissingAPI;k.onerror=qt(I),k.onblocked=xe(s._fireOnBlocked),k.onupgradeneeded=xe(function(O){if(b=k.transaction,a.autoSchema&&!s._options.allowEmptyDB){k.onerror=qr,b.abort(),k.result.close();var A=l.deleteDatabase(G);A.onsuccess=A.onerror=xe(function(){I(new re.NoSuchDatabase("Database ".concat(G," doesnt exist")))})}else{b.onerror=qt(I);var H=O.oldVersion>Math.pow(2,62)?0:O.oldVersion;C=H<1,s.idbdb=k.result,m&&sp(s,b),ip(s,H/10,b,I)}},I),k.onsuccess=xe(function(){b=null;var O=s.idbdb=k.result,A=Te(O.objectStoreNames);if(A.length>0)try{var H=O.transaction(Qd(A),"readonly");if(a.autoSchema)lp(s,O,H);else if(Wi(s,s._dbSchema,H),!cp(s,H)&&!m)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),O.close(),h=O.version+1,m=!0,S(x());Ki(s,H)}catch(N){}lr.push(s),O.onversionchange=xe(function(N){a.vcFired=!0,s.on("versionchange").fire(N)}),O.onclose=xe(function(N){s.on("close").fire(N)}),C&&pp(s._deps,G),S()},I)}).catch(function(S){switch(S==null?void 0:S.name){case"UnknownError":if(a.PR1398_maxLoop>0)return a.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),x();break;case"VersionError":if(h>0)return h=0,x();break}return j.reject(S)})};return j.race([c,(typeof navigator=="undefined"?j.resolve():gp()).then(x)]).then(function(){return g(),a.onReadyBeingFired=[],j.resolve(Za(function(){return s.on.ready.fire(s.vip)})).then(function S(){if(a.onReadyBeingFired.length>0){var I=a.onReadyBeingFired.reduce(Lr,Ee);return a.onReadyBeingFired=[],j.resolve(Za(function(){return I(s.vip)})).then(S)}})}).finally(function(){a.openCanceller===c&&(a.onReadyBeingFired=null,a.isBeingOpened=!1)}).catch(function(S){a.dbOpenError=S;try{b&&b.abort()}catch(I){}return c===a.openCanceller&&s._close(),Be(S)}).finally(function(){a.openComplete=!0,D()}).then(function(){if(C){var S={};s.tables.forEach(function(I){I.schema.indexes.forEach(function(G){G.name&&(S["idb://".concat(s.name,"/").concat(I.name,"/").concat(G.name)]=new Xe(-1/0,[[[]]]))}),S["idb://".concat(s.name,"/").concat(I.name,"/")]=S["idb://".concat(s.name,"/").concat(I.name,"/:dels")]=new Xe(-1/0,[[[]]])}),wn(jr).fire(S),to(S,!0)}return s})}function no(s){var a=function(g){return s.next(g)},l=function(g){return s.throw(g)},c=m(a),h=m(l);function m(g){return function(D){var b=g(D),C=b.value;return b.done?C:!C||typeof C.then!="function"?u(C)?Promise.all(C).then(c,h):c(C):C.then(c,h)}}return m(a)()}function vp(s,a,l){var c=arguments.length;if(c<2)throw new re.InvalidArgument("Too few arguments");for(var h=new Array(c-1);--c;)h[c-1]=arguments[c];l=h.pop();var m=Se(h);return[s,m,l]}function pl(s,a,l,c,h){return j.resolve().then(function(){var m=$.transless||$,g=s._createTransaction(a,l,s._dbSchema,c);g.explicit=!0;var D={trans:g,transless:m};if(c)g.idbtrans=c.idbtrans;else try{g.create(),g.idbtrans._explicit=!0,s._state.PR1398_maxLoop=3}catch(S){return S.name===Tt.InvalidState&&s.isOpen()&&--s._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),s.close({disableAutoOpen:!1}),s.open().then(function(){return pl(s,a,l,null,h)})):Be(S)}var b=Xn(h);b&&ur();var C,x=j.follow(function(){if(C=h.call(g,g),C)if(b){var S=vn.bind(null,null);C.then(S,S)}else typeof C.next=="function"&&typeof C.throw=="function"&&(C=no(C))},D);return(C&&typeof C.then=="function"?j.resolve(C).then(function(S){return g.active?S:Be(new re.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):x.then(function(){return C})).then(function(S){return c&&g._resolve(),g._completion.then(function(){return S})}).catch(function(S){return g._reject(S),Be(S)})})}function Ji(s,a,l){for(var c=u(s)?s.slice():[s],h=0;h<l;++h)c.push(a);return c}function Dp(s){return n(n({},s),{table:function(a){var l=s.table(a),c=l.schema,h={},m=[];function g(O,A,H){var N=Wr(O),B=h[N]=h[N]||[],V=O==null?0:typeof O=="string"?1:O.length,P=A>0,z=n(n({},H),{name:P?"".concat(N,"(virtual-from:").concat(H.name,")"):H.name,lowLevelIndex:H,isVirtual:P,keyTail:A,keyLength:V,extractKey:qa(O),unique:!P&&H.unique});if(B.push(z),z.isPrimaryKey||m.push(z),V>1){var Q=V===2?O[0]:O.slice(0,V-1);g(Q,A+1,H)}return B.sort(function(Y,se){return Y.keyTail-se.keyTail}),z}var D=g(c.primaryKey.keyPath,0,c.primaryKey);h[":id"]=[D];for(var b=0,C=c.indexes;b<C.length;b++){var x=C[b];g(x.keyPath,0,x)}function S(O){var A=h[Wr(O)];return A&&A[0]}function I(O,A){return{type:O.type===1?2:O.type,lower:Ji(O.lower,O.lowerOpen?s.MAX_KEY:s.MIN_KEY,A),lowerOpen:!0,upper:Ji(O.upper,O.upperOpen?s.MIN_KEY:s.MAX_KEY,A),upperOpen:!0}}function G(O){var A=O.query.index;return A.isVirtual?n(n({},O),{query:{index:A.lowLevelIndex,range:I(O.query.range,A.keyTail)}}):O}var k=n(n({},l),{schema:n(n({},c),{primaryKey:D,indexes:m,getIndexByKeyPath:S}),count:function(O){return l.count(G(O))},query:function(O){return l.query(G(O))},openCursor:function(O){var A=O.query.index,H=A.keyTail,N=A.isVirtual,B=A.keyLength;if(!N)return l.openCursor(O);function V(P){function z(Y){Y!=null?P.continue(Ji(Y,O.reverse?s.MAX_KEY:s.MIN_KEY,H)):O.unique?P.continue(P.key.slice(0,B).concat(O.reverse?s.MIN_KEY:s.MAX_KEY,H)):P.continue()}var Q=Object.create(P,{continue:{value:z},continuePrimaryKey:{value:function(Y,se){P.continuePrimaryKey(Ji(Y,s.MAX_KEY,H),se)}},primaryKey:{get:function(){return P.primaryKey}},key:{get:function(){var Y=P.key;return B===1?Y[0]:Y.slice(0,B)}},value:{get:function(){return P.value}}});return Q}return l.openCursor(G(O)).then(function(P){return P&&V(P)})}});return k}})}var bp={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:Dp};function ro(s,a,l,c){return l=l||{},c=c||"",o(s).forEach(function(h){if(!E(a,h))l[c+h]=void 0;else{var m=s[h],g=a[h];if(typeof m=="object"&&typeof g=="object"&&m&&g){var D=mn(m),b=mn(g);D!==b?l[c+h]=a[h]:D==="Object"?ro(m,g,l,c+h+"."):m!==g&&(l[c+h]=a[h])}else m!==g&&(l[c+h]=a[h])}}),o(a).forEach(function(h){E(s,h)||(l[c+h]=a[h])}),l}function io(s,a){return a.type==="delete"?a.keys:a.keys||a.values.map(s.extractKey)}var wp={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(s){return n(n({},s),{table:function(a){var l=s.table(a),c=l.schema.primaryKey,h=n(n({},l),{mutate:function(m){var g=$.trans,D=g.table(a).hook,b=D.deleting,C=D.creating,x=D.updating;switch(m.type){case"add":if(C.fire===Ee)break;return g._promise("readwrite",function(){return S(m)},!0);case"put":if(C.fire===Ee&&x.fire===Ee)break;return g._promise("readwrite",function(){return S(m)},!0);case"delete":if(b.fire===Ee)break;return g._promise("readwrite",function(){return S(m)},!0);case"deleteRange":if(b.fire===Ee)break;return g._promise("readwrite",function(){return I(m)},!0)}return l.mutate(m);function S(k){var O=$.trans,A=k.keys||io(c,k);if(!A)throw new Error("Keys missing");return k=k.type==="add"||k.type==="put"?n(n({},k),{keys:A}):n({},k),k.type!=="delete"&&(k.values=r([],k.values,!0)),k.keys&&(k.keys=r([],k.keys,!0)),Ep(l,k,A).then(function(H){var N=A.map(function(B,V){var P=H[V],z={onerror:null,onsuccess:null};if(k.type==="delete")b.fire.call(z,B,P,O);else if(k.type==="add"||P===void 0){var Q=C.fire.call(z,B,k.values[V],O);B==null&&Q!=null&&(B=Q,k.keys[V]=B,c.outbound||ce(k.values[V],c.keyPath,B))}else{var Y=ro(P,k.values[V]),se=x.fire.call(z,Y,B,P,O);if(se){var pe=k.values[V];Object.keys(se).forEach(function(ee){E(pe,ee)?pe[ee]=se[ee]:ce(pe,ee,se[ee])})}}return z});return l.mutate(k).then(function(B){for(var V=B.failures,P=B.results,z=B.numFailures,Q=B.lastResult,Y=0;Y<A.length;++Y){var se=P?P[Y]:A[Y],pe=N[Y];se==null?pe.onerror&&pe.onerror(V[Y]):pe.onsuccess&&pe.onsuccess(k.type==="put"&&H[Y]?k.values[Y]:se)}return{failures:V,results:P,numFailures:z,lastResult:Q}}).catch(function(B){return N.forEach(function(V){return V.onerror&&V.onerror(B)}),Promise.reject(B)})})}function I(k){return G(k.trans,k.range,1e4)}function G(k,O,A){return l.query({trans:k,values:!1,query:{index:c,range:O},limit:A}).then(function(H){var N=H.result;return S({type:"delete",keys:N,trans:k}).then(function(B){return B.numFailures>0?Promise.reject(B.failures[0]):N.length<A?{failures:[],numFailures:0,lastResult:void 0}:G(k,n(n({},O),{lower:N[N.length-1],lowerOpen:!0}),A)})})}}});return h}})}};function Ep(s,a,l){return a.type==="add"?Promise.resolve([]):s.getMany({trans:a.trans,keys:l,cache:"immutable"})}function ml(s,a,l){try{if(!a||a.keys.length<s.length)return null;for(var c=[],h=0,m=0;h<a.keys.length&&m<s.length;++h)me(a.keys[h],s[m])===0&&(c.push(l?yt(a.values[h]):a.values[h]),++m);return c.length===s.length?c:null}catch(g){return null}}var Cp={stack:"dbcore",level:-1,create:function(s){return{table:function(a){var l=s.table(a);return n(n({},l),{getMany:function(c){if(!c.cache)return l.getMany(c);var h=ml(c.keys,c.trans._cache,c.cache==="clone");return h?j.resolve(h):l.getMany(c).then(function(m){return c.trans._cache={keys:c.keys,values:c.cache==="clone"?yt(m):m},m})},mutate:function(c){return c.type!=="add"&&(c.trans._cache=null),l.mutate(c)}})}}}};function gl(s,a){return s.trans.mode==="readonly"&&!!s.subscr&&!s.trans.explicit&&s.trans.db._options.cache!=="disabled"&&!a.schema.primaryKey.outbound}function yl(s,a){switch(s){case"query":return a.values&&!a.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var Fp={stack:"dbcore",level:0,name:"Observability",create:function(s){var a=s.schema.name,l=new Xe(s.MIN_KEY,s.MAX_KEY);return n(n({},s),{transaction:function(c,h,m){if($.subscr&&h!=="readonly")throw new re.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat($.querier));return s.transaction(c,h,m)},table:function(c){var h=s.table(c),m=h.schema,g=m.primaryKey,D=m.indexes,b=g.extractKey,C=g.outbound,x=g.autoIncrement&&D.filter(function(k){return k.compound&&k.keyPath.includes(g.keyPath)}),S=n(n({},h),{mutate:function(k){var O,A,H=k.trans,N=k.mutatedParts||(k.mutatedParts={}),B=function(oe){var be="idb://".concat(a,"/").concat(c,"/").concat(oe);return N[be]||(N[be]=new Xe)},V=B(""),P=B(":dels"),z=k.type,Q=k.type==="deleteRange"?[k.range]:k.type==="delete"?[k.keys]:k.values.length<50?[io(g,k).filter(function(oe){return oe}),k.values]:[],Y=Q[0],se=Q[1],pe=k.trans._cache;if(u(Y)){V.addKeys(Y);var ee=z==="delete"||Y.length===se.length?ml(Y,pe):null;ee||P.addKeys(Y),(ee||se)&&_p(B,m,ee,se)}else if(Y){var de={from:(O=Y.lower)!==null&&O!==void 0?O:s.MIN_KEY,to:(A=Y.upper)!==null&&A!==void 0?A:s.MAX_KEY};P.add(de),V.add(de)}else V.add(l),P.add(l),m.indexes.forEach(function(oe){return B(oe.name).add(l)});return h.mutate(k).then(function(oe){return Y&&(k.type==="add"||k.type==="put")&&(V.addKeys(oe.results),x&&x.forEach(function(be){for(var ie=k.values.map(function(ot){return be.extractKey(ot)}),Ae=be.keyPath.findIndex(function(ot){return ot===g.keyPath}),et=0,jt=oe.results.length;et<jt;++et)ie[et][Ae]=oe.results[et];B(be.name).addKeys(ie)})),H.mutatedParts=Yi(H.mutatedParts||{},N),oe})}}),I=function(k){var O,A,H=k.query,N=H.index,B=H.range;return[N,new Xe((O=B.lower)!==null&&O!==void 0?O:s.MIN_KEY,(A=B.upper)!==null&&A!==void 0?A:s.MAX_KEY)]},G={get:function(k){return[g,new Xe(k.key)]},getMany:function(k){return[g,new Xe().addKeys(k.keys)]},count:I,query:I,openCursor:I};return o(G).forEach(function(k){S[k]=function(O){var A=$.subscr,H=!!A,N=gl($,h)&&yl(k,O),B=N?O.obsSet={}:A;if(H){var V=function(ee){var de="idb://".concat(a,"/").concat(c,"/").concat(ee);return B[de]||(B[de]=new Xe)},P=V(""),z=V(":dels"),Q=G[k](O),Y=Q[0],se=Q[1];if(k==="query"&&Y.isPrimaryKey&&!O.values?z.add(se):V(Y.name||"").add(se),!Y.isPrimaryKey)if(k==="count")z.add(l);else{var pe=k==="query"&&C&&O.values&&h.query(n(n({},O),{values:!1}));return h[k].apply(this,arguments).then(function(ee){if(k==="query"){if(C&&O.values)return pe.then(function(ie){var Ae=ie.result;return P.addKeys(Ae),ee});var de=O.values?ee.result.map(b):ee.result;O.values?P.addKeys(de):z.addKeys(de)}else if(k==="openCursor"){var oe=ee,be=O.values;return oe&&Object.create(oe,{key:{get:function(){return z.addKey(oe.primaryKey),oe.key}},primaryKey:{get:function(){var ie=oe.primaryKey;return z.addKey(ie),ie}},value:{get:function(){return be&&P.addKey(oe.primaryKey),oe.value}}})}return ee})}}return h[k].apply(this,arguments)}}),S}})}};function _p(s,a,l,c){function h(m){var g=s(m.name||"");function D(C){return C!=null?m.extractKey(C):null}var b=function(C){return m.multiEntry&&u(C)?C.forEach(function(x){return g.addKey(x)}):g.addKey(C)};(l||c).forEach(function(C,x){var S=l&&D(l[x]),I=c&&D(c[x]);me(S,I)!==0&&(S!=null&&b(S),I!=null&&b(I))})}a.indexes.forEach(h)}function vl(s,a,l){if(l.numFailures===0)return a;if(a.type==="deleteRange")return null;var c=a.keys?a.keys.length:"values"in a&&a.values?a.values.length:1;if(l.numFailures===c)return null;var h=n({},a);return u(h.keys)&&(h.keys=h.keys.filter(function(m,g){return!(g in l.failures)})),"values"in h&&u(h.values)&&(h.values=h.values.filter(function(m,g){return!(g in l.failures)})),h}function Sp(s,a){return a.lower===void 0?!0:a.lowerOpen?me(s,a.lower)>0:me(s,a.lower)>=0}function kp(s,a){return a.upper===void 0?!0:a.upperOpen?me(s,a.upper)<0:me(s,a.upper)<=0}function so(s,a){return Sp(s,a)&&kp(s,a)}function Dl(s,a,l,c,h,m){if(!l||l.length===0)return s;var g=a.query.index,D=g.multiEntry,b=a.query.range,C=c.schema.primaryKey,x=C.extractKey,S=g.extractKey,I=(g.lowLevelIndex||g).extractKey,G=l.reduce(function(k,O){var A=k,H=[];if(O.type==="add"||O.type==="put")for(var N=new Xe,B=O.values.length-1;B>=0;--B){var V=O.values[B],P=x(V);if(!N.hasKey(P)){var z=S(V);(D&&u(z)?z.some(function(ee){return so(ee,b)}):so(z,b))&&(N.addKey(P),H.push(V))}}switch(O.type){case"add":{var Q=new Xe().addKeys(a.values?k.map(function(ee){return x(ee)}):k);A=k.concat(a.values?H.filter(function(ee){var de=x(ee);return Q.hasKey(de)?!1:(Q.addKey(de),!0)}):H.map(function(ee){return x(ee)}).filter(function(ee){return Q.hasKey(ee)?!1:(Q.addKey(ee),!0)}));break}case"put":{var Y=new Xe().addKeys(O.values.map(function(ee){return x(ee)}));A=k.filter(function(ee){return!Y.hasKey(a.values?x(ee):ee)}).concat(a.values?H:H.map(function(ee){return x(ee)}));break}case"delete":var se=new Xe().addKeys(O.keys);A=k.filter(function(ee){return!se.hasKey(a.values?x(ee):ee)});break;case"deleteRange":var pe=O.range;A=k.filter(function(ee){return!so(x(ee),pe)});break}return A},s);return G===s?s:(G.sort(function(k,O){return me(I(k),I(O))||me(x(k),x(O))}),a.limit&&a.limit<1/0&&(G.length>a.limit?G.length=a.limit:s.length===a.limit&&G.length<a.limit&&(h.dirty=!0)),m?Object.freeze(G):G)}function bl(s,a){return me(s.lower,a.lower)===0&&me(s.upper,a.upper)===0&&!!s.lowerOpen==!!a.lowerOpen&&!!s.upperOpen==!!a.upperOpen}function xp(s,a,l,c){if(s===void 0)return a!==void 0?-1:0;if(a===void 0)return 1;var h=me(s,a);if(h===0){if(l&&c)return 0;if(l)return 1;if(c)return-1}return h}function Op(s,a,l,c){if(s===void 0)return a!==void 0?1:0;if(a===void 0)return-1;var h=me(s,a);if(h===0){if(l&&c)return 0;if(l)return-1;if(c)return 1}return h}function Tp(s,a){return xp(s.lower,a.lower,s.lowerOpen,a.lowerOpen)<=0&&Op(s.upper,a.upper,s.upperOpen,a.upperOpen)>=0}function Mp(s,a,l,c){var h=Rn["idb://".concat(s,"/").concat(a)];if(!h)return[];var m=h.queries[l];if(!m)return[null,!1,h,null];var g=c.query?c.query.index.name:null,D=m[g||""];if(!D)return[null,!1,h,null];switch(l){case"query":var b=D.find(function(S){return S.req.limit===c.limit&&S.req.values===c.values&&bl(S.req.query.range,c.query.range)});if(b)return[b,!0,h,D];var C=D.find(function(S){var I="limit"in S.req?S.req.limit:1/0;return I>=c.limit&&(c.values?S.req.values:!0)&&Tp(S.req.query.range,c.query.range)});return[C,!1,h,D];case"count":var x=D.find(function(S){return bl(S.req.query.range,c.query.range)});return[x,!!x,h,D]}}function Ap(s,a,l,c){s.subscribers.add(l),c.addEventListener("abort",function(){s.subscribers.delete(l),s.subscribers.size===0&&Ip(s,a)})}function Ip(s,a){setTimeout(function(){s.subscribers.size===0&&Ge(a,s)},3e3)}var Pp={stack:"dbcore",level:0,name:"Cache",create:function(s){var a=s.schema.name,l=n(n({},s),{transaction:function(c,h,m){var g=s.transaction(c,h,m);if(h==="readwrite"){var D=new AbortController,b=D.signal,C=function(x){return function(){if(D.abort(),h==="readwrite"){for(var S=new Set,I=0,G=c;I<G.length;I++){var k=G[I],O=Rn["idb://".concat(a,"/").concat(k)];if(O){var A=s.table(k),H=O.optimisticOps.filter(function(be){return be.trans===g});if(g._explicit&&x&&g.mutatedParts)for(var N=0,B=Object.values(O.queries.query);N<B.length;N++)for(var V=B[N],P=0,z=V.slice();P<z.length;P++){var Q=z[P];$a(Q.obsSet,g.mutatedParts)&&(Ge(V,Q),Q.subscribers.forEach(function(be){return S.add(be)}))}else if(H.length>0){O.optimisticOps=O.optimisticOps.filter(function(be){return be.trans!==g});for(var Y=0,se=Object.values(O.queries.query);Y<se.length;Y++)for(var V=se[Y],pe=0,ee=V.slice();pe<ee.length;pe++){var Q=ee[pe];if(Q.res!=null&&g.mutatedParts)if(x&&!Q.dirty){var de=Object.isFrozen(Q.res),oe=Dl(Q.res,Q.req,H,A,Q,de);Q.dirty?(Ge(V,Q),Q.subscribers.forEach(function(Ae){return S.add(Ae)})):oe!==Q.res&&(Q.res=oe,Q.promise=j.resolve({result:oe}))}else Q.dirty&&Ge(V,Q),Q.subscribers.forEach(function(Ae){return S.add(Ae)})}}}}S.forEach(function(be){return be()})}}};g.addEventListener("abort",C(!1),{signal:b}),g.addEventListener("error",C(!1),{signal:b}),g.addEventListener("complete",C(!0),{signal:b})}return g},table:function(c){var h=s.table(c),m=h.schema.primaryKey,g=n(n({},h),{mutate:function(D){var b=$.trans;if(m.outbound||b.db._options.cache==="disabled"||b.explicit||b.idbtrans.mode!=="readwrite")return h.mutate(D);var C=Rn["idb://".concat(a,"/").concat(c)];if(!C)return h.mutate(D);var x=h.mutate(D);return(D.type==="add"||D.type==="put")&&(D.values.length>=50||io(m,D).some(function(S){return S==null}))?x.then(function(S){var I=n(n({},D),{values:D.values.map(function(k,O){var A;if(S.failures[O])return k;var H=!((A=m.keyPath)===null||A===void 0)&&A.includes(".")?yt(k):n({},k);return ce(H,m.keyPath,S.results[O]),H})}),G=vl(C,I,S);C.optimisticOps.push(G),queueMicrotask(function(){return D.mutatedParts&&Zi(D.mutatedParts)})}):(C.optimisticOps.push(D),D.mutatedParts&&Zi(D.mutatedParts),x.then(function(S){if(S.numFailures>0){Ge(C.optimisticOps,D);var I=vl(C,D,S);I&&C.optimisticOps.push(I),D.mutatedParts&&Zi(D.mutatedParts)}}),x.catch(function(){Ge(C.optimisticOps,D),D.mutatedParts&&Zi(D.mutatedParts)})),x},query:function(D){var b;if(!gl($,h)||!yl("query",D))return h.query(D);var C=((b=$.trans)===null||b===void 0?void 0:b.db._options.cache)==="immutable",x=$,S=x.requery,I=x.signal,G=Mp(a,c,"query",D),k=G[0],O=G[1],A=G[2],H=G[3];if(k&&O)k.obsSet=D.obsSet;else{var N=h.query(D).then(function(B){var V=B.result;if(k&&(k.res=V),C){for(var P=0,z=V.length;P<z;++P)Object.freeze(V[P]);Object.freeze(V)}else B.result=yt(V);return B}).catch(function(B){return H&&k&&Ge(H,k),Promise.reject(B)});k={obsSet:D.obsSet,promise:N,subscribers:new Set,type:"query",req:D,dirty:!1},H?H.push(k):(H=[k],A||(A=Rn["idb://".concat(a,"/").concat(c)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),A.queries.query[D.query.index.name||""]=H)}return Ap(k,H,S,I),k.promise.then(function(B){return{result:Dl(B.result,D,A==null?void 0:A.optimisticOps,h,k,C)}})}});return g}});return l}};function Qi(s,a){return new Proxy(s,{get:function(l,c,h){return c==="db"?a:Reflect.get(l,c,h)}})}var an=function(){function s(a,l){var c=this;this._middlewares={},this.verno=0;var h=s.dependencies;this._options=l=n({addons:s.addons,autoOpen:!0,indexedDB:h.indexedDB,IDBKeyRange:h.IDBKeyRange,cache:"cloned"},l),this._deps={indexedDB:l.indexedDB,IDBKeyRange:l.IDBKeyRange};var m=l.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var g={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Ee,dbReadyPromise:null,cancelOpen:Ee,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:l.autoOpen};g.dbReadyPromise=new j(function(b){g.dbReadyResolve=b}),g.openCanceller=new j(function(b,C){g.cancelOpen=C}),this._state=g,this.name=a,this.on=Vr(this,"populate","blocked","versionchange","close",{ready:[Lr,Ee]}),this.on.ready.subscribe=Ve(this.on.ready.subscribe,function(b){return function(C,x){s.vip(function(){var S=c._state;if(S.openComplete)S.dbOpenError||j.resolve().then(C),x&&b(C);else if(S.onReadyBeingFired)S.onReadyBeingFired.push(C),x&&b(C);else{b(C);var I=c;x||b(function G(){I.on.ready.unsubscribe(C),I.on.ready.unsubscribe(G)})}})}}),this.Collection=Kd(this),this.Table=Rd(this),this.Transaction=Jd(this),this.Version=hp(this),this.WhereClause=Yd(this),this.on("versionchange",function(b){b.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(c.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(c.name,"'. Closing db now to resume the delete request.")),c.close({disableAutoOpen:!1})}),this.on("blocked",function(b){!b.newVersion||b.newVersion<b.oldVersion?console.warn("Dexie.delete('".concat(c.name,"') was blocked")):console.warn("Upgrade '".concat(c.name,"' blocked by other connection holding version ").concat(b.oldVersion/10))}),this._maxKey=Ur(l.IDBKeyRange),this._createTransaction=function(b,C,x,S){return new c.Transaction(b,C,x,c._options.chromeTransactionDurability,S)},this._fireOnBlocked=function(b){c.on("blocked").fire(b),lr.filter(function(C){return C.name===c.name&&C!==c&&!C._state.vcFired}).map(function(C){return C.on("versionchange").fire(b)})},this.use(Cp),this.use(Pp),this.use(Fp),this.use(bp),this.use(wp);var D=new Proxy(this,{get:function(b,C,x){if(C==="_vip")return!0;if(C==="table")return function(I){return Qi(c.table(I),D)};var S=Reflect.get(b,C,x);return S instanceof tl?Qi(S,D):C==="tables"?S.map(function(I){return Qi(I,D)}):C==="_createTransaction"?function(){var I=S.apply(this,arguments);return Qi(I,D)}:S}});this.vip=D,m.forEach(function(b){return b(c)})}return s.prototype.version=function(a){if(isNaN(a)||a<.1)throw new re.Type("Given version is not a positive number");if(a=Math.round(a*10)/10,this.idbdb||this._state.isBeingOpened)throw new re.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,a);var l=this._versions,c=l.filter(function(h){return h._cfg.version===a})[0];return c||(c=new this.Version(a),l.push(c),l.sort(rp),c.stores({}),this._state.autoSchema=!1,c)},s.prototype._whenReady=function(a){var l=this;return this.idbdb&&(this._state.openComplete||$.letThrough||this._vip)?a():new j(function(c,h){if(l._state.openComplete)return h(new re.DatabaseClosed(l._state.dbOpenError));if(!l._state.isBeingOpened){if(!l._state.autoOpen){h(new re.DatabaseClosed);return}l.open().catch(Ee)}l._state.dbReadyPromise.then(c,h)}).then(a)},s.prototype.use=function(a){var l=a.stack,c=a.create,h=a.level,m=a.name;m&&this.unuse({stack:l,name:m});var g=this._middlewares[l]||(this._middlewares[l]=[]);return g.push({stack:l,create:c,level:h==null?10:h,name:m}),g.sort(function(D,b){return D.level-b.level}),this},s.prototype.unuse=function(a){var l=a.stack,c=a.name,h=a.create;return l&&this._middlewares[l]&&(this._middlewares[l]=this._middlewares[l].filter(function(m){return h?m.create!==h:c?m.name!==c:!1})),this},s.prototype.open=function(){var a=this;return Nn(Ke,function(){return yp(a)})},s.prototype._close=function(){var a=this._state,l=lr.indexOf(this);if(l>=0&&lr.splice(l,1),this.idbdb){try{this.idbdb.close()}catch(c){}this.idbdb=null}a.isBeingOpened||(a.dbReadyPromise=new j(function(c){a.dbReadyResolve=c}),a.openCanceller=new j(function(c,h){a.cancelOpen=h}))},s.prototype.close=function(a){var l=a===void 0?{disableAutoOpen:!0}:a,c=l.disableAutoOpen,h=this._state;c?(h.isBeingOpened&&h.cancelOpen(new re.DatabaseClosed),this._close(),h.autoOpen=!1,h.dbOpenError=new re.DatabaseClosed):(this._close(),h.autoOpen=this._options.autoOpen||h.isBeingOpened,h.openComplete=!1,h.dbOpenError=null)},s.prototype.delete=function(a){var l=this;a===void 0&&(a={disableAutoOpen:!0});var c=arguments.length>0&&typeof arguments[0]!="object",h=this._state;return new j(function(m,g){var D=function(){l.close(a);var b=l._deps.indexedDB.deleteDatabase(l.name);b.onsuccess=xe(function(){mp(l._deps,l.name),m()}),b.onerror=qt(g),b.onblocked=l._fireOnBlocked};if(c)throw new re.InvalidArgument("Invalid closeOptions argument to db.delete()");h.isBeingOpened?h.dbReadyPromise.then(D):D()})},s.prototype.backendDB=function(){return this.idbdb},s.prototype.isOpen=function(){return this.idbdb!==null},s.prototype.hasBeenClosed=function(){var a=this._state.dbOpenError;return a&&a.name==="DatabaseClosed"},s.prototype.hasFailed=function(){return this._state.dbOpenError!==null},s.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(s.prototype,"tables",{get:function(){var a=this;return o(this._allTables).map(function(l){return a._allTables[l]})},enumerable:!1,configurable:!0}),s.prototype.transaction=function(){var a=vp.apply(this,arguments);return this._transaction.apply(this,a)},s.prototype._transaction=function(a,l,c){var h=this,m=$.trans;(!m||m.db!==this||a.indexOf("!")!==-1)&&(m=null);var g=a.indexOf("?")!==-1;a=a.replace("!","").replace("?","");var D,b;try{if(b=l.map(function(x){var S=x instanceof h.Table?x.name:x;if(typeof S!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return S}),a=="r"||a===Na)D=Na;else if(a=="rw"||a==Ba)D=Ba;else throw new re.InvalidArgument("Invalid transaction mode: "+a);if(m){if(m.mode===Na&&D===Ba)if(g)m=null;else throw new re.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");m&&b.forEach(function(x){if(m&&m.storeNames.indexOf(x)===-1)if(g)m=null;else throw new re.SubTransaction("Table "+x+" not included in parent transaction.")}),g&&m&&!m.active&&(m=null)}}catch(x){return m?m._promise(null,function(S,I){I(x)}):Be(x)}var C=pl.bind(null,this,D,b,m,c);return m?m._promise(D,C,"lock"):$.trans?Nn($.transless,function(){return h._whenReady(C)}):this._whenReady(C)},s.prototype.table=function(a){if(!E(this._allTables,a))throw new re.InvalidTable("Table ".concat(a," does not exist"));return this._allTables[a]},s}(),Np=typeof Symbol!="undefined"&&"observable"in Symbol?Symbol.observable:"@@observable",Bp=function(){function s(a){this._subscribe=a}return s.prototype.subscribe=function(a,l,c){return this._subscribe(!a||typeof a=="function"?{next:a,error:l,complete:c}:a)},s.prototype[Np]=function(){return this},s}(),$i;try{$i={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch(s){$i={indexedDB:null,IDBKeyRange:null}}function wl(s){var a=!1,l,c=new Bp(function(h){var m=Xn(s);function g(H){var N=ar();try{m&&ur();var B=yn(s,H);return m&&(B=B.finally(vn)),B}finally{N&&or()}}var D=!1,b,C={},x={},S={get closed(){return D},unsubscribe:function(){D||(D=!0,b&&b.abort(),I&&wn.storagemutated.unsubscribe(O))}};h.start&&h.start(S);var I=!1,G=function(){return Aa(A)};function k(){return $a(x,C)}var O=function(H){Yi(C,H),k()&&G()},A=function(){if(!(D||!$i.indexedDB)){C={};var H={};b&&b.abort(),b=new AbortController;var N={subscr:H,signal:b.signal,requery:G,querier:s,trans:null},B=g(N);Promise.resolve(B).then(function(V){a=!0,l=V,!(D||N.signal.aborted)&&(C={},x=H,!Me(x)&&!I&&(wn(jr,O),I=!0),Aa(function(){return!D&&h.next&&h.next(V)}))},function(V){a=!1,["DatabaseClosedError","AbortError"].includes(V==null?void 0:V.name)||D||Aa(function(){D||h.error&&h.error(V)})})}};return setTimeout(G,0),S});return c.hasValue=function(){return a},c.getValue=function(){return l},c}var Hn=an;y(Hn,n(n({},Pn),{delete:function(s){var a=new Hn(s,{addons:[]});return a.delete()},exists:function(s){return new Hn(s,{addons:[]}).open().then(function(a){return a.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(s){try{return dp(Hn.dependencies).then(s)}catch(a){return Be(new re.MissingAPI)}},defineClass:function(){function s(a){f(this,a)}return s},ignoreTransaction:function(s){return $.trans?Nn($.transless,s):s()},vip:Za,async:function(s){return function(){try{var a=no(s.apply(this,arguments));return!a||typeof a.then!="function"?j.resolve(a):a}catch(l){return Be(l)}}},spawn:function(s,a,l){try{var c=no(s.apply(l,a||[]));return!c||typeof c.then!="function"?j.resolve(c):c}catch(h){return Be(h)}},currentTransaction:{get:function(){return $.trans||null}},waitFor:function(s,a){var l=j.resolve(typeof s=="function"?Hn.ignoreTransaction(s):s).timeout(a||6e4);return $.trans?$.trans.waitFor(l):l},Promise:j,debug:{get:function(){return vt},set:function(s){Ti(s)}},derive:K,extend:f,props:y,override:Ve,Events:Vr,on:wn,liveQuery:wl,extendObservabilitySet:Yi,getByKeyPath:J,setByKeyPath:ce,delByKeyPath:fe,shallowClone:Ce,deepClone:yt,getObjectDiff:ro,cmp:me,asap:ae,minKey:Pa,addons:[],connections:lr,errnames:Tt,dependencies:$i,cache:Rn,semVer:Zu,version:Zu.split(".").map(function(s){return parseInt(s)}).reduce(function(s,a,l){return s+a/Math.pow(10,l*2)})})),Hn.maxKey=Ur(Hn.dependencies.IDBKeyRange),typeof dispatchEvent!="undefined"&&typeof addEventListener!="undefined"&&(wn(jr,function(s){if(!En){var a;a=new CustomEvent(Va,{detail:s}),En=!0,dispatchEvent(a),En=!1}}),addEventListener(Va,function(s){var a=s.detail;En||ao(a)}));function ao(s){var a=En;try{En=!0,wn.storagemutated.fire(s),to(s,!0)}finally{En=a}}var En=!1,Cn,oo=function(){};typeof BroadcastChannel!="undefined"&&(oo=function(){Cn=new BroadcastChannel(Va),Cn.onmessage=function(s){return s.data&&ao(s.data)}},oo(),typeof Cn.unref=="function"&&Cn.unref(),wn(jr,function(s){En||Cn.postMessage(s)})),typeof addEventListener!="undefined"&&(addEventListener("pagehide",function(s){if(!an.disableBfCache&&s.persisted){vt&&console.debug("Dexie: handling persisted pagehide"),Cn==null||Cn.close();for(var a=0,l=lr;a<l.length;a++){var c=l[a];c.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(s){!an.disableBfCache&&s.persisted&&(vt&&console.debug("Dexie: handling persisted pageshow"),oo(),ao({all:new Xe(-1/0,[[]])}))}));function Lp(s){return new Kr({add:s})}function Rp(s){return new Kr({remove:s})}function Hp(s,a){return new Kr({replacePrefix:[s,a]})}j.rejectionMapper=rr,Ti(vt);var Vp=Object.freeze({__proto__:null,Dexie:an,liveQuery:wl,Entity:$u,cmp:me,PropModSymbol:Vd,PropModification:Kr,replacePrefix:Hp,add:Lp,remove:Rp,default:an,RangeSet:Xe,mergeRanges:Yr,rangesOverlap:cl});return n(an,Vp,{default:an}),an})});var S2={};zp(S2,{default:()=>_a});module.exports=Yp(S2);var Sd=require("obsidian");var bt=require("obsidian");var Cl=require("obsidian");function ts(t,e,n,r,i){new Cl.Setting(t).setName(r).setDesc(i).addDropdown(o=>o.addOption("gemini-2.0-pro-exp-02-05","Gemini 2.0 Pro").addOption("gemini-2.0-flash-001","Gemini 2.0 Flash").addOption("gemini-2.0-flash-lite-preview-02-05","Gemini 2.0 Flash Lite Preview").addOption("gemini-2.0-flash-thinking-exp-01-21","Gemini 2.0 Flash Thinking").addOption("gemini-1.5-pro","gemini-1.5-pro").addOption("gemini-1.5-flash","gemini-1.5-flash").addOption("gemini-1.5-flash-8b","gemini-1.5-flash-8b").setValue(String(e.settings[n])).onChange(async u=>{e.settings[n]=u,await e.saveSettings()}))}var rs=require("obsidian"),ns=class extends rs.AbstractInputSuggest{constructor(n,r,i){super(n,r);this.inputEl=r,this.folderSelectCallback=i}getSuggestions(n){return this.app.vault.getAllLoadedFiles().filter(i=>i instanceof rs.TFolder).filter(i=>i.path.toLowerCase().contains(n.toLowerCase()))}renderSuggestion(n,r){r.setText(n.path)}selectSuggestion(n,r){this.inputEl.value=n.path,this.inputEl.trigger("input"),this.close(),this.folderSelectCallback(n.path)}};var Jr=class extends bt.PluginSettingTab{constructor(n,r){super(n,r);this.plugin=r}display(){let{containerEl:n}=this;n.empty(),new bt.Setting(n).setName("API Key").setDesc("Gemini API Key").addText(r=>r.setPlaceholder("Enter your API Key").setValue(this.plugin.settings.apiKey).onChange(async i=>{this.plugin.settings.apiKey=i,await this.plugin.saveSettings()})),ts(n,this.plugin,"chatModelName","Chat Model","The Gemini Model used in the chat interface."),ts(n,this.plugin,"summaryModelName","Summary Model","The Gemini Model used for summarization."),ts(n,this.plugin,"completionsModelName","Completion Model","The Gemini Model used for completions."),new bt.Setting(n).setName("Context Depth").setDesc("Set to true to send the context of the current file to the model, and adjust the depth of links followed for the context.").addDropdown(r=>r.addOption("0","0").addOption("1","1").addOption("2","2").addOption("3","3").addOption("4","4").setValue(this.plugin.settings.maxContextDepth.toString()).onChange(async i=>{this.plugin.settings.maxContextDepth=parseInt(i),await this.plugin.saveSettings()})).addToggle(r=>r.setValue(this.plugin.settings.sendContext).onChange(async i=>{this.plugin.settings.sendContext=i,await this.plugin.saveSettings()})),new bt.Setting(n).setName("Search Grounding").setDesc("Enable the model to use Google search results in its responses, and the threshold for how likely it is to trigger.").addDropdown(r=>r.addOption("0.1","0.1").addOption("0.2","0.2").addOption("0.3","0.3").addOption("0.4","0.4").addOption("0.5","0.5").addOption("0.6","0.6").addOption("0.7","0.7").addOption("0.8","0.8").addOption("0.9","0.9").setValue(this.plugin.settings.searchGroundingThreshold.toString()).onChange(async i=>{this.plugin.settings.searchGroundingThreshold=parseFloat(i),await this.plugin.saveSettings()})).addToggle(r=>r.setValue(this.plugin.settings.searchGrounding).onChange(async i=>{this.plugin.settings.searchGrounding=i,await this.plugin.saveSettings()})),new bt.Setting(n).setName("Summary Frontmatter Key").setDesc("Key to use for frontmatter summarization.").addText(r=>r.setPlaceholder("Enter your key").setValue(this.plugin.settings.summaryFrontmatterKey).onChange(async i=>{this.plugin.settings.summaryFrontmatterKey=i,await this.plugin.saveSettings()})),new bt.Setting(n).setName("Your name.").setDesc("This will be used in the system instructions for the model.").addText(r=>r.setPlaceholder("Enter your name").setValue(this.plugin.settings.userName).onChange(async i=>{this.plugin.settings.userName=i,await this.plugin.saveSettings()})),new bt.Setting(n).setName("Rewrite Files").setDesc("Whether to allow the model to rewrite files during chat.").addToggle(r=>r.setValue(this.plugin.settings.rewriteFiles).onChange(async i=>{this.plugin.settings.rewriteFiles=i,await this.plugin.saveSettings()})),new bt.Setting(n).setName("Chat History").setHeading(),new bt.Setting(n).setName("Enable Chat History").setDesc("Store chat history as a json file in your vault. This will allow you to view past conversations between sessions.").addToggle(r=>r.setValue(this.plugin.settings.chatHistory).onChange(async i=>{this.plugin.settings.chatHistory=i,await this.plugin.saveSettings()})),new bt.Setting(n).setName("History Folder").setDesc("The folder where history file will be stored.").addText(r=>{let i=new ns(this.app,r.inputEl,async o=>{this.plugin.settings.historyFolder=o,await this.plugin.saveSettings()});r.setValue(this.plugin.settings.historyFolder)})}};var lt=require("obsidian");var fn=uo(cf());var ff=`You are a note-taking and writing assistant embedded in my Obsidian note vault.
Your primary goal is to help me stay organized by surfacing information from my 
notes and any linked notes, and to assist me in drafting and refining my 
writing based on this context. 

Assume that I am the author of all content unless specified otherwise, and you
can refer to me as {{userName}}.

Unless otherwise specified please respond to me in the same language I use with 
you. My user interface is set to the language code: {{language}}. Use that
language if you are uncertain about the language to use.

If a question cannot be answered from my notes, supplement your response with
external information as needed.`;var hf=`You are a markdown text completion assistant designed to help users write more 
effectively by generating contextually relevant, high-quality sentence. 

Your task is to provide the next logical sentence based on the user\u2019s notes. 
Your completions should align with the style, tone, and intent of the given content,
while also pushing creative boundaries. Infuse the completion with vivid imagery, 
fresh perspectives, and subtle details that evoke sensory and emotional responses.
Ensure that your suggestions feel original and thought-provoking, and avoid clich\xE9s.
Use the full file to understand the context, but only focus on completing the 
text at the cursor position.

Avoid repeating ideas, phrases, or details that are already present in the 
content. Instead, focus on expanding, diversifying, or complementing the 
existing content.

If a full sentence is not feasible, generate a phrase. If a phrase isn\u2019t possible, 
provide a single word. Do not include any preamble, explanations, or extraneous 
text\u2014output only the continuation. 

Do not include any special characters, punctuation, or extra whitespace at the
beginning of your response, and do not include any extra whitespace or newline
characters after your response.

Here is the file content and the locaiton of the cursor:
<file>
{{contentBeforeCursor}}<cursor>{{contentAfterCursor}}
</file>
`;var df=`You are assisting me in exploring, clarifying, and discussing the content
within a file labeled \u2018Current File\u2019 and any linked files. Prioritize
information from these files when answering questions, providing explanations,
or engaging in brainstorming.

Assume I am the author of the content unless otherwise specified. If additional
context beyond the current and linked files is needed to answer a question, 
clearly indicate when you are drawing on general knowledge or external information.

When referring to files, use [[WikiLink]] syntax. If it's provided in the context
use the Wikilink that is provided, otherwise use the file path but drop the .md 
extension.

Your responses should be plain text. Use markdown only if it aids clarity or 
organization in your response.
`;var pf=`Using the context provided, create a single-sentence summary based on the
content of the file. Exclude any mention of dates, attendees, or my name, and
assume the notes are taken from my perspective unless specified otherwise. 

Respond with plain text only, do not use any markdown.

Please summarize the following content:
<file><content>{{content}}</content></file>`;var mf=`You are assisting me in drafting the document labeled \u2018Current File\u2019 using the
context of this chat and the contents of any files linked from the Current File,
which are labeled as linked files. Use this content to help draft the document.

Respond with plain text, using markdown only for formatting where needed.

Your response will replace the entire content below the Markdown \u2018Draft\u2019 heading,
preserving everything above it. It's very important that you preserve the text 
above the 'Draft' heading. If no \u2018Draft\u2019 heading exists, create one as '# Draft' 
and start your content below it.

Exclude any content that should not appear in the final draft, ensuring only
relevant information is incorporated.

{{userMessage}}`;var gf="Today's date is: {{date}}.";var yf="The current time is {{time}}.";var vf=`==============================
File Label: {{file_label}}
File Name: {{file_name}}
WikiLink: {{wikilink}}
==============================

{{file_contents}}

`;var ut=class{constructor(){this.completionsPromptTemplate=fn.compile(hf),this.systemPromptTemplate=fn.compile(ff),this.generalPromptTemplate=fn.compile(df),this.summaryPromptTemplate=fn.compile(pf),this.rewritePromptTemplate=fn.compile(mf),this.datePromptTemplate=fn.compile(gf),this.timePromptTemplate=fn.compile(yf),this.contextPromptTemplate=fn.compile(vf)}completionsPrompt(e){return this.completionsPromptTemplate(e)}systemPrompt(e){return this.systemPromptTemplate(e)}generalPrompt(e){return this.generalPromptTemplate(e)}summaryPrompt(e){return this.summaryPromptTemplate(e)}rewritePrompt(e){return this.rewritePromptTemplate(e)}datePrompt(e){return this.datePromptTemplate(e)}timePrompt(e){return this.timePromptTemplate(e)}contextPrompt(e){return this.contextPromptTemplate(e)}};var Ls=class{constructor(e){this.plugin=e,this.prompts=new ut}async generateRewriteResponse(e,n){let r=this.prompts.rewritePrompt({userMessage:e});await this.plugin.history.appendHistory({role:"user",message:e});let i={prompt:r,conversationHistory:n,userMessage:e},o=await this.plugin.geminiApi.generateModelResponse(i);await this.plugin.gfile.replaceTextInActiveFile(o.markdown)}};var ci="gemini-view",Rs=class extends lt.ItemView{constructor(n,r){super(n);this.timerInterval=null;this.startTime=null;this.plugin=r,this.rewriteMode=new Ls(r),this.prompts=new ut,this.registerLinkClickHandler()}registerLinkClickHandler(){this.containerEl.addEventListener("click",n=>{let r=n.target;if(r.tagName==="A"&&r.classList.contains("internal-link")){n.preventDefault();let i=r.getAttribute("href");i&&this.app.workspace.openLinkText(i,"",!0)}})}getViewType(){return ci}getDisplayText(){return"Gemini Scribe"}getIcon(){return"sparkles"}async onOpen(){let n=this.containerEl.children[1];n.empty(),n.createEl("h2",{text:"Gemini Chat"}),this.chatbox=n.createDiv({cls:"gemini-scribe-chatbox"});let r=n.createDiv({cls:"gemini-scribe-input-area"}),i=r.createEl("textarea",{cls:"gemini-scribe-chat-input",attr:{placeholder:"Type your message here..."}}),o=r.createDiv({cls:"gemini-scribe-send-container"}),u=o.createEl("button",{text:"Send",cls:"gemini-scribe-send-button"});if((0,lt.setIcon)(u,"send-horizontal"),this.timerDisplay=o.createDiv({cls:"gemini-scribe-timer"}),this.plugin.settings.rewriteFiles){let f=n.createDiv({cls:"gemini-scribe-options-area"}),d=f.createEl("input",{type:"checkbox",cls:"gemini-scribe-rewrite-checkbox"});f.createEl("label",{text:"Rewrite file",cls:"gemini-scribe-rewrite-label"}).prepend(d),d.addEventListener("change",()=>{this.shoudRewriteFile=d.checked})}i.addEventListener("keydown",async f=>{f.key==="Enter"&&!f.shiftKey&&(f.preventDefault(),u.click())}),u.addEventListener("click",async()=>{let f=i.value;if(f.trim()!==""){this.displayMessage(f,"user"),i.value="",this.startTimer();try{await this.sendMessage(f),this.stopTimer()}catch(d){this.stopTimer(),console.error(d)}}}),this.observer=new MutationObserver(f=>{for(let d of f)d.type==="childList"&&this.scrollToBottom()}),this.observer.observe(this.chatbox,{childList:!0,subtree:!0}),this.currentFile=this.plugin.gfile.getActiveFile(),this.handleFileOpen(this.currentFile),this.app.workspace.on("file-open",this.handleFileOpen.bind(this))}async onClose(){this.plugin.history.exportHistory(),this.app.workspace.off("file-open",this.handleFileOpen.bind(this)),this.observer.disconnect()}async displayMessage(n,r){var f,d;let i=this.chatbox.createDiv({cls:`gemini-scribe-message-container ${r}`}),o=i.createDiv({cls:"gemini-scribe-sender-indicator"}),u=i.createDiv({cls:`gemini-scribe-message ${r}`});switch(r){case"user":(0,lt.setIcon)(o,"square-user");break;case"model":(0,lt.setIcon)(o,"bot-message-square");break;case"grounding":(0,lt.setIcon)(o,"search");break}if(r==="grounding")u.innerHTML=n;else{let p=(d=(f=this.plugin.gfile.getActiveFile())==null?void 0:f.path)!=null?d:"";await lt.MarkdownRenderer.render(this.app,n,u,p,this)}if(r==="model"){let p=u.createEl("button",{cls:"gemini-scribe-copy-button"});(0,lt.setIcon)(p,"copy"),p.addEventListener("click",()=>{navigator.clipboard.writeText(n).then(()=>{new lt.Notice("Message copied to clipboard.")}).catch(E=>{new lt.Notice("Could not copy message to clipboard. Try selecting and copying manually."),console.error("Failed to copy: ",E)})})}this.scrollToBottom()}handleFileOpen(n){if(n)this.currentFile=n,this.clearChat(),this.reloadChatFromHistory();else return}clearChat(){this.chatbox.empty()}async reloadChatFromHistory(){if(!this.currentFile)return;let n=await this.plugin.history.getHistoryForFile(this.currentFile);n&&n.length>0&&n.forEach(r=>{this.displayMessage(r.message,r.role)})}async sendMessage(n){var r,i;if(n.trim()!==""){if(this.shoudRewriteFile){let o=(r=await this.plugin.history.getHistoryForFile(this.currentFile))!=null?r:[];await this.rewriteMode.generateRewriteResponse(n,o);return}try{let o=(i=await this.plugin.history.getHistoryForFile(this.currentFile))!=null?i:[],u=this.prompts.generalPrompt({userMessage:n}),f={userMessage:n,conversationHistory:o,model:this.plugin.settings.chatModelName,prompt:u,renderContent:!0},d=await this.plugin.geminiApi.generateModelResponse(f);this.plugin.history.appendHistoryForFile(this.currentFile,{role:"user",message:n}),this.plugin.history.appendHistoryForFile(this.currentFile,{role:"model",message:d.markdown}),this.displayMessage(d.markdown,"model"),d.rendered&&this.displayMessage(d.rendered,"grounding")}catch(o){new lt.Notice("Error getting bot response."),console.error(o)}}}scrollToBottom(){let n=()=>{let r=this.containerEl.querySelector(".gemini-scribe-input-area");r&&r.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})};n(),setTimeout(n,50),setTimeout(n,150)}startTimer(){this.timerDisplay.style.display="block",this.startTime=Date.now(),this.timerDisplay.textContent="0.0s",this.timerInterval=setInterval(()=>{if(this.startTime){let n=(Date.now()-this.startTime)/1e3;this.timerDisplay.textContent=`${n.toFixed(1)}s`}},100)}stopTimer(){this.timerInterval&&(clearInterval(this.timerInterval),this.timerInterval=null),setTimeout(()=>{this.timerDisplay&&(this.timerDisplay.style.display="none")},2e3)}};var Hs=class{constructor(e){this.plugin=e,this.prompts=new ut}async summarizeActiveFile(){let e=await this.plugin.gfile.getCurrentFileContent(0,!0);if(e){let n={model:this.plugin.settings.summaryModelName,prompt:this.prompts.summaryPrompt({content:e})},r=await this.plugin.geminiApi.generateModelResponse(n);this.plugin.gfile.addToFrontMatter(this.plugin.settings.summaryFrontmatterKey,r.markdown)}else console.error("Failed to get file content for summary.")}async setupSummarizaitonCommand(){this.plugin.addCommand({id:"gemini-scribe-summarize-active-file",name:"Summarize Active File",callback:()=>this.summarizeActiveFile()})}};var Df;(function(t){t.STRING="string",t.NUMBER="number",t.INTEGER="integer",t.BOOLEAN="boolean",t.ARRAY="array",t.OBJECT="object"})(Df||(Df={}));var bf;(function(t){t.LANGUAGE_UNSPECIFIED="language_unspecified",t.PYTHON="python"})(bf||(bf={}));var wf;(function(t){t.OUTCOME_UNSPECIFIED="outcome_unspecified",t.OUTCOME_OK="outcome_ok",t.OUTCOME_FAILED="outcome_failed",t.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(wf||(wf={}));var Ef=["user","model","function","system"],Cf;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT"})(Cf||(Cf={}));var Ff;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Ff||(Ff={}));var _f;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(_f||(_f={}));var Sf;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER"})(Sf||(Sf={}));var fi;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER"})(fi||(fi={}));var kf;(function(t){t.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",t.RETRIEVAL_QUERY="RETRIEVAL_QUERY",t.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",t.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",t.CLASSIFICATION="CLASSIFICATION",t.CLUSTERING="CLUSTERING"})(kf||(kf={}));var xf;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(xf||(xf={}));var Gs;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Gs||(Gs={}));var nt=class extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}},kn=class extends nt{constructor(e,n){super(e),this.response=n}},Ks=class extends nt{constructor(e,n,r,i){super(e),this.status=n,this.statusText=r,this.errorDetails=i}},Yt=class extends nt{};var jy="https://generativelanguage.googleapis.com",Uy="v1beta",Wy="0.21.0",zy="genai-js",Wn;(function(t){t.GENERATE_CONTENT="generateContent",t.STREAM_GENERATE_CONTENT="streamGenerateContent",t.COUNT_TOKENS="countTokens",t.EMBED_CONTENT="embedContent",t.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Wn||(Wn={}));var nu=class{constructor(e,n,r,i,o){this.model=e,this.task=n,this.apiKey=r,this.stream=i,this.requestOptions=o}toString(){var e,n;let r=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||Uy,o=`${((n=this.requestOptions)===null||n===void 0?void 0:n.baseUrl)||jy}/${r}/${this.model}:${this.task}`;return this.stream&&(o+="?alt=sse"),o}};function Yy(t){let e=[];return t!=null&&t.apiClient&&e.push(t.apiClient),e.push(`${zy}/${Wy}`),e.join(" ")}async function Zy(t){var e;let n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",Yy(t.requestOptions)),n.append("x-goog-api-key",t.apiKey);let r=(e=t.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(i){throw new Yt(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${i.message}`)}for(let[i,o]of r.entries()){if(i==="x-goog-api-key")throw new Yt(`Cannot set reserved header name ${i}`);if(i==="x-goog-api-client")throw new Yt(`Header name ${i} can only be set using the apiClient field`);n.append(i,o)}}return n}async function Jy(t,e,n,r,i,o){let u=new nu(t,e,n,r,o);return{url:u.toString(),fetchOptions:Object.assign(Object.assign({},ev(o)),{method:"POST",headers:await Zy(u),body:i})}}async function pi(t,e,n,r,i,o={},u=fetch){let{url:f,fetchOptions:d}=await Jy(t,e,n,r,i,o);return Qy(f,d,u)}async function Qy(t,e,n=fetch){let r;try{r=await n(t,e)}catch(i){$y(i,t)}return r.ok||await Xy(r,t),r}function $y(t,e){let n=t;throw t instanceof Ks||t instanceof Yt||(n=new nt(`Error fetching from ${e.toString()}: ${t.message}`),n.stack=t.stack),n}async function Xy(t,e){let n="",r;try{let i=await t.json();n=i.error.message,i.error.details&&(n+=` ${JSON.stringify(i.error.details)}`,r=i.error.details)}catch(i){}throw new Ks(`Error fetching from ${e.toString()}: [${t.status} ${t.statusText}] ${n}`,t.status,t.statusText,r)}function ev(t){let e={};if((t==null?void 0:t.signal)!==void 0||(t==null?void 0:t.timeout)>=0){let n=new AbortController;(t==null?void 0:t.timeout)>=0&&setTimeout(()=>n.abort(),t.timeout),t!=null&&t.signal&&t.signal.addEventListener("abort",()=>{n.abort()}),e.signal=n.signal}return e}function iu(t){return t.text=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Vs(t.candidates[0]))throw new kn(`${xn(t)}`,t);return tv(t)}else if(t.promptFeedback)throw new kn(`Text not available. ${xn(t)}`,t);return""},t.functionCall=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Vs(t.candidates[0]))throw new kn(`${xn(t)}`,t);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),Of(t)[0]}else if(t.promptFeedback)throw new kn(`Function call not available. ${xn(t)}`,t)},t.functionCalls=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Vs(t.candidates[0]))throw new kn(`${xn(t)}`,t);return Of(t)}else if(t.promptFeedback)throw new kn(`Function call not available. ${xn(t)}`,t)},t}function tv(t){var e,n,r,i;let o=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(let u of(i=(r=t.candidates)===null||r===void 0?void 0:r[0].content)===null||i===void 0?void 0:i.parts)u.text&&o.push(u.text),u.executableCode&&o.push("\n```"+u.executableCode.language+`
`+u.executableCode.code+"\n```\n"),u.codeExecutionResult&&o.push("\n```\n"+u.codeExecutionResult.output+"\n```\n");return o.length>0?o.join(""):""}function Of(t){var e,n,r,i;let o=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(let u of(i=(r=t.candidates)===null||r===void 0?void 0:r[0].content)===null||i===void 0?void 0:i.parts)u.functionCall&&o.push(u.functionCall);if(o.length>0)return o}var nv=[fi.RECITATION,fi.SAFETY,fi.LANGUAGE];function Vs(t){return!!t.finishReason&&nv.includes(t.finishReason)}function xn(t){var e,n,r;let i="";if((!t.candidates||t.candidates.length===0)&&t.promptFeedback)i+="Response was blocked",!((e=t.promptFeedback)===null||e===void 0)&&e.blockReason&&(i+=` due to ${t.promptFeedback.blockReason}`),!((n=t.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(i+=`: ${t.promptFeedback.blockReasonMessage}`);else if(!((r=t.candidates)===null||r===void 0)&&r[0]){let o=t.candidates[0];Vs(o)&&(i+=`Candidate was blocked due to ${o.finishReason}`,o.finishMessage&&(i+=`: ${o.finishMessage}`))}return i}function hi(t){return this instanceof hi?(this.v=t,this):new hi(t)}function rv(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i={},u("next"),u("throw"),u("return"),i[Symbol.asyncIterator]=function(){return this},i;function u(_){r[_]&&(i[_]=function(M){return new Promise(function(K,ue){o.push([_,M,K,ue])>1||f(_,M)})})}function f(_,M){try{d(r[_](M))}catch(K){y(o[0][3],K)}}function d(_){_.value instanceof hi?Promise.resolve(_.value.v).then(p,E):y(o[0][2],_)}function p(_){f("next",_)}function E(_){f("throw",_)}function y(_,M){_(M),o.shift(),o.length&&f(o[0][0],o[0][1])}}var Tf=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function iv(t){let e=t.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=ov(e),[r,i]=n.tee();return{stream:av(r),response:sv(i)}}async function sv(t){let e=[],n=t.getReader();for(;;){let{done:r,value:i}=await n.read();if(r)return iu(uv(e));e.push(i)}}function av(t){return rv(this,arguments,function*(){let n=t.getReader();for(;;){let{value:r,done:i}=yield hi(n.read());if(i)break;yield yield hi(iu(r))}})}function ov(t){let e=t.getReader();return new ReadableStream({start(r){let i="";return o();function o(){return e.read().then(({value:u,done:f})=>{if(f){if(i.trim()){r.error(new nt("Failed to parse stream"));return}r.close();return}i+=u;let d=i.match(Tf),p;for(;d;){try{p=JSON.parse(d[1])}catch(E){r.error(new nt(`Error parsing JSON response: "${d[1]}"`));return}r.enqueue(p),i=i.substring(d[0].length),d=i.match(Tf)}return o()})}}})}function uv(t){let e=t[t.length-1],n={promptFeedback:e==null?void 0:e.promptFeedback};for(let r of t){if(r.candidates)for(let i of r.candidates){let o=i.index;if(n.candidates||(n.candidates=[]),n.candidates[o]||(n.candidates[o]={index:i.index}),n.candidates[o].citationMetadata=i.citationMetadata,n.candidates[o].groundingMetadata=i.groundingMetadata,n.candidates[o].finishReason=i.finishReason,n.candidates[o].finishMessage=i.finishMessage,n.candidates[o].safetyRatings=i.safetyRatings,i.content&&i.content.parts){n.candidates[o].content||(n.candidates[o].content={role:i.content.role||"user",parts:[]});let u={};for(let f of i.content.parts)f.text&&(u.text=f.text),f.functionCall&&(u.functionCall=f.functionCall),f.executableCode&&(u.executableCode=f.executableCode),f.codeExecutionResult&&(u.codeExecutionResult=f.codeExecutionResult),Object.keys(u).length===0&&(u.text=""),n.candidates[o].content.parts.push(u)}}r.usageMetadata&&(n.usageMetadata=r.usageMetadata)}return n}async function Pf(t,e,n,r){let i=await pi(e,Wn.STREAM_GENERATE_CONTENT,t,!0,JSON.stringify(n),r);return iv(i)}async function Nf(t,e,n,r){let o=await(await pi(e,Wn.GENERATE_CONTENT,t,!1,JSON.stringify(n),r)).json();return{response:iu(o)}}function Bf(t){if(t!=null){if(typeof t=="string")return{role:"system",parts:[{text:t}]};if(t.text)return{role:"system",parts:[t]};if(t.parts)return t.role?t:{role:"system",parts:t.parts}}}function di(t){let e=[];if(typeof t=="string")e=[{text:t}];else for(let n of t)typeof n=="string"?e.push({text:n}):e.push(n);return lv(e)}function lv(t){let e={role:"user",parts:[]},n={role:"function",parts:[]},r=!1,i=!1;for(let o of t)"functionResponse"in o?(n.parts.push(o),i=!0):(e.parts.push(o),r=!0);if(r&&i)throw new nt("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!i)throw new nt("No content is provided for sending chat message.");return r?e:n}function cv(t,e){var n;let r={model:e==null?void 0:e.model,generationConfig:e==null?void 0:e.generationConfig,safetySettings:e==null?void 0:e.safetySettings,tools:e==null?void 0:e.tools,toolConfig:e==null?void 0:e.toolConfig,systemInstruction:e==null?void 0:e.systemInstruction,cachedContent:(n=e==null?void 0:e.cachedContent)===null||n===void 0?void 0:n.name,contents:[]},i=t.generateContentRequest!=null;if(t.contents){if(i)throw new Yt("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=t.contents}else if(i)r=Object.assign(Object.assign({},r),t.generateContentRequest);else{let o=di(t);r.contents=[o]}return{generateContentRequest:r}}function Mf(t){let e;return t.contents?e=t:e={contents:[di(t)]},t.systemInstruction&&(e.systemInstruction=Bf(t.systemInstruction)),e}function fv(t){return typeof t=="string"||Array.isArray(t)?{content:di(t)}:t}var Af=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],hv={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function dv(t){let e=!1;for(let n of t){let{role:r,parts:i}=n;if(!e&&r!=="user")throw new nt(`First content should be with role 'user', got ${r}`);if(!Ef.includes(r))throw new nt(`Each item should include role field. Got ${r} but valid roles are: ${JSON.stringify(Ef)}`);if(!Array.isArray(i))throw new nt("Content should have 'parts' property with an array of Parts");if(i.length===0)throw new nt("Each Content should have at least one part");let o={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(let f of i)for(let d of Af)d in f&&(o[d]+=1);let u=hv[r];for(let f of Af)if(!u.includes(f)&&o[f]>0)throw new nt(`Content with role '${r}' can't contain '${f}' part`);e=!0}}var If="SILENT_ERROR",ru=class{constructor(e,n,r,i={}){this.model=n,this.params=r,this._requestOptions=i,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,r!=null&&r.history&&(dv(r.history),this._history=r.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,n={}){var r,i,o,u,f,d;await this._sendPromise;let p=di(e),E={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(u=this.params)===null||u===void 0?void 0:u.toolConfig,systemInstruction:(f=this.params)===null||f===void 0?void 0:f.systemInstruction,cachedContent:(d=this.params)===null||d===void 0?void 0:d.cachedContent,contents:[...this._history,p]},y=Object.assign(Object.assign({},this._requestOptions),n),_;return this._sendPromise=this._sendPromise.then(()=>Nf(this._apiKey,this.model,E,y)).then(M=>{var K;if(M.response.candidates&&M.response.candidates.length>0){this._history.push(p);let ue=Object.assign({parts:[],role:"model"},(K=M.response.candidates)===null||K===void 0?void 0:K[0].content);this._history.push(ue)}else{let ue=xn(M.response);ue&&console.warn(`sendMessage() was unsuccessful. ${ue}. Inspect response object for details.`)}_=M}),await this._sendPromise,_}async sendMessageStream(e,n={}){var r,i,o,u,f,d;await this._sendPromise;let p=di(e),E={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(u=this.params)===null||u===void 0?void 0:u.toolConfig,systemInstruction:(f=this.params)===null||f===void 0?void 0:f.systemInstruction,cachedContent:(d=this.params)===null||d===void 0?void 0:d.cachedContent,contents:[...this._history,p]},y=Object.assign(Object.assign({},this._requestOptions),n),_=Pf(this._apiKey,this.model,E,y);return this._sendPromise=this._sendPromise.then(()=>_).catch(M=>{throw new Error(If)}).then(M=>M.response).then(M=>{if(M.candidates&&M.candidates.length>0){this._history.push(p);let K=Object.assign({},M.candidates[0].content);K.role||(K.role="model"),this._history.push(K)}else{let K=xn(M);K&&console.warn(`sendMessageStream() was unsuccessful. ${K}. Inspect response object for details.`)}}).catch(M=>{M.message!==If&&console.error(M)}),_}};async function pv(t,e,n,r){return(await pi(e,Wn.COUNT_TOKENS,t,!1,JSON.stringify(n),r)).json()}async function mv(t,e,n,r){return(await pi(e,Wn.EMBED_CONTENT,t,!1,JSON.stringify(n),r)).json()}async function gv(t,e,n,r){let i=n.requests.map(u=>Object.assign(Object.assign({},u),{model:e}));return(await pi(e,Wn.BATCH_EMBED_CONTENTS,t,!1,JSON.stringify({requests:i}),r)).json()}var qs=class{constructor(e,n,r={}){this.apiKey=e,this._requestOptions=r,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=Bf(n.systemInstruction),this.cachedContent=n.cachedContent}async generateContent(e,n={}){var r;let i=Mf(e),o=Object.assign(Object.assign({},this._requestOptions),n);return Nf(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},i),o)}async generateContentStream(e,n={}){var r;let i=Mf(e),o=Object.assign(Object.assign({},this._requestOptions),n);return Pf(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},i),o)}startChat(e){var n;return new ru(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},e),this._requestOptions)}async countTokens(e,n={}){let r=cv(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),i=Object.assign(Object.assign({},this._requestOptions),n);return pv(this.apiKey,this.model,r,i)}async embedContent(e,n={}){let r=fv(e),i=Object.assign(Object.assign({},this._requestOptions),n);return mv(this.apiKey,this.model,r,i)}async batchEmbedContents(e,n={}){let r=Object.assign(Object.assign({},this._requestOptions),n);return gv(this.apiKey,this.model,e,r)}};var wr=class{constructor(e){this.apiKey=e}getGenerativeModel(e,n){if(!e.model)throw new nt("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new qs(this.apiKey,e,n)}getGenerativeModelFromCachedContent(e,n,r){if(!e.name)throw new Yt("Cached content must contain a `name` field.");if(!e.model)throw new Yt("Cached content must contain a `model` field.");let i=["model","systemInstruction"];for(let u of i)if(n!=null&&n[u]&&e[u]&&(n==null?void 0:n[u])!==e[u]){if(u==="model"){let f=n.model.startsWith("models/")?n.model.replace("models/",""):n.model,d=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(f===d)continue}throw new Yt(`Different value for "${u}" specified in modelParams (${n[u]}) and cachedContent (${e[u]})`)}let o=Object.assign(Object.assign({},n),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new qs(this.apiKey,o,r)}};var js=class{constructor(e,n,r,i){this.apiKey=n,this.modelName=r,this.searchGroundingThreshold=i,this.gemini=new wr(this.apiKey),this.searchModel=this.gemini.getGenerativeModel({model:this.modelName,systemInstruction:e,tools:this.getTools()})}getSearchModel(){return this.searchModel}getTools(){let e=[];switch(!0){case(this.modelName.startsWith("gemini-2.0-flash-lite")||this.modelName.startsWith("gemini-2.0-flash-thinking")):e=[];break;case(this.modelName.startsWith("gemini-2.0-flash")||this.modelName.startsWith("gemini-2.0-pro")):e=[{google_search:{}}];break;default:e=[{googleSearchRetrieval:{dynamicRetrievalConfig:{mode:Gs.MODE_DYNAMIC,dynamicThreshold:this.searchGroundingThreshold}}}];break}return e}};var Lf=require("obsidian"),Us=class{constructor(e){this.plugin=e,this.prompts=new ut,this.gemini=new wr(this.plugin.settings.apiKey)}async generateModelResponse(e){let n=this.getModelInstance(e.model);if(!e.prompt)throw new Error("No prompt provided to generateModelResponse.");let r={markdown:"",rendered:""};try{if("conversationHistory"in e){let i=await this.buildContents(e),o=await n.generateContent({contents:i});r=this.parseModelResult(o)}else{let i=await n.generateContent(e.prompt);r=this.parseModelResult(i)}return r}catch(i){throw console.error("Error calling Gemini:",i),new Lf.Notice("Error calling Gemini."),i}}getModelInstance(e){let n=e!=null?e:this.plugin.settings.chatModelName,r=window.localStorage.getItem("language")||"en",i=this.prompts.systemPrompt({userName:this.plugin.settings.userName,language:r}),o=[],u;return this.plugin.settings.searchGrounding?u=new js(i,this.plugin.settings.apiKey,n,this.plugin.settings.searchGroundingThreshold).getSearchModel():u=this.gemini.getGenerativeModel({model:n,systemInstruction:i}),u}parseModelResult(e){var r,i,o,u;let n={markdown:"",rendered:""};return n.markdown=e.response.text(),(o=(i=(r=e.response.candidates)==null?void 0:r[0])==null?void 0:i.groundingMetadata)!=null&&o.searchEntryPoint&&(n.rendered=(u=e.response.candidates[0].groundingMetadata.searchEntryPoint.renderedContent)!=null?u:""),n}async buildContents(e){var p,E;let n=[];e.prompt!=null&&n.push(this.buildContentElement("user",e.prompt));let r=this.prompts.datePrompt({date:new Date().toDateString()});n.push(this.buildContentElement("user",r));let i=this.plugin.settings.maxContextDepth,o=(p=e.renderContent)!=null?p:!0,u=await this.plugin.gfile.getCurrentFileContent(i,o);u!=null&&n.push(this.buildContentElement("user",u)),((E=e.conversationHistory)!=null?E:[]).forEach(y=>{n.push(this.buildContentElement(y.role,y.message))});let d=this.prompts.timePrompt({time:new Date().toLocaleTimeString()});return n.push(this.buildContentElement("user",d)),n.push(this.buildContentElement("user",e.userMessage)),n}buildContentElement(e,n){return[{role:e,parts:[{text:n}]}]}};var gd=require("obsidian");var md=uo(pd()),ha=class{constructor(e,n){this.scribeFile=e,this.dataViewAPI=this.getDataViewAPI(),this.plugin=n}getDataViewAPI(){let e=(0,md.getAPI)();return e||null}async getBacklinks(e){let n="list where contains(file.outlinks, this.file.link)";return await this.evaluateDataviewQuery(n,e)}async getLinksFromDataviewBlocks(e){let n=new Set,r=[];return await this.iterateCodeblocksInFile(e,o=>{o.language==="dataview"&&r.push(this.evaluateDataviewQuery(o.text,e))}),(await Promise.all(r)).forEach(o=>{o.forEach(u=>n.add(u))}),n}async evaluateDataviewQuery(e,n){let r=new Set;try{let i=await this.dataViewAPI.query(e,n.path);if(!(i!=null&&i.value))return console.warn(`Invalid query result for "${e}" in file "${n.path}"`),r;let o=u=>{if(this.isFileLink(u)){let f=this.scribeFile.normalizePath(u.path,n);f?r.add(f):console.warn(`Link "${u}" in file "${n.path}" could not be normalized.`)}};if(i.value.type==="list")for(let u of i.value.values)o(u);else if(i.value.type==="table")for(let u of i.value.values)for(let f of u)o(f)}catch(i){console.error(`Error evaluating dataview query "${e}" in file "${n.path}":`,i)}return r}isFileLink(e){return e&&typeof e=="object"&&typeof e.path=="string"?!(e.subpath||e.path.includes("#")||e.path.includes("^")):!1}async iterateCodeblocksInFile(e,n){let i=(await this.plugin.app.vault.read(e)).split(`
`),o=null;for(let u=0;u<i.length;u++){let f=i[u];if(f.startsWith("```"))if(o)n(o),o=null;else{let d=f.substring(3).trim();o={start:u,end:-1,text:"",language:d}}else o&&(o.text+=f+`
`)}o&&(o.end=i.length-1,n(o))}};var da=class{constructor(e,n){this.root=null;this.visited=new Set;this.MAX_TOTAL_CHARS=5e5;this.plugin=e,this.maxDepth=n!=null?n:this.plugin.settings.maxContextDepth,this.fileHelper=new Ar(e),this.dataViewHelper=new ha(this.fileHelper,this.plugin),this.prompts=new ut}async buildStructure(e,n=0,r,i,o){if(!e||n>this.maxDepth||i.has(e.path))return null;i.add(e.path);let u=this.fileHelper.getLinkText(e,o.path),f={path:e.path,content:await this.getFileContent(e,r),wikilink:u,links:new Map},d=this.fileHelper.getUniqueLinks(e),p=await this.dataViewHelper.getBacklinks(e)||new Set,E=await this.dataViewHelper.getLinksFromDataviewBlocks(e)||new Set,y=d;p.forEach(_=>y.add(_)),E.forEach(_=>y.add(_));for(let _ of y){let M=await this.buildStructure(_,n+1,r,i,o);M&&f.links.set(_.path,M)}return f}async initialize(e,n){this.visited.clear(),this.root=await this.buildStructure(e,0,n,this.visited,e)}toString(e=5e4){return this.root?this.nodeToString(this.root,0,e,0).text:"No file structure built"}nodeToString(e,n,r,i){let o=e.content.length>r?e.content.substring(0,r)+`
[Remaining content truncated...]`:e.content,u=n==0?`This is the content of the current file and the files that it links to:
`:"",f=n==0?"Current File":"Linked File";u+=this.prompts.contextPrompt({file_label:f,file_name:e.path,wikilink:e.wikilink,file_contents:o});let d=i+u.length;if(e.links.size>0&&d<this.MAX_TOTAL_CHARS)for(let[p,E]of e.links){if(d>=this.MAX_TOTAL_CHARS){u+=`[Additional links truncated...]
`;break}let y=this.nodeToString(E,n+1,r,d);u+=y.text,d=y.total}return{text:u,total:d}}async getFileContent(e,n){let r=await this.plugin.app.vault.read(e)||"";if(n){let i=document.createElement("div");return await gd.MarkdownRenderer.render(this.plugin.app,r,i,e.path,this.plugin),i.innerHTML}else return r}};var yd=require("obsidian"),Ar=class{constructor(e){this.plugin=e}async getCurrentFileContent(e=this.plugin.settings.maxContextDepth,n=!1){let r=this.getActiveFile();if(r){let i=new da(this.plugin,e);return await i.initialize(r,n),i.toString()}else return null}async addToFrontMatter(e,n){let r=this.getActiveFile();r&&this.plugin.app.fileManager.processFrontMatter(r,i=>{i[e]=n})}async replaceTextInActiveFile(e){let n=this.getActiveFile(),r=this.plugin.app.vault;n&&r.modify(n,e)}getActiveFile(){let e=this.plugin.app.workspace.getActiveFile();return this.isFile(e)?e:(console.debug("No active file found."),null)}isFile(e){return!!(e&&e instanceof yd.TFile)}isMarkdownFile(e){return!!(e&&this.isFile(e)&&e.extension==="md")}getLinkText(e,n){return`[[${this.plugin.app.metadataCache.fileToLinktext(e,n,!0)}]]`}normalizePath(e,n){let r=this.plugin.app.metadataCache.getFirstLinkpathDest(e,n.path);return this.isMarkdownFile(r)?r:null}normalizeLinkPathsFromMetadata(e){let n=this.plugin.app.metadataCache.getFileCache(e),r=[],i=[],o=[];if(n){if(n.links)for(let u of n.links){let f=this.normalizePath(u.link,e);f?r.push(f):console.warn(`Link "${u.link}" in file "${e.path}" could not be normalized.`)}if(n.embeds)for(let u of n.embeds){let f=this.normalizePath(u.link,e);f?i.push(f):console.warn(`Embed "${u.link}" in file "${e.path}" could not be normalized.`)}if(n.frontmatterLinks)for(let u of n.frontmatterLinks){let f=this.normalizePath(u.link,e);f?o.push(f):console.warn(`Frontmatter link "${u.link}" in file "${e.path}" could not be normalized.`)}if(n.frontmatter&&n.frontmatter.links){if(Array.isArray(n.frontmatter.links))n.frontmatter.links.forEach(u=>{let f=this.normalizePath.call(this,u);f?o.push(f):console.warn(`Frontmatter link "${u}" in file "${e.path}" could not be normalized.`)});else if(typeof n.frontmatter.links=="string"){let u=this.normalizePath.call(this,n.frontmatter.links);u?o.push(u):console.warn(`Frontmatter link "${n.frontmatter.links}" in file "${e.path}" could not be normalized.`)}}}return{links:r,embeds:i,frontmatterLinks:o}}getUniqueLinks(e){let{links:n,embeds:r,frontmatterLinks:i}=this.normalizeLinkPathsFromMetadata(e);return new Set([...n,...r,...i])}};var xi=require("obsidian");var pa=uo(vd(),1),Dd=Symbol.for("Dexie"),ma=globalThis[Dd]||(globalThis[Dd]=pa.default);if(pa.default.semVer!==ma.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${pa.default.semVer} and ${ma.semVer}`);var{liveQuery:J0,mergeRanges:Q0,rangesOverlap:$0,RangeSet:X0,cmp:eb,Entity:tb,PropModSymbol:nb,PropModification:rb,replacePrefix:ib,add:sb,remove:ab}=ma;var bd=ma;var ga=class{constructor(){this.dbQueue=[];this.isProcessingQueue=!1;this.lastProcessingStartTime=null;this.QUEUE_TIMEOUT=5e3;this.operationId=0}async enqueue(e,n){let r=n||e.name||"anonymous";return new Promise((i,o)=>{let u=async()=>{try{let f=await e();return i(f),f}catch(f){throw o(f),f}};this.dbQueue.push({operation:u,name:r}),this.processQueue()})}async processQueue(){if(this.isProcessingQueue)if(this.lastProcessingStartTime&&Date.now()-this.lastProcessingStartTime>this.QUEUE_TIMEOUT)this.isProcessingQueue=!1;else return;this.isProcessingQueue=!0,this.lastProcessingStartTime=Date.now();try{for(;this.dbQueue.length>0;){let e=++this.operationId,n=this.dbQueue.shift();if(!n)continue;let r=Date.now();try{let i=await n.operation();await new Promise(o=>setTimeout(o,0))}catch(i){throw console.error(`[Queue] Operation ${e}: ${n.name} failed:`,i),i}}}finally{this.isProcessingQueue=!1,this.lastProcessingStartTime=null}}};var ya=class{constructor(e,n){this.conversations=e;this.queue=n}async addConversation(e){return this.queue.enqueue(async()=>await this.conversations.add(e),"Add Conversation")}async getConversations(e){return this.queue.enqueue(async()=>await this.conversations.where("notePath").equals(e).toArray(),"Get Conversations")}async clearConversations(e){return this.queue.enqueue(async()=>await this.conversations.where("notePath").equals(e).delete(),"Clear Conversations")}async clearHistory(){return this.queue.enqueue(async()=>{try{return await this.conversations.clear(),!0}catch(e){return!1}},"Clear History")}async setup(){await this.queue.enqueue(async()=>{let e=await this.conversations.count();console.debug(`Database initialized with ${e} conversations`)},"Initialize Database")}};var wd=require("obsidian"),Ed=require("crypto");async function va(t){let e=t.settings.historyFolder,n=t.app.vault.getAbstractFileByPath(e);if(n instanceof wd.TFolder)return n;try{return await t.app.vault.createFolder(e)}catch(r){throw console.error(`Failed to create folder ${e}:`,r),r}}function Vu(t){return(0,Ed.createHash)("md5").update(t).digest("hex")}var Da=class{constructor(e,n,r,i){this.conversations=e;this.queue=n;this.plugin=r;this.operations=i;this.lastExportChecksum=null;this.isImporting=!1;this.isExporting=!1;this.lastConversationCount=0}async clearHistory(){return this.operations.clearHistory()}async hasFileChanged(e){let n=Vu(e),r=n!==this.lastExportChecksum;return this.lastExportChecksum===null?console.debug("First import - no previous checksum"):console.debug(r?`File changed (previous: ${this.lastExportChecksum}, current: ${n})`:"File unchanged"),r}async exportDatabaseToVault(){return this.queue.enqueue(async()=>{if(this.isExporting){console.debug("Export operation is already in progress.");return}this.isExporting=!0;try{if(!this.plugin.settings.chatHistory)return;let e=await this.conversations.orderBy("notePath").toArray();if(e.length<this.lastConversationCount){console.error(`Preventing export: conversation count decreased from ${this.lastConversationCount} to ${e.length}`);return}if(e.length===0){let d=await this.checkExistingFile();if(d&&Object.keys(d.conversations).length>0){console.error("Preventing export of empty database over existing data");return}}this.lastConversationCount=e.length;let r={version:1,conversations:this.processConversations(e),metadata:{exportedAt:new Date().toISOString(),pluginVersion:this.plugin.manifest.version,conversationsCount:e.length}},i=JSON.stringify(r,null,2);this.lastExportChecksum=Vu(i),r.metadata.checksum=this.lastExportChecksum;let o=await va(this.plugin),u=`${o.path}/gemini-scribe-history.json`,f=`${o.path}/gemini-scribe-history.backup.json`;try{let d=await this.plugin.app.vault.adapter.read(u);await this.plugin.app.vault.adapter.write(f,d)}catch(d){}await this.plugin.app.vault.adapter.write(u,i),console.debug(`History export complete. Saved ${e.length} conversations`)}catch(e){throw console.error("Export failed:",e),e}finally{this.isExporting=!1}},"Export Database to Vault")}async checkExistingFile(){try{let n=`${(await va(this.plugin)).path}/gemini-scribe-history.json`,r=await this.plugin.app.vault.adapter.read(n);return JSON.parse(r)}catch(e){return null}}processConversations(e){return Object.fromEntries(Object.entries(e.reduce((n,r)=>{let{id:i,notePath:o,created_at:u,role:f,message:d,metadata:p}=r;n[o]||(n[o]=new Map);let y=`${u instanceof Date?u.getTime():new Date(u).getTime()}-${f}-${d}`;return n[o].has(y)||n[o].set(y,{notePath:o,created_at:u instanceof Date?u:new Date(u),role:f,message:d,metadata:p}),n},{})).map(([n,r])=>[n,Array.from(r.values())]))}async importDatabaseFromVault(){return this.queue.enqueue(async()=>{var e,n;if(this.isImporting)return console.warn("Import operation is already in progress."),!1;this.isImporting=!0;try{if(!this.plugin.settings.chatHistory)return console.debug("Chat history disabled, skipping import"),!1;try{let i=`${(await va(this.plugin)).path}/gemini-scribe-history.json`,o=await this.plugin.app.vault.adapter.read(i),u=JSON.parse(o);if(!await this.hasFileChanged(o))return console.debug("No changes in history file"),!1;if(console.debug("Importing history from vault..."),!await this.clearHistory())return console.error("Failed to clear history before import. Aborting import to prevent duplicates."),!1;for(let[d,p]of Object.entries(u.conversations)){let E=new Map;p.forEach(_=>{let K=`${new Date(_.created_at).getTime()}-${_.role}-${_.message}`;E.has(K)||E.set(K,{notePath:_.notePath,created_at:new Date(_.created_at),role:_.role,message:_.message,metadata:_.metadata})});let y=Array.from(E.values()).sort((_,M)=>_.created_at.getTime()-M.created_at.getTime());await this.conversations.bulkAdd(y)}return this.lastExportChecksum=(n=(e=u.metadata)==null?void 0:e.checksum)!=null?n:null,console.debug("History import complete"),!0}catch(r){return console.error("Inner import failed:",r),!1}}catch(r){return console.error("Outer import failed:",r),!1}finally{this.isImporting=!1}},"Import Database from Vault")}};var ba=class{constructor(e){this.exporter=e;this.intervalId=null;this.EXPORT_INTERVAL=5*60*1e3}start(){this.intervalId||(this.exporter.exportDatabaseToVault(),this.intervalId=setInterval(()=>{this.exporter.exportDatabaseToVault()},this.EXPORT_INTERVAL))}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)}};var wa=class extends bd{constructor(n){super("GeminiDatabase");this.plugin=n;this.version(2).stores({conversations:"++id, notePath, [notePath+created_at], created_at, role, message"}),this.queue=new ga,this.operations=new ya(this.conversations,this.queue),this.exporter=new Da(this.conversations,this.queue,n,this.operations),this.periodicExport=new ba(this.exporter),this.addConversation=this.operations.addConversation.bind(this.operations),this.getConversations=this.operations.getConversations.bind(this.operations),this.clearConversations=this.operations.clearConversations.bind(this.operations),this.clearHistory=this.operations.clearHistory.bind(this.operations),this.exportDatabaseToVault=this.exporter.exportDatabaseToVault.bind(this.exporter),this.importDatabaseFromVault=this.exporter.importDatabaseFromVault.bind(this.exporter),this.open()}async setupDatabase(){try{await this.open(),await this.operations.setup(),this.plugin.settings.chatHistory&&(await this.importDatabaseFromVault()||console.debug("No existing history found or import failed"),this.periodicExport.start())}catch(n){throw console.error("Failed to setup database:",n),n}}async close(){try{this.periodicExport.stop(),this.plugin.settings.chatHistory&&await this.exportDatabaseToVault(),super.close()}catch(n){throw console.error("Error during database close:",n),n}}};var Ea=class{constructor(e){this.debouncedExport=(0,xi.debounce)(async()=>{await this.exportHistory()},1e3,!0);this.debouncedImport=(0,xi.debounce)(async()=>{await this.importHistory()},1e3,!1);this.plugin=e,this.database=new wa(e)}async setupHistoryCommands(){if(this.plugin.settings.chatHistory)try{this.plugin.addCommand({id:"gemini-scribe-export-conversations",name:"Export Chat History to Vault",callback:async()=>{await this.exportHistory()}}),this.plugin.addCommand({id:"gemini-scribe-import-conversations",name:"Import Chat History from Vault",callback:async()=>{await this.importHistory()}}),this.plugin.addCommand({id:"gemini-scribe-clear-conversations",name:"Clear All Chat History",callback:async()=>{await this.clearHistory()}})}catch(e){console.error("Failed to add export command",e)}}async onLayoutReady(){await this.setupHistory()}async setupHistory(){this.plugin.app.vault.on("rename",this.renameHistoryFile.bind(this)),this.plugin.app.vault.on("modify",this.modifyHistoryFile.bind(this)),await this.database.setupDatabase()}async onUnload(){console.debug("Unloading history module..."),this.plugin.app.vault.off("rename",this.renameHistoryFile.bind(this)),this.plugin.app.vault.off("modify",this.modifyHistoryFile.bind(this)),await this.database.close()}async renameHistoryFile(e,n){let r=e.path,i=await this.database.conversations.where("notePath").equals(n).modify({notePath:r});await Promise.all([i]),await this.exportHistory()}async appendHistoryForFile(e,n){if(this.plugin.gfile.isFile(e)){let i={notePath:e.path,created_at:new Date,role:n.role,message:n.message};await this.database.addConversation(i),await this.debouncedExport()}}async getHistoryForFile(e){if(this.plugin.gfile.isFile(e)){let n=e.path;return await this.database.getConversations(n)}return[]}async clearHistoryForFile(e){if(this.plugin.gfile.isFile(e)){let n=e.path;return await this.database.clearConversations(n)}}async appendHistory(e){let n=this.plugin.app.workspace.getActiveFile();n&&await this.appendHistoryForFile(n,e)}async clearHistory(){await this.database.clearHistory()}async exportHistory(){if(this.plugin.settings.chatHistory)try{if(!this.database.isOpen()){console.debug("Database is closed, skipping history export");return}await this.database.exportDatabaseToVault()}catch(e){if((e==null?void 0:e.name)==="DatabaseClosedError"){console.debug("DatabaseClosedError caught; export skipped.");return}else throw e}}async importHistory(){this.plugin.settings.chatHistory&&await this.database.importDatabaseFromVault()&&(new xi.Notice("Chat history updated from vault."),await this.plugin.geminiView.reloadChatFromHistory())}async modifyHistoryFile(e){let r=`${this.plugin.settings.historyFolder}/gemini-scribe-history.json`;e.path===r&&await this.debouncedImport()}async getTotalConversationCount(){let e=this.plugin.app.vault.getMarkdownFiles(),n=0;for(let r of e){let i=await this.getHistoryForFile(r);n+=i.length}return n}};var Pr=require("obsidian");var St=require("@codemirror/view"),pn=require("@codemirror/state");function Cd(t,e,n=void 0){let r={force:()=>{}},i=null;async function*o(...u){i&&clearTimeout(i);let f=null;try{await new Promise(d=>{f=i=setTimeout(()=>d(),e),r.force=()=>{i&&clearTimeout(i),d()}})}catch(d){if(n!==void 0)throw n}for await(let d of t(...u)){if(f!==i)break;yield d}}return{debounced:o,force:()=>r.force()}}var b2=Object.defineProperty,w2=(t,e,n)=>e in t?b2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ir=(t,e,n)=>(w2(t,typeof e!="symbol"?e+"":e,n),n),Ca=pn.StateField.define({create(){return{suggestion:null}},update(t,e){let n=e.effects.find(r=>r.is(Uu));return e.state.doc&&n&&(n.value.doc==null||e.state.doc==n.value.doc)?{suggestion:n.value.suggestion}:{suggestion:null}}}),Uu=pn.StateEffect.define();function E2(t,e){let n=t.state.selection.main.head,r=[],i=St.Decoration.widget({widget:new Gu(e),side:1});return r.push(i.range(n)),St.Decoration.set(r)}var Gu=class extends St.WidgetType{constructor(e){super(),Ir(this,"suggestion"),this.suggestion=e}toDOM(){let e=document.createElement("span");return e.style.opacity="0.4",e.className="cm-inline-suggestion",e.textContent=this.suggestion,e}},Ku=t=>{let e=0;return St.ViewPlugin.fromClass(class{async update(n){let r=n.state.doc;if(!n.docChanged)return;let i=++e;for await(let o of t(n.state)){if(i!=e)return;n.view.dispatch({effects:Uu.of({suggestion:o,doc:r})})}}})},qu=class{constructor(){Ir(this,"decorations"),this.decorations=St.Decoration.none}update(e){var n;let r=(n=e.state.field(Ca))==null?void 0:n.suggestion;if(!r){this.decorations=St.Decoration.none;return}this.decorations=E2(e.view,r.display_suggestion)}},Fd=St.ViewPlugin.fromClass(qu,{decorations:t=>t.decorations}),ju=class{constructor(e,n){Ir(this,"suggestFn"),Ir(this,"keymap"),Ir(this,"completionId"),Ir(this,"run",r=>{var i,o;let u=(i=r.state.field(Ca))==null?void 0:i.suggestion;return u?(r.dispatch({...C2(r.state,u.complete_suggestion,r.state.selection.main.head,r.state.selection.main.head)}),(o=u.accept_hook)==null||o.call(u),(async()=>{if(this.suggestFn==null)return;let f=++this.completionId;for await(let d of this.suggestFn(r.state)){if(f!=this.completionId)return;r.dispatch({effects:Uu.of({suggestion:{complete_suggestion:d.complete_suggestion,display_suggestion:d.display_suggestion,accept_hook:d.accept_hook},doc:null})})}})(),!0):!1}),this.suggestFn=e,this.keymap=pn.Prec.highest(St.keymap.of([{key:n,run:r=>this.run(r)}])),this.completionId=0}};function C2(t,e,n,r){return{...t.changeByRange(i=>{if(i==t.selection.main)return{changes:{from:n,to:r,insert:e},range:pn.EditorSelection.cursor(n+e.length)};let o=r-n;return!i.empty||o&&t.sliceDoc(i.from-o,i.from)!=t.sliceDoc(n,r)?{range:i}:{changes:{from:i.from-o,to:i.from,insert:e},range:pn.EditorSelection.cursor(i.from-o+e.length)}}),userEvent:"input.complete"}}function _d(t){return typeof t=="string"?{complete_suggestion:t,display_suggestion:t}:t}function F2(t){return async function*(e){let n=await t(e);if(typeof n=="string"||"complete_suggestion"in n){yield _d(n);return}for await(let r of n)yield _d(r)}}function Wu(t){let{delay:e=500,accept_shortcut:n="Tab"}=t,r=F2(t.fetchFn),{debounced:i,force:o}=Cd(r,e);return{extension:n?[Ca,Ku(i),Fd,new ju(t.continue_suggesting?r:null,n).keymap]:[Ca,Ku(i),Fd],force_fetch:o}}var Fa=class{constructor(e){this.force_fetch=()=>{};this.TYPING_DELAY=750;this.completionsOn=!1;this.plugin=e,this.prompts=new ut,this.debouncedComplete=(0,Pr.debounce)(()=>this.force_fetch(),this.TYPING_DELAY,!0)}async*complete(){if(!this.completionsOn)return;let e=this.plugin.app.workspace.getActiveViewOfType(Pr.MarkdownView);if(!e)return;let n=e.editor,r=n.getCursor(),o=n.getLine(r.line).substring(0,r.ch),u=o.length>0&&!o.endsWith(" "),f=n.getRange({line:0,ch:0},r),d=n.getRange(r,{line:n.lastLine(),ch:n.getLine(n.lastLine()).length}),p=await this.generateNextSentence(f,d),E=u?" "+p:p;yield{display_suggestion:E,complete_suggestion:E}}async generateNextSentence(e,n){let r={model:this.plugin.settings.completionsModelName,prompt:this.prompts.completionsPrompt({contentBeforeCursor:e,contentAfterCursor:n})};return(await this.plugin.geminiApi.generateModelResponse(r)).markdown.replace(/\n$/,"")}async setupCompletions(){let{extension:e,force_fetch:n}=Wu({fetchFn:()=>this.complete()});this.force_fetch=n,this.plugin.registerEditorExtension(e)}async setupCompletionsCommands(){try{this.plugin.addCommand({id:"gemini-scribe-toggle-completions",name:"Toggle completions",callback:()=>{this.completionsOn=!this.completionsOn,new Pr.Notice(`Gemini Scribe Completions are now ${this.completionsOn?"enabled":"disabled"}.`),this.completionsOn&&this.force_fetch()}})}catch(e){console.error("Error setting up completion commands:",e)}}};var _2={apiKey:"",chatModelName:"gemini-1.5-pro",summaryModelName:"gemini-1.5-flash",completionsModelName:"gemini-1.5-flash-8b",sendContext:!1,maxContextDepth:2,searchGrounding:!1,searchGroundingThreshold:.7,summaryFrontmatterKey:"summary",userName:"User",rewriteFiles:!1,chatHistory:!1,historyFolder:"gemini-scribe"},_a=class extends Sd.Plugin{async onload(){await this.setupGeminiScribe(),this.ribbonIcon=this.addRibbonIcon("sparkles","Open Gemini Chat",()=>{this.activateView()}),this.registerView(ci,n=>this.geminiView=new Rs(n,this)),this.addCommand({id:"gemini-scribe-open-view",name:"Open Gemini Chat",callback:()=>this.activateView()}),this.addSettingTab(new Jr(this.app,this)),this.app.workspace.onLayoutReady(()=>this.onLayoutReady())}async setupGeminiScribe(){await this.loadSettings(),this.geminiApi=new Us(this),this.gfile=new Ar(this),this.history=new Ea(this),await this.history.setupHistoryCommands(),this.app.workspace.layoutReady&&await this.history.onLayoutReady,this.completions=new Fa(this),await this.completions.setupCompletions(),await this.completions.setupCompletionsCommands(),this.summarizer=new Hs(this),await this.summarizer.setupSummarizaitonCommand()}async activateView(){let{workspace:n}=this.app,r=null,i=n.getLeavesOfType(ci);i.length>0?(r=i[0],await n.revealLeaf(r)):(r=n.getLeftLeaf(!1),r?(await r.setViewState({type:ci,active:!0}),await n.revealLeaf(r)):console.error("Could not find a leaf to open the view"))}async onLayoutReady(){await this.history.onLayoutReady()}async loadSettings(){this.settings=Object.assign({},_2,await this.loadData())}async saveSettings(){await this.saveData(this.settings),await this.setupGeminiScribe()}onunload(){var n,r;console.debug("Unloading Gemini Scribe"),(n=this.history)==null||n.onUnload(),(r=this.ribbonIcon)==null||r.remove()}};
/*! Bundled license information:

dexie/dist/dexie.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)

@google/generative-ai/dist/index.mjs:
  (**
   * @license
   * Copyright 2024 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@google/generative-ai/dist/index.mjs:
  (**
   * @license
   * Copyright 2024 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
*/


/* nosourcemap */